/* empty css           */import{S as Se,i as De,s as Ae,n as ve,d as c,r as Ie,b as Q,K as _e,c as X,e as o,l as ae,f,g as u,h as m,m as oe,j as D,k as O,o as d,p as A,t as U,u as qe,a as Pe}from"../chunks/index.js";import{e as be}from"../chunks/each.js";function me(a,t,e){const s=a.slice();return s[20]=t[e],s}function ge(a){let t,e,s=be(a[4]),l=[];for(let n=0;n<s.length;n+=1)l[n]=we(me(a,s,n));return{c(){t=d("div"),e=d("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=u(n,"DIV",{class:!0});var h=m(t);e=u(h,"UL",{});var r=m(e);for(let _=0;_<l.length;_+=1)l[_].l(r);r.forEach(c),h.forEach(c),this.h()},h(){f(t,"class","warning svelte-1yopf77")},m(n,h){X(n,t,h),o(t,e);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(n,h){if(h&16){s=be(n[4]);let r;for(r=0;r<s.length;r+=1){const _=me(n,s,r);l[r]?l[r].p(_,h):(l[r]=we(_),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},d(n){n&&c(t),Pe(l,n)}}}function we(a){let t,e=a[20]+"",s;return{c(){t=d("li"),s=U(e)},l(l){t=u(l,"LI",{});var n=m(t);s=O(n,e),n.forEach(c)},m(l,n){X(l,t,n),o(t,s)},p(l,n){n&16&&e!==(e=l[20]+"")&&Q(s,e)},d(l){l&&c(t)}}}function Ee(a){let t,e="Generating preview…";return{c(){t=d("p"),t.textContent=e,this.h()},l(s){t=u(s,"P",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-3otbvi"&&(t.textContent=e),this.h()},h(){f(t,"class","preview-status")},m(s,l){X(s,t,l)},d(s){s&&c(t)}}}function ye(a){let t,e;return{c(){t=d("div"),e=U(a[7]),this.h()},l(s){t=u(s,"DIV",{class:!0});var l=m(t);e=O(l,a[7]),l.forEach(c),this.h()},h(){f(t,"class","message success svelte-1yopf77")},m(s,l){X(s,t,l),o(t,e)},p(s,l){l&128&&Q(e,s[7])},d(s){s&&c(t)}}}function ke(a){let t,e;return{c(){t=d("div"),e=U(a[8]),this.h()},l(s){t=u(s,"DIV",{class:!0});var l=m(t);e=O(l,a[8]),l.forEach(c),this.h()},h(){f(t,"class","message error svelte-1yopf77")},m(s,l){X(s,t,l),o(t,e)},p(s,l){l&256&&Q(e,s[8])},d(s){s&&c(t)}}}function Le(a){let t,e,s,l="Drop table",n,h,r,_,S,M,j,b,C,I,J,V,F="Include CASCADE to drop dependent objects",W,z,T,R,v="<h3>SQL Preview</h3>",y,B,q,ne,H,P,re,ie,L,Y=a[6]?"Dropping…":"Drop table",Z,ce,N,x,fe,ue,g=a[4].length>0&&ge(a),k=a[5]&&Ee(),w=a[7]&&ye(a),E=a[8]&&ke(a);return{c(){t=d("div"),e=d("header"),s=d("h2"),s.textContent=l,n=A(),h=d("p"),r=U(a[0]),_=U("."),S=d("span"),M=U(a[1]),j=A(),b=d("section"),C=d("label"),I=d("input"),J=A(),V=d("span"),V.textContent=F,W=A(),g&&g.c(),z=A(),T=d("div"),R=d("header"),R.innerHTML=v,y=A(),k&&k.c(),B=A(),q=d("textarea"),ne=A(),H=d("footer"),P=d("button"),re=U("Refresh preview"),ie=A(),L=d("button"),Z=U(Y),ce=A(),N=d("div"),w&&w.c(),x=A(),E&&E.c(),this.h()},l(i){t=u(i,"DIV",{class:!0});var p=m(t);e=u(p,"HEADER",{class:!0});var $=m(e);s=u($,"H2",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-1vxkcub"&&(s.textContent=l),n=D($),h=u($,"P",{class:!0});var ee=m(h);r=O(ee,a[0]),_=O(ee,"."),S=u(ee,"SPAN",{class:!0});var de=m(S);M=O(de,a[1]),de.forEach(c),ee.forEach(c),$.forEach(c),j=D(p),b=u(p,"SECTION",{class:!0});var G=m(b);C=u(G,"LABEL",{class:!0});var te=m(C);I=u(te,"INPUT",{type:!0}),J=D(te),V=u(te,"SPAN",{"data-svelte-h":!0}),oe(V)!=="svelte-1t12d6j"&&(V.textContent=F),te.forEach(c),W=D(G),g&&g.l(G),z=D(G),T=u(G,"DIV",{class:!0});var K=m(T);R=u(K,"HEADER",{"data-svelte-h":!0}),oe(R)!=="svelte-1jluutx"&&(R.innerHTML=v),y=D(K),k&&k.l(K),B=D(K),q=u(K,"TEXTAREA",{spellcheck:!0,rows:!0,class:!0}),m(q).forEach(c),K.forEach(c),G.forEach(c),ne=D(p),H=u(p,"FOOTER",{class:!0});var le=m(H);P=u(le,"BUTTON",{type:!0,class:!0});var pe=m(P);re=O(pe,"Refresh preview"),pe.forEach(c),ie=D(le),L=u(le,"BUTTON",{type:!0,class:!0});var he=m(L);Z=O(he,Y),he.forEach(c),le.forEach(c),ce=D(p),N=u(p,"DIV",{class:!0});var se=m(N);w&&w.l(se),x=D(se),E&&E.l(se),se.forEach(c),p.forEach(c),this.h()},h(){f(s,"class","svelte-1yopf77"),f(S,"class","svelte-1yopf77"),f(h,"class","svelte-1yopf77"),f(e,"class","svelte-1yopf77"),f(I,"type","checkbox"),I.checked=a[2],f(C,"class","cascade-toggle svelte-1yopf77"),f(q,"spellcheck",!1),f(q,"rows","10"),f(q,"class","svelte-1yopf77"),f(T,"class","sql-preview svelte-1yopf77"),f(b,"class","drop-body svelte-1yopf77"),f(P,"type","button"),f(P,"class","ps-btn ps-btn--ghost"),P.disabled=a[5],f(L,"type","button"),f(L,"class","ps-btn ps-btn--danger"),L.disabled=a[6],f(H,"class","drop-actions svelte-1yopf77"),f(N,"class","execution-feedback svelte-1yopf77"),f(t,"class","drop-container svelte-1yopf77")},m(i,p){X(i,t,p),o(t,e),o(e,s),o(e,n),o(e,h),o(h,r),o(h,_),o(h,S),o(S,M),o(t,j),o(t,b),o(b,C),o(C,I),o(C,J),o(C,V),o(b,W),g&&g.m(b,null),o(b,z),o(b,T),o(T,R),o(T,y),k&&k.m(T,null),o(T,B),o(T,q),_e(q,a[3]),o(t,ne),o(t,H),o(H,P),o(P,re),o(H,ie),o(H,L),o(L,Z),o(t,ce),o(t,N),w&&w.m(N,null),o(N,x),E&&E.m(N,null),fe||(ue=[ae(I,"change",a[10]),ae(q,"input",a[14]),ae(P,"click",a[9]),ae(L,"click",a[11])],fe=!0)},p(i,[p]){p&1&&Q(r,i[0]),p&2&&Q(M,i[1]),p&4&&(I.checked=i[2]),i[4].length>0?g?g.p(i,p):(g=ge(i),g.c(),g.m(b,z)):g&&(g.d(1),g=null),i[5]?k||(k=Ee(),k.c(),k.m(T,B)):k&&(k.d(1),k=null),p&8&&_e(q,i[3]),p&32&&(P.disabled=i[5]),p&64&&Y!==(Y=i[6]?"Dropping…":"Drop table")&&Q(Z,Y),p&64&&(L.disabled=i[6]),i[7]?w?w.p(i,p):(w=ye(i),w.c(),w.m(N,x)):w&&(w.d(1),w=null),i[8]?E?E.p(i,p):(E=ke(i),E.c(),E.m(N,null)):E&&(E.d(1),E=null)},i:ve,o:ve,d(i){i&&c(t),g&&g.d(),k&&k.d(),w&&w.d(),E&&E.d(),fe=!1,Ie(ue)}}}function Ne(a,t,e){let{vscode:s}=t,{initialState:l}=t,n="",h="",r=!1,_="",S=[],M=!1,j=!1,b="",C="";function I(){if(!s)throw new Error("VS Code API unavailable.");return s}function J(v){e(0,n=v.schemaName),e(1,h=v.tableName),e(2,r=v.defaultCascade??!1),e(3,_=v.sql??""),v.sql,e(4,S=v.warnings??[]),e(6,j=!1),e(7,b=""),e(8,C="")}l&&typeof l=="object"&&J(l);function V(){return{schemaName:n,tableName:h,cascade:r}}function F(){e(5,M=!0),e(4,S=[]),I().postMessage({command:"dropTablePreview",payload:V()})}function W(v){const y=v.currentTarget;e(2,r=!!(y!=null&&y.checked)),F()}function z(){e(6,j=!0),e(7,b=""),e(8,C=""),I().postMessage({command:"dropTableExecute",payload:{...V(),sql:_}})}function T(v){const y=v.data;if(!(!y||typeof y!="object"))switch(y.command){case"dropTablePreview":{const B=y.payload;B.sql,e(3,_=B.sql),e(4,S=B.warnings??[]),e(5,M=!1);break}case"dropTableExecuteComplete":e(6,j=!1),y.success?(e(7,b="Table dropped successfully."),e(8,C="")):(e(8,C=y.error?String(y.error):"Failed to drop table."),e(7,b=""));break}}qe(()=>(F(),window.addEventListener("message",T),()=>window.removeEventListener("message",T)));function R(){_=this.value,e(3,_)}return a.$$set=v=>{"vscode"in v&&e(12,s=v.vscode),"initialState"in v&&e(13,l=v.initialState)},[n,h,r,_,S,M,j,b,C,F,W,z,s,l,R]}class Ve extends Se{constructor(t){super(),De(this,t,Ne,Le,Ae,{vscode:12,initialState:13})}}const Ce=document.getElementById("app");if(!Ce)throw new Error("Failed to locate webview root element.");const Me=window.acquireVsCodeApi?window.acquireVsCodeApi():void 0,Te=window.initialState??{};Te.view!=="dropTable"&&console.warn("Unexpected initial state payload for drop table flow.",window.initialState);new Ve({target:Ce,hydrate:!0,props:{vscode:Me,initialState:Te}});
