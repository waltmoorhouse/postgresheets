import{S as Ie,i as ye,s as Ee,n as Z,d as _,c as M,f as C,g,h as T,o as m,u as Ve,m as H,r as $,e as d,l as J,j as O,p as S,b as A,k as P,t as B,P as ae,K as le,v as ne,H as oe}from"../chunks/index.js";import{e as W,u as K,d as Y}from"../chunks/each.js";function re(c,e,t){const a=c.slice();return a[32]=e[t],a}function ie(c,e,t){const a=c.slice();return a[35]=e[t],a[37]=t,a}function ce(c,e,t){const a=c.slice();return a[32]=e[t],a}function ue(c,e,t){const a=c.slice();return a[28]=e[t],a}function he(c,e,t){const a=c.slice();return a[28]=e[t],a}function de(c,e,t){const a=c.slice();return a[26]=e[t],a[28]=t,a}function fe(c,e,t){const a=c.slice();return a[29]=e[t],a}function De(c){let e,t,a="✗ Import Failed",o,l,u,n,s,r="Close",f,h;return{c(){e=m("div"),t=m("h2"),t.textContent=a,o=S(),l=m("p"),u=B(c[9]),n=S(),s=m("button"),s.textContent=r,this.h()},l(i){e=g(i,"DIV",{class:!0});var p=T(e);t=g(p,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1kttko3"&&(t.textContent=a),o=O(p),l=g(p,"P",{class:!0});var V=T(l);u=P(V,c[9]),V.forEach(_),n=O(p),s=g(p,"BUTTON",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-1ddmbzl"&&(s.textContent=r),p.forEach(_),this.h()},h(){C(t,"class","svelte-ga5d0s"),C(l,"class","svelte-ga5d0s"),C(s,"class","btn svelte-ga5d0s"),C(e,"class","step-container error svelte-ga5d0s")},m(i,p){M(i,e,p),d(e,t),d(e,o),d(e,l),d(l,u),d(e,n),d(e,s),f||(h=J(s,"click",c[16]),f=!0)},p(i,p){p[0]&512&&A(u,i[9])},d(i){i&&_(e),f=!1,h()}}}function Te(c){let e,t,a="✓ Import Successful!",o,l,u;return{c(){e=m("div"),t=m("h2"),t.textContent=a,o=S(),l=m("p"),u=B(c[8]),this.h()},l(n){e=g(n,"DIV",{class:!0});var s=T(e);t=g(s,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-sb8z5l"&&(t.textContent=a),o=O(s),l=g(s,"P",{class:!0});var r=T(l);u=P(r,c[8]),r.forEach(_),s.forEach(_),this.h()},h(){C(t,"class","svelte-ga5d0s"),C(l,"class","svelte-ga5d0s"),C(e,"class","step-container success svelte-ga5d0s")},m(n,s){M(n,e,s),d(e,t),d(e,o),d(e,l),d(l,u)},p(n,s){s[0]&256&&A(u,n[8])},d(n){n&&_(e)}}}function Me(c){let e,t='<h2 class="svelte-ga5d0s">Importing Data...</h2> <div class="spinner svelte-ga5d0s"></div> <p class="svelte-ga5d0s">Processing your data, please wait...</p>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(a){e=g(a,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-8fwbgh"&&(e.innerHTML=t),this.h()},h(){C(e,"class","step-container svelte-ga5d0s")},m(a,o){M(a,e,o)},p:Z,d(a){a&&_(e)}}}function Oe(c){let e,t,a="Preview Import",o,l,u,n=c[6].length+"",s,r,f,h,i,p=[],V=new Map,z,E=[],N=new Map,b,w=W(Object.keys(c[4]).filter(c[19]));const D=v=>v[28];for(let v=0;v<w.length;v+=1){let I=he(c,w,v),y=D(I);V.set(y,p[v]=ve(y,I))}let j=W(c[6]);const G=v=>v[37];for(let v=0;v<j.length;v+=1){let I=ie(c,j,v),y=G(I);N.set(y,E[v]=me(y,I))}function F(v,I){return v[7].length>0?ze:Ne}let R=F(c),k=R(c);return{c(){e=m("div"),t=m("h2"),t.textContent=a,o=S(),l=m("p"),u=B("Review how your data will be imported (showing first "),s=B(n),r=B(" rows):"),f=S(),h=m("div"),i=m("div");for(let v=0;v<p.length;v+=1)p[v].c();z=S();for(let v=0;v<E.length;v+=1)E[v].c();b=S(),k.c(),this.h()},l(v){e=g(v,"DIV",{class:!0});var I=T(e);t=g(I,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-b9epjz"&&(t.textContent=a),o=O(I),l=g(I,"P",{class:!0});var y=T(l);u=P(y,"Review how your data will be imported (showing first "),s=P(y,n),r=P(y," rows):"),y.forEach(_),f=O(I),h=g(I,"DIV",{class:!0});var L=T(h);i=g(L,"DIV",{class:!0});var U=T(i);for(let q=0;q<p.length;q+=1)p[q].l(U);U.forEach(_),z=O(L);for(let q=0;q<E.length;q+=1)E[q].l(L);L.forEach(_),b=O(I),k.l(I),I.forEach(_),this.h()},h(){C(t,"class","svelte-ga5d0s"),C(l,"class","svelte-ga5d0s"),C(i,"class","preview-header svelte-ga5d0s"),C(h,"class","preview-table svelte-ga5d0s"),C(e,"class","step-container svelte-ga5d0s")},m(v,I){M(v,e,I),d(e,t),d(e,o),d(e,l),d(l,u),d(l,s),d(l,r),d(e,f),d(e,h),d(h,i);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(i,null);d(h,z);for(let y=0;y<E.length;y+=1)E[y]&&E[y].m(h,null);d(e,b),k.m(e,null)},p(v,I){I[0]&64&&n!==(n=v[6].length+"")&&A(s,n),I[0]&16&&(w=W(Object.keys(v[4]).filter(v[19])),p=K(p,I,D,1,v,w,V,i,Y,ve,null,he)),I[0]&80&&(j=W(v[6]),E=K(E,I,G,1,v,j,N,h,Y,me,null,ie)),R===(R=F(v))&&k?k.p(v,I):(k.d(1),k=R(v),k&&(k.c(),k.m(e,null)))},d(v){v&&_(e);for(let I=0;I<p.length;I+=1)p[I].d();for(let I=0;I<E.length;I+=1)E[I].d();k.d()}}}function Se(c){let e,t,a="Map CSV Columns",o,l,u="Match CSV columns to database columns:",n,s,r,f='<div class="col-csv svelte-ga5d0s">CSV Column</div> <div class="col-arrow svelte-ga5d0s">→</div> <div class="col-table svelte-ga5d0s">Database Column</div>',h,i=[],p=new Map,V,z,E,N="Preview Data",b,w,D="Cancel",j,G,F=W(c[1][0]||[]);const R=k=>k[28];for(let k=0;k<F.length;k+=1){let v=de(c,F,k),I=R(v);p.set(I,i[k]=Ce(I,v))}return{c(){e=m("div"),t=m("h2"),t.textContent=a,o=S(),l=m("p"),l.textContent=u,n=S(),s=m("div"),r=m("div"),r.innerHTML=f,h=S();for(let k=0;k<i.length;k+=1)i[k].c();V=S(),z=m("div"),E=m("button"),E.textContent=N,b=S(),w=m("button"),w.textContent=D,this.h()},l(k){e=g(k,"DIV",{class:!0});var v=T(e);t=g(v,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-6iaipt"&&(t.textContent=a),o=O(v),l=g(v,"P",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-66dwtd"&&(l.textContent=u),n=O(v),s=g(v,"DIV",{class:!0});var I=T(s);r=g(I,"DIV",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-105pwbh"&&(r.innerHTML=f),h=O(I);for(let L=0;L<i.length;L+=1)i[L].l(I);I.forEach(_),V=O(v),z=g(v,"DIV",{class:!0});var y=T(z);E=g(y,"BUTTON",{class:!0,"data-svelte-h":!0}),H(E)!=="svelte-1gmcn15"&&(E.textContent=N),b=O(y),w=g(y,"BUTTON",{class:!0,"data-svelte-h":!0}),H(w)!=="svelte-19u663z"&&(w.textContent=D),y.forEach(_),v.forEach(_),this.h()},h(){C(t,"class","svelte-ga5d0s"),C(l,"class","svelte-ga5d0s"),C(r,"class","mapping-header svelte-ga5d0s"),C(s,"class","mapping-table svelte-ga5d0s"),C(E,"class","btn btn-primary svelte-ga5d0s"),C(w,"class","btn svelte-ga5d0s"),C(z,"class","button-group svelte-ga5d0s"),C(e,"class","step-container svelte-ga5d0s")},m(k,v){M(k,e,v),d(e,t),d(e,o),d(e,l),d(e,n),d(e,s),d(s,r),d(s,h);for(let I=0;I<i.length;I+=1)i[I]&&i[I].m(s,null);d(e,V),d(e,z),d(z,E),d(z,b),d(z,w),j||(G=[J(E,"click",c[13]),J(w,"click",c[16])],j=!0)},p(k,v){v[0]&4158&&(F=W(k[1][0]||[]),i=K(i,v,R,1,k,F,p,s,Y,Ce,null,de))},d(k){k&&_(e);for(let v=0;v<i.length;v+=1)i[v].d();j=!1,$(G)}}}function Re(c){let e,t,a="CSV Format",o,l,u="Does your CSV file have headers in the first row?",n,s,r,f="✓ Yes, first row is headers",h,i,p="✗ No, first row is data",V,z;return{c(){e=m("div"),t=m("h2"),t.textContent=a,o=S(),l=m("p"),l.textContent=u,n=S(),s=m("div"),r=m("button"),r.textContent=f,h=S(),i=m("button"),i.textContent=p,this.h()},l(E){e=g(E,"DIV",{class:!0});var N=T(e);t=g(N,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-7r53i5"&&(t.textContent=a),o=O(N),l=g(N,"P",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-14mgjbt"&&(l.textContent=u),n=O(N),s=g(N,"DIV",{class:!0});var b=T(s);r=g(b,"BUTTON",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-1q0unqw"&&(r.textContent=f),h=O(b),i=g(b,"BUTTON",{class:!0,"data-svelte-h":!0}),H(i)!=="svelte-1vwelsr"&&(i.textContent=p),b.forEach(_),N.forEach(_),this.h()},h(){C(t,"class","svelte-ga5d0s"),C(l,"class","svelte-ga5d0s"),C(r,"class","btn btn-primary svelte-ga5d0s"),C(i,"class","btn svelte-ga5d0s"),C(s,"class","button-group svelte-ga5d0s"),C(e,"class","step-container svelte-ga5d0s")},m(E,N){M(E,e,N),d(e,t),d(e,o),d(e,l),d(e,n),d(e,s),d(s,r),d(s,h),d(s,i),V||(z=[J(r,"click",c[17]),J(i,"click",c[10])],V=!0)},p:Z,d(E){E&&_(e),V=!1,$(z)}}}function Le(c){let e,t='<h2 class="svelte-ga5d0s">Loading CSV Import Wizard...</h2> <p class="svelte-ga5d0s">Please wait...</p>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(a){e=g(a,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1oy372a"&&(e.innerHTML=t),this.h()},h(){C(e,"class","step-container svelte-ga5d0s")},m(a,o){M(a,e,o)},p:Z,d(a){a&&_(e)}}}function ve(c,e){let t,a,o=e[4][parseInt(e[28])]+"",l,u;return{key:c,first:null,c(){t=m("div"),a=m("strong"),l=B(o),u=S(),this.h()},l(n){t=g(n,"DIV",{class:!0});var s=T(t);a=g(s,"STRONG",{});var r=T(a);l=P(r,o),r.forEach(_),u=O(s),s.forEach(_),this.h()},h(){C(t,"class","preview-col svelte-ga5d0s"),this.first=t},m(n,s){M(n,t,s),d(t,a),d(a,l),d(t,u)},p(n,s){e=n,s[0]&16&&o!==(o=e[4][parseInt(e[28])]+"")&&A(l,o)},d(n){n&&_(t)}}}function _e(c,e){let t,a,o=JSON.stringify(e[35].mappedValues[e[4][parseInt(e[28])]]??"")+"",l,u;return{key:c,first:null,c(){t=m("div"),a=m("code"),l=B(o),u=S(),this.h()},l(n){t=g(n,"DIV",{class:!0});var s=T(t);a=g(s,"CODE",{class:!0});var r=T(a);l=P(r,o),r.forEach(_),u=O(s),s.forEach(_),this.h()},h(){C(a,"class","svelte-ga5d0s"),C(t,"class","preview-col svelte-ga5d0s"),this.first=t},m(n,s){M(n,t,s),d(t,a),d(a,l),d(t,u)},p(n,s){e=n,s[0]&80&&o!==(o=JSON.stringify(e[35].mappedValues[e[4][parseInt(e[28])]]??"")+"")&&A(l,o)},d(n){n&&_(t)}}}function pe(c){let e,t=[],a=new Map,o,l=W(c[35].errors);const u=n=>n[32];for(let n=0;n<l.length;n+=1){let s=ce(c,l,n),r=u(s);a.set(r,t[n]=ge(r,s))}return{c(){e=m("div");for(let n=0;n<t.length;n+=1)t[n].c();o=S(),this.h()},l(n){e=g(n,"DIV",{class:!0});var s=T(e);for(let r=0;r<t.length;r+=1)t[r].l(s);o=O(s),s.forEach(_),this.h()},h(){C(e,"class","preview-errors svelte-ga5d0s")},m(n,s){M(n,e,s);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);d(e,o)},p(n,s){s[0]&64&&(l=W(n[35].errors),t=K(t,s,u,1,n,l,a,e,Y,ge,o,ce))},d(n){n&&_(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function ge(c,e){let t,a,o=e[32]+"",l;return{key:c,first:null,c(){t=m("div"),a=B("⚠ "),l=B(o),this.h()},l(u){t=g(u,"DIV",{class:!0});var n=T(t);a=P(n,"⚠ "),l=P(n,o),n.forEach(_),this.h()},h(){C(t,"class","error svelte-ga5d0s"),this.first=t},m(u,n){M(u,t,n),d(t,a),d(t,l)},p(u,n){e=u,n[0]&64&&o!==(o=e[32]+"")&&A(l,o)},d(u){u&&_(t)}}}function me(c,e){let t,a=[],o=new Map,l,u,n=W(Object.keys(e[4]).filter(e[20]));const s=f=>f[28];for(let f=0;f<n.length;f+=1){let h=ue(e,n,f),i=s(h);o.set(i,a[f]=_e(i,h))}let r=e[35].errors.length>0&&pe(e);return{key:c,first:null,c(){t=m("div");for(let f=0;f<a.length;f+=1)a[f].c();l=S(),r&&r.c(),u=oe(),this.h()},l(f){t=g(f,"DIV",{class:!0});var h=T(t);for(let i=0;i<a.length;i+=1)a[i].l(h);h.forEach(_),l=O(f),r&&r.l(f),u=oe(),this.h()},h(){C(t,"class","preview-row svelte-ga5d0s"),ne(t,"has-errors",e[35].errors.length>0),this.first=t},m(f,h){M(f,t,h);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(t,null);M(f,l,h),r&&r.m(f,h),M(f,u,h)},p(f,h){e=f,h[0]&80&&(n=W(Object.keys(e[4]).filter(e[20])),a=K(a,h,s,1,e,n,o,t,Y,_e,null,ue)),h[0]&64&&ne(t,"has-errors",e[35].errors.length>0),e[35].errors.length>0?r?r.p(e,h):(r=pe(e),r.c(),r.m(u.parentNode,u)):r&&(r.d(1),r=null)},d(f){f&&(_(t),_(l),_(u));for(let h=0;h<a.length;h+=1)a[h].d();r&&r.d(f)}}}function Ne(c){let e,t="✓ Preview looks good! Ready to import.",a,o,l,u="← Back to Mapping",n,s,r,f=c[1].length-(c[5]?1:0)+"",h,i,p,V,z="Cancel",E,N;return{c(){e=m("p"),e.textContent=t,a=S(),o=m("div"),l=m("button"),l.textContent=u,n=S(),s=m("button"),r=B("Import "),h=B(f),i=B(" Rows"),p=S(),V=m("button"),V.textContent=z,this.h()},l(b){e=g(b,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1bm3v4y"&&(e.textContent=t),a=O(b),o=g(b,"DIV",{class:!0});var w=T(o);l=g(w,"BUTTON",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-se374h"&&(l.textContent=u),n=O(w),s=g(w,"BUTTON",{class:!0});var D=T(s);r=P(D,"Import "),h=P(D,f),i=P(D," Rows"),D.forEach(_),p=O(w),V=g(w,"BUTTON",{class:!0,"data-svelte-h":!0}),H(V)!=="svelte-19u663z"&&(V.textContent=z),w.forEach(_),this.h()},h(){C(e,"class","success-text svelte-ga5d0s"),C(l,"class","btn svelte-ga5d0s"),C(s,"class","btn btn-primary svelte-ga5d0s"),C(V,"class","btn svelte-ga5d0s"),C(o,"class","button-group svelte-ga5d0s")},m(b,w){M(b,e,w),M(b,a,w),M(b,o,w),d(o,l),d(o,n),d(o,s),d(s,r),d(s,h),d(s,i),d(o,p),d(o,V),E||(N=[J(l,"click",c[15]),J(s,"click",c[14]),J(V,"click",c[16])],E=!0)},p(b,w){w[0]&34&&f!==(f=b[1].length-(b[5]?1:0)+"")&&A(h,f)},d(b){b&&(_(e),_(a),_(o)),E=!1,$(N)}}}function ze(c){let e,t,a="Validation Issues:",o,l=[],u=new Map,n,s,r,f="← Back to Mapping",h,i,p="Cancel",V,z,E=W(c[7]);const N=b=>b[32];for(let b=0;b<E.length;b+=1){let w=re(c,E,b),D=N(w);u.set(D,l[b]=be(D,w))}return{c(){e=m("div"),t=m("h3"),t.textContent=a,o=S();for(let b=0;b<l.length;b+=1)l[b].c();n=S(),s=m("div"),r=m("button"),r.textContent=f,h=S(),i=m("button"),i.textContent=p,this.h()},l(b){e=g(b,"DIV",{class:!0});var w=T(e);t=g(w,"H3",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1dp9a01"&&(t.textContent=a),o=O(w);for(let j=0;j<l.length;j+=1)l[j].l(w);w.forEach(_),n=O(b),s=g(b,"DIV",{class:!0});var D=T(s);r=g(D,"BUTTON",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-se374h"&&(r.textContent=f),h=O(D),i=g(D,"BUTTON",{class:!0,"data-svelte-h":!0}),H(i)!=="svelte-19u663z"&&(i.textContent=p),D.forEach(_),this.h()},h(){C(t,"class","svelte-ga5d0s"),C(e,"class","validation-errors svelte-ga5d0s"),C(r,"class","btn svelte-ga5d0s"),C(i,"class","btn svelte-ga5d0s"),C(s,"class","button-group svelte-ga5d0s")},m(b,w){M(b,e,w),d(e,t),d(e,o);for(let D=0;D<l.length;D+=1)l[D]&&l[D].m(e,null);M(b,n,w),M(b,s,w),d(s,r),d(s,h),d(s,i),V||(z=[J(r,"click",c[15]),J(i,"click",c[16])],V=!0)},p(b,w){w[0]&128&&(E=W(b[7]),l=K(l,w,N,1,b,E,u,e,Y,be,null,re))},d(b){b&&(_(e),_(n),_(s));for(let w=0;w<l.length;w+=1)l[w].d();V=!1,$(z)}}}function be(c,e){let t,a,o=e[32]+"",l;return{key:c,first:null,c(){t=m("div"),a=B("• "),l=B(o),this.h()},l(u){t=g(u,"DIV",{class:!0});var n=T(t);a=P(n,"• "),l=P(n,o),n.forEach(_),this.h()},h(){C(t,"class","error-item svelte-ga5d0s"),this.first=t},m(u,n){M(u,t,n),d(t,a),d(t,l)},p(u,n){e=u,n[0]&128&&o!==(o=e[32]+"")&&A(l,o)},d(u){u&&_(t)}}}function He(c){var h;let e,t,a=c[28]+1+"",o,l,u,n,s,r=(((h=c[1][c[28]])==null?void 0:h[c[28]])||"(no preview)")+"",f;return{c(){e=m("small"),t=B("Col "),o=B(a),l=S(),u=m("br"),n=S(),s=m("small"),f=B(r),this.h()},l(i){e=g(i,"SMALL",{class:!0});var p=T(e);t=P(p,"Col "),o=P(p,a),p.forEach(_),l=O(i),u=g(i,"BR",{}),n=O(i),s=g(i,"SMALL",{class:!0});var V=T(s);f=P(V,r),V.forEach(_),this.h()},h(){C(e,"class","svelte-ga5d0s"),C(s,"class","svelte-ga5d0s")},m(i,p){M(i,e,p),d(e,t),d(e,o),M(i,l,p),M(i,u,p),M(i,n,p),M(i,s,p),d(s,f)},p(i,p){var V;p[0]&2&&a!==(a=i[28]+1+"")&&A(o,a),p[0]&2&&r!==(r=(((V=i[1][i[28]])==null?void 0:V[i[28]])||"(no preview)")+"")&&A(f,r)},d(i){i&&(_(e),_(l),_(u),_(n),_(s))}}}function Pe(c){var f;let e,t=(c[3][c[28]]||`Column ${c[28]+1}`)+"",a,o,l,u,n,s=(((f=c[1][1])==null?void 0:f[c[28]])||"(no preview)")+"",r;return{c(){e=m("strong"),a=B(t),o=S(),l=m("br"),u=S(),n=m("small"),r=B(s),this.h()},l(h){e=g(h,"STRONG",{});var i=T(e);a=P(i,t),i.forEach(_),o=O(h),l=g(h,"BR",{}),u=O(h),n=g(h,"SMALL",{class:!0});var p=T(n);r=P(p,s),p.forEach(_),this.h()},h(){C(n,"class","svelte-ga5d0s")},m(h,i){M(h,e,i),d(e,a),M(h,o,i),M(h,l,i),M(h,u,i),M(h,n,i),d(n,r)},p(h,i){var p;i[0]&10&&t!==(t=(h[3][h[28]]||`Column ${h[28]+1}`)+"")&&A(a,t),i[0]&2&&s!==(s=(((p=h[1][1])==null?void 0:p[h[28]])||"(no preview)")+"")&&A(r,s)},d(h){h&&(_(e),_(o),_(l),_(u),_(n))}}}function ke(c,e){let t,a=e[29].name+"",o,l,u=e[29].type+"",n,s,r;return{key:c,first:null,c(){t=m("option"),o=B(a),l=B(" ("),n=B(u),s=B(")"),this.h()},l(f){t=g(f,"OPTION",{});var h=T(t);o=P(h,a),l=P(h," ("),n=P(h,u),s=P(h,")"),h.forEach(_),this.h()},h(){t.__value=r=e[29].name,le(t,t.__value),this.first=t},m(f,h){M(f,t,h),d(t,o),d(t,l),d(t,n),d(t,s)},p(f,h){e=f,h[0]&4&&a!==(a=e[29].name+"")&&A(o,a),h[0]&4&&u!==(u=e[29].type+"")&&A(n,u),h[0]&4&&r!==(r=e[29].name)&&(t.__value=r,le(t,t.__value))},d(f){f&&_(t)}}}function Ce(c,e){let t,a,o,l,u="→",n,s,r,f,h="-- Skip column --",i=[],p=new Map,V,z,E,N;function b(R,k){return R[5]?Pe:He}let w=b(e),D=w(e),j=W(e[2]);const G=R=>R[29].name;for(let R=0;R<j.length;R+=1){let k=fe(e,j,R),v=G(k);p.set(v,i[R]=ke(v,k))}function F(...R){return e[18](e[28],...R)}return{key:c,first:null,c(){t=m("div"),a=m("div"),D.c(),o=S(),l=m("div"),l.textContent=u,n=S(),s=m("div"),r=m("select"),f=m("option"),f.textContent=h;for(let R=0;R<i.length;R+=1)i[R].c();z=S(),this.h()},l(R){t=g(R,"DIV",{class:!0});var k=T(t);a=g(k,"DIV",{class:!0});var v=T(a);D.l(v),v.forEach(_),o=O(k),l=g(k,"DIV",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-1b6fxj"&&(l.textContent=u),n=O(k),s=g(k,"DIV",{class:!0});var I=T(s);r=g(I,"SELECT",{class:!0});var y=T(r);f=g(y,"OPTION",{"data-svelte-h":!0}),H(f)!=="svelte-1l0ixlx"&&(f.textContent=h);for(let L=0;L<i.length;L+=1)i[L].l(y);y.forEach(_),I.forEach(_),z=O(k),k.forEach(_),this.h()},h(){C(a,"class","col-csv svelte-ga5d0s"),C(l,"class","col-arrow svelte-ga5d0s"),f.__value="",le(f,f.__value),C(r,"class","svelte-ga5d0s"),C(s,"class","col-table svelte-ga5d0s"),C(t,"class","mapping-row svelte-ga5d0s"),this.first=t},m(R,k){M(R,t,k),d(t,a),D.m(a,null),d(t,o),d(t,l),d(t,n),d(t,s),d(s,r),d(r,f);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(r,null);ae(r,e[4][e[28]]||""),d(t,z),E||(N=J(r,"change",F),E=!0)},p(R,k){e=R,w===(w=b(e))&&D?D.p(e,k):(D.d(1),D=w(e),D&&(D.c(),D.m(a,null))),k[0]&4&&(j=W(e[2]),i=K(i,k,G,1,e,j,p,r,Y,ke,null,fe)),k[0]&22&&V!==(V=e[4][e[28]]||"")&&ae(r,e[4][e[28]]||"")},d(R){R&&_(t),D.d();for(let k=0;k<i.length;k+=1)i[k].d();E=!1,N()}}}function Be(c){let e;function t(l,u){if(l[0]==="loading")return Le;if(l[0]==="headers")return Re;if(l[0]==="mapping")return Se;if(l[0]==="preview")return Oe;if(l[0]==="validating")return Me;if(l[0]==="success")return Te;if(l[0]==="error")return De}let a=t(c),o=a&&a(c);return{c(){e=m("div"),o&&o.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var u=T(e);o&&o.l(u),u.forEach(_),this.h()},h(){C(e,"class","csv-import-wizard svelte-ga5d0s")},m(l,u){M(l,e,u),o&&o.m(e,null)},p(l,u){a===(a=t(l))&&o?o.p(l,u):(o&&o.d(1),o=a&&a(l),o&&(o.c(),o.m(e,null)))},i:Z,o:Z,d(l){l&&_(e),o&&o.d()}}}function je(c,e){if(!c||c.trim()==="")return null;switch(e.toLowerCase().split("(")[0].replace("[]","")){case"boolean":case"bool":return c.toLowerCase()==="true"||c==="1"||c.toLowerCase()==="yes";case"integer":case"int":case"int2":case"int4":case"int8":case"smallint":case"bigint":return parseInt(c,10);case"numeric":case"decimal":case"real":case"double":case"float":case"float4":case"float8":return parseFloat(c);case"json":case"jsonb":return JSON.parse(c);case"date":return new Date(c).toISOString().split("T")[0];case"timestamp":case"timestamptz":case"timestamp without time zone":case"timestamp with time zone":return new Date(c).toISOString();case"uuid":return c.trim();default:return c}}function Ue(c,e,t){let a,o="loading",l=[],u=[],n=[],s={},r=!0,f=[],h=[],i="",p="";Ve(async()=>{a=acquireVsCodeApi==null?void 0:acquireVsCodeApi(),window.addEventListener("message",y=>{const L=y.data;switch(L.command){case"initializeWizard":V(L);break;case"validationResults":z(L);break;case"importSuccess":t(0,o="success"),t(8,i=L.message),setTimeout(()=>{a.postMessage({command:"closeWizard"})},2e3);break;case"importError":t(0,o="error"),t(9,p=L.message);break}}),a.postMessage({command:"getInitialData"})});function V(y){if(t(1,l=y.csvData),t(2,u=y.tableColumns),y.tableName,l.length>0){const L=l[0];let U=!0;for(const q of L)if(/^\d+$/.test(q.trim())){U=!1;break}U?(t(3,n=L),t(0,o="headers")):(t(5,r=!1),N(),t(0,o="mapping"))}}function z(y){t(7,h=y.errors),t(0,o="preview")}function E(){t(5,r=!r),r&&l.length>0&&t(3,n=l[0]),N()}function N(){t(4,s={});const L=l[r?1:0]||[];if(r&&n.length>0)for(let U=0;U<n.length;U++){const q=n[U].trim().toLowerCase(),Q=u.find(x=>x.name.toLowerCase()===q);Q&&t(4,s[U]=Q.name,s)}else for(let U=0;U<Math.min(L.length,u.length);U++)t(4,s[U]=u[U].name,s)}function b(y,L){t(4,s[y]=L,s)}function w(){t(6,f=[]);const y=r?1:0,L=Math.min(5,l.length-y);for(let U=0;U<L;U++){const q=l[y+U],Q={},x=[];for(const[we,X]of Object.entries(s)){const ee=parseInt(we);if(X&&ee<q.length){const te=u.find(se=>se.name===X);if(te)try{Q[X]=je(q[ee],te.type)}catch{x.push(`${X}: Invalid ${te.type}`),Q[X]=q[ee]}}}f.push({csvValues:q,mappedValues:Q,errors:x})}t(0,o="preview"),D()}function D(){a.postMessage({command:"validatePreview",mapping:s,firstRowIsHeaders:r,previewRows:f,totalDataRows:l.length-(r?1:0)})}function j(){h.length===0&&(t(0,o="validating"),a.postMessage({command:"executeImport",mapping:s,firstRowIsHeaders:r,totalRows:l.length-(r?1:0)}))}function G(){t(7,h=[]),t(0,o="mapping")}function F(){a.postMessage({command:"closeWizard"})}return[o,l,u,n,s,r,f,h,i,p,E,N,b,w,j,G,F,()=>{t(5,r=!0),N(),t(0,o="mapping")},(y,L)=>b(y,L.target.value||null),y=>s[parseInt(y)]!==null,y=>s[parseInt(y)]!==null]}class qe extends Ie{constructor(e){super(),ye(this,e,Ue,Be,Ee,{},null,[-1,-1])}}new qe({target:document.getElementById("app")});
