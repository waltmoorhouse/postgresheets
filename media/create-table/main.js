/* empty css           */import{S as Ht,i as Bt,s as Kt,n as tt,d,r as Mt,b as ge,c as F,e as a,l as fe,f as i,g as h,h as v,k as re,j as T,m as me,o as b,t as oe,p as w,u as Rt,a as Je,H as ht,K as Xe,v as bt,P as dt,U as _t}from"../chunks/index.js";import{g as jt,c as pt}from"../chunks/clsx.js";import{e as Ce,u as Qt,d as zt}from"../chunks/each.js";const{Map:Ft}=jt;function vt(o,e,t){const l=o.slice();return l[46]=e[t],l}function mt(o,e,t){const l=o.slice();return l[49]=e[t],l}function gt(o,e,t){const l=o.slice();return l[52]=e[t],l}function yt(o,e,t){const l=o.slice();return l[55]=e[t],l}function qt(o,e,t){const l=o.slice();return l[55]=e[t],l}function kt(o){let e,t="Draft";return{c(){e=b("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),me(e)!=="svelte-rp3ttq"&&(e.textContent=t),this.h()},h(){i(e,"class","designer-header__badge svelte-1bsbq5b"),i(e,"title","Unsaved changes")},m(l,s){F(l,e,s)},d(l){l&&d(e)}}}function Et(o){let e,t,l="Fix before creating",s,c,n=Ce(o[13]),u=[];for(let p=0;p<n.length;p+=1)u[p]=Ct(qt(o,n,p));return{c(){e=b("section"),t=b("h3"),t.textContent=l,s=w(),c=b("ul");for(let p=0;p<u.length;p+=1)u[p].c();this.h()},l(p){e=h(p,"SECTION",{class:!0});var k=v(e);t=h(k,"H3",{"data-svelte-h":!0}),me(t)!=="svelte-846a7t"&&(t.textContent=l),s=T(k),c=h(k,"UL",{});var E=v(c);for(let S=0;S<u.length;S+=1)u[S].l(E);E.forEach(d),k.forEach(d),this.h()},h(){i(e,"class","designer-alert designer-alert--error svelte-1bsbq5b")},m(p,k){F(p,e,k),a(e,t),a(e,s),a(e,c);for(let E=0;E<u.length;E+=1)u[E]&&u[E].m(c,null)},p(p,k){if(k[0]&8192){n=Ce(p[13]);let E;for(E=0;E<n.length;E+=1){const S=qt(p,n,E);u[E]?u[E].p(S,k):(u[E]=Ct(S),u[E].c(),u[E].m(c,null))}for(;E<u.length;E+=1)u[E].d(1);u.length=n.length}},d(p){p&&d(e),Je(u,p)}}}function Ct(o){let e,t=o[55]+"",l;return{c(){e=b("li"),l=oe(t)},l(s){e=h(s,"LI",{});var c=v(e);l=re(c,t),c.forEach(d)},m(s,c){F(s,e,c),a(e,l)},p(s,c){c[0]&8192&&t!==(t=s[55]+"")&&ge(l,t)},d(s){s&&d(e)}}}function Wt(o){let e=[],t=new Ft,l,s=Ce(o[2]);const c=n=>n[49].id;for(let n=0;n<s.length;n+=1){let u=mt(o,s,n),p=c(u);t.set(p,e[n]=Dt(p,u))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();l=ht()},l(n){for(let u=0;u<e.length;u+=1)e[u].l(n);l=ht()},m(n,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(n,u);F(n,l,u)},p(n,u){u[0]&4161548&&(s=Ce(n[2]),e=Qt(e,u,c,1,n,s,t,l.parentNode,zt,Dt,l,mt))},d(n){n&&d(l);for(let u=0;u<e.length;u+=1)e[u].d(n)}}}function Yt(o){let e,t='<td colspan="7" class="empty svelte-1bsbq5b">No columns defined yet.</td>';return{c(){e=b("tr"),e.innerHTML=t},l(l){e=h(l,"TR",{"data-svelte-h":!0}),me(e)!=="svelte-1nc9uuq"&&(e.innerHTML=t)},m(l,s){F(l,e,s)},p:tt,d(l){l&&d(e)}}}function Tt(o){let e,t=Ce(o[49].errors),l=[];for(let s=0;s<t.length;s+=1)l[s]=wt(yt(o,t,s));return{c(){e=b("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=h(s,"UL",{class:!0});var c=v(e);for(let n=0;n<l.length;n+=1)l[n].l(c);c.forEach(d),this.h()},h(){i(e,"class","cell-errors svelte-1bsbq5b")},m(s,c){F(s,e,c);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(s,c){if(c[0]&4){t=Ce(s[49].errors);let n;for(n=0;n<t.length;n+=1){const u=yt(s,t,n);l[n]?l[n].p(u,c):(l[n]=wt(u),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(s){s&&d(e),Je(l,s)}}}function wt(o){let e,t=o[55]+"",l;return{c(){e=b("li"),l=oe(t)},l(s){e=h(s,"LI",{});var c=v(e);l=re(c,t),c.forEach(d)},m(s,c){F(s,e,c),a(e,l)},p(s,c){c[0]&4&&t!==(t=s[55]+"")&&ge(l,t)},d(s){s&&d(e)}}}function Pt(o){let e,t=o[52]+"",l,s;return{c(){e=b("option"),l=oe(t),this.h()},l(c){e=h(c,"OPTION",{});var n=v(e);l=re(n,t),n.forEach(d),this.h()},h(){e.__value=s=o[52],Xe(e,e.__value)},m(c,n){F(c,e,n),a(e,l)},p(c,n){n[0]&8&&t!==(t=c[52]+"")&&ge(l,t),n[0]&8&&s!==(s=c[52])&&(e.__value=s,Xe(e,e.__value))},d(c){c&&d(e)}}}function Dt(o,e){let t,l,s,c,n,u,p,k,E,S,N,M,O,x,K,H,V,I,ie,W,B,te,le,j,he,ce,L,Q,U,we="Remove",ye,R,qe,se;function Pe(...g){return e[27](e[49],...g)}let A=e[49].errors.length>0&&Tt(e),ne=Ce(e[3]),P=[];for(let g=0;g<ne.length;g+=1)P[g]=Pt(gt(e,ne,g));function ae(...g){return e[28](e[49],...g)}function ke(...g){return e[29](e[49],...g)}function ue(...g){return e[30](e[49],...g)}function be(...g){return e[31](e[49],...g)}function Ne(){return e[32](e[49])}function Se(){return e[33](e[49])}return{key:o,first:null,c(){t=b("tr"),l=b("td"),s=b("input"),n=w(),A&&A.c(),u=w(),p=b("td"),k=b("select");for(let g=0;g<P.length;g+=1)P[g].c();S=w(),N=b("td"),M=b("input"),x=w(),K=b("td"),H=b("input"),I=w(),ie=b("td"),W=b("input"),te=w(),le=b("td"),j=b("input"),ce=w(),L=b("td"),Q=b("div"),U=b("button"),U.textContent=we,ye=w(),this.h()},l(g){t=h(g,"TR",{class:!0});var y=v(t);l=h(y,"TD",{"data-label":!0,class:!0});var q=v(l);s=h(q,"INPUT",{type:!0,class:!0}),n=T(q),A&&A.l(q),q.forEach(d),u=T(y),p=h(y,"TD",{"data-label":!0,class:!0});var r=v(p);k=h(r,"SELECT",{class:!0});var f=v(k);for(let _e=0;_e<P.length;_e+=1)P[_e].l(f);f.forEach(d),r.forEach(d),S=T(y),N=h(y,"TD",{"data-label":!0,class:!0});var _=v(N);M=h(_,"INPUT",{type:!0,class:!0}),_.forEach(d),x=T(y),K=h(y,"TD",{"data-label":!0,class:!0});var C=v(K);H=h(C,"INPUT",{type:!0,placeholder:!0,class:!0}),C.forEach(d),I=T(y),ie=h(y,"TD",{"data-label":!0,class:!0});var z=v(ie);W=h(z,"INPUT",{type:!0,placeholder:!0,class:!0}),z.forEach(d),te=T(y),le=h(y,"TD",{"data-label":!0,class:!0});var Y=v(le);j=h(Y,"INPUT",{type:!0,class:!0}),Y.forEach(d),ce=T(y),L=h(y,"TD",{class:!0});var de=v(L);Q=h(de,"DIV",{class:!0});var Te=v(Q);U=h(Te,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),me(U)!=="svelte-19sf4ka"&&(U.textContent=we),Te.forEach(d),de.forEach(d),ye=T(y),y.forEach(d),this.h()},h(){i(s,"type","text"),s.value=c=e[49].name,i(s,"class","svelte-1bsbq5b"),bt(s,"has-error",e[49].errors.some(Vt)),i(l,"data-label","Column name"),i(l,"class","svelte-1bsbq5b"),i(k,"class","svelte-1bsbq5b"),i(p,"data-label","Type"),i(p,"class","svelte-1bsbq5b"),i(M,"type","checkbox"),M.checked=O=e[49].nullable,i(M,"class","svelte-1bsbq5b"),i(N,"data-label","Nullable"),i(N,"class","checkbox-cell svelte-1bsbq5b"),i(H,"type","text"),H.value=V=e[49].defaultValue??"",i(H,"placeholder","e.g. NOW()"),i(H,"class","svelte-1bsbq5b"),i(K,"data-label","Default"),i(K,"class","svelte-1bsbq5b"),i(W,"type","text"),W.value=B=e[49].comment??"",i(W,"placeholder","Column description"),i(W,"class","svelte-1bsbq5b"),i(ie,"data-label","Comment"),i(ie,"class","svelte-1bsbq5b"),i(j,"type","checkbox"),j.checked=he=e[49].isPrimaryKey,i(j,"class","svelte-1bsbq5b"),i(le,"data-label","Primary"),i(le,"class","checkbox-cell svelte-1bsbq5b"),i(U,"type","button"),i(U,"class","ps-btn ps-btn--ghost"),i(Q,"class","row-actions svelte-1bsbq5b"),i(L,"class","actions svelte-1bsbq5b"),i(t,"class",R=_t(pt({error:e[49].errors.length>0}))+" svelte-1bsbq5b"),this.first=t},m(g,y){F(g,t,y),a(t,l),a(l,s),a(l,n),A&&A.m(l,null),a(t,u),a(t,p),a(p,k);for(let q=0;q<P.length;q+=1)P[q]&&P[q].m(k,null);dt(k,e[49].type),a(t,S),a(t,N),a(N,M),a(t,x),a(t,K),a(K,H),a(t,I),a(t,ie),a(ie,W),a(t,te),a(t,le),a(le,j),a(t,ce),a(t,L),a(L,Q),a(Q,U),a(t,ye),qe||(se=[fe(s,"input",Pe),fe(k,"change",ae),fe(M,"change",ke),fe(H,"input",ue),fe(W,"input",be),fe(j,"change",Ne),fe(U,"click",Se)],qe=!0)},p(g,y){if(e=g,y[0]&12&&c!==(c=e[49].name)&&s.value!==c&&(s.value=c),y[0]&4&&bt(s,"has-error",e[49].errors.some(Vt)),e[49].errors.length>0?A?A.p(e,y):(A=Tt(e),A.c(),A.m(l,null)):A&&(A.d(1),A=null),y[0]&8){ne=Ce(e[3]);let q;for(q=0;q<ne.length;q+=1){const r=gt(e,ne,q);P[q]?P[q].p(r,y):(P[q]=Pt(r),P[q].c(),P[q].m(k,null))}for(;q<P.length;q+=1)P[q].d(1);P.length=ne.length}y[0]&12&&E!==(E=e[49].type)&&dt(k,e[49].type),y[0]&12&&O!==(O=e[49].nullable)&&(M.checked=O),y[0]&12&&V!==(V=e[49].defaultValue??"")&&H.value!==V&&(H.value=V),y[0]&12&&B!==(B=e[49].comment??"")&&W.value!==B&&(W.value=B),y[0]&12&&he!==(he=e[49].isPrimaryKey)&&(j.checked=he),y[0]&12&&R!==(R=_t(pt({error:e[49].errors.length>0}))+" svelte-1bsbq5b")&&i(t,"class",R)},d(g){g&&d(t),A&&A.d(),Je(P,g),qe=!1,Mt(se)}}}function St(o){let e,t="Generating preview…";return{c(){e=b("p"),e.textContent=t,this.h()},l(l){e=h(l,"P",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-3otbvi"&&(e.textContent=t),this.h()},h(){i(e,"class","preview-status svelte-1bsbq5b")},m(l,s){F(l,e,s)},d(l){l&&d(e)}}}function Nt(o){let e,t=Ce(o[5]),l=[];for(let s=0;s<t.length;s+=1)l[s]=It(vt(o,t,s));return{c(){e=b("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=h(s,"UL",{class:!0});var c=v(e);for(let n=0;n<l.length;n+=1)l[n].l(c);c.forEach(d),this.h()},h(){i(e,"class","designer-alert designer-alert--warning svelte-1bsbq5b")},m(s,c){F(s,e,c);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(s,c){if(c[0]&32){t=Ce(s[5]);let n;for(n=0;n<t.length;n+=1){const u=vt(s,t,n);l[n]?l[n].p(u,c):(l[n]=It(u),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(s){s&&d(e),Je(l,s)}}}function It(o){let e,t=o[46]+"",l;return{c(){e=b("li"),l=oe(t)},l(s){e=h(s,"LI",{});var c=v(e);l=re(c,t),c.forEach(d)},m(s,c){F(s,e,c),a(e,l)},p(s,c){c[0]&32&&t!==(t=s[46]+"")&&ge(l,t)},d(s){s&&d(e)}}}function Gt(o){let e,t;return{c(){e=b("pre"),t=oe(o[4]),this.h()},l(l){e=h(l,"PRE",{class:!0});var s=v(e);t=re(s,o[4]),s.forEach(d),this.h()},h(){i(e,"class","svelte-1bsbq5b")},m(l,s){F(l,e,s),a(e,t)},p(l,s){s[0]&16&&ge(t,l[4])},d(l){l&&d(e)}}}function Xt(o){let e,t,l;return{c(){e=b("textarea"),this.h()},l(s){e=h(s,"TEXTAREA",{spellcheck:!0,rows:!0,class:!0}),v(e).forEach(d),this.h()},h(){i(e,"spellcheck",!1),i(e,"rows","12"),i(e,"class","manual-editor svelte-1bsbq5b")},m(s,c){F(s,e,c),Xe(e,o[8]),t||(l=fe(e,"input",o[34]),t=!0)},p(s,c){c[0]&256&&Xe(e,s[8])},d(s){s&&d(e),t=!1,l()}}}function Lt(o){let e,t;return{c(){e=b("div"),t=oe(o[9]),this.h()},l(l){e=h(l,"DIV",{class:!0});var s=v(e);t=re(s,o[9]),s.forEach(d),this.h()},h(){i(e,"class","message success svelte-1bsbq5b")},m(l,s){F(l,e,s),a(e,t)},p(l,s){s[0]&512&&ge(t,l[9])},d(l){l&&d(e)}}}function At(o){let e,t;return{c(){e=b("div"),t=oe(o[10]),this.h()},l(l){e=h(l,"DIV",{class:!0});var s=v(e);t=re(s,o[10]),s.forEach(d),this.h()},h(){i(e,"class","message error svelte-1bsbq5b")},m(l,s){F(l,e,s),a(e,t)},p(l,s){s[0]&1024&&ge(t,l[10])},d(l){l&&d(e)}}}function Jt(o){let e,t,l,s,c,n,u,p=(o[1]||"new_table")+"",k,E,S,N,M,O=o[2].length+"",x,K,H,V,I,ie="Add column",W,B,te=o[11]?"Creating…":"Create table",le,j,he,ce,L,Q,U,we="Table name",ye,R,qe,se,Pe="<p>Define columns below. Primary key columns are required for the graphical editors.</p>",A,ne,P,ae,ke,ue,be,Ne='<tr><th scope="col" class="svelte-1bsbq5b">Column</th> <th scope="col" class="svelte-1bsbq5b">Type</th> <th scope="col" class="svelte-1bsbq5b">Nullable</th> <th scope="col" class="svelte-1bsbq5b">Default</th> <th scope="col" class="svelte-1bsbq5b">Comment</th> <th scope="col" class="svelte-1bsbq5b">Primary</th> <th scope="col" class="actions svelte-1bsbq5b">Actions</th></tr>',Se,g,y,q,r,f,_,C="SQL Preview",z,Y,de,Te,_e,lt="Edit SQL manually",Ze,Ie,Le,xe,Ee,Ae,$e,st,$=o[12]&&kt(),G=o[13].length>0&&Et(o);function nt(m,D){return m[2].length===0?Yt:Wt}let Ve=nt(o),pe=Ve(o),ee=o[6]&&St(),X=o[5].length>0&&Nt(o);function at(m,D){return m[7]?Xt:Gt}let Me=at(o),ve=Me(o),J=o[9]&&Lt(o),Z=o[10]&&At(o);return{c(){e=b("div"),t=b("header"),l=b("div"),s=b("h2"),c=oe(o[0]),n=oe("."),u=b("span"),k=oe(p),E=w(),S=b("p"),N=b("span"),M=oe("Columns: "),x=oe(O),K=w(),$&&$.c(),H=w(),V=b("div"),I=b("button"),I.textContent=ie,W=w(),B=b("button"),le=oe(te),he=w(),ce=b("section"),L=b("div"),Q=b("label"),U=b("span"),U.textContent=we,ye=w(),R=b("input"),qe=w(),se=b("div"),se.innerHTML=Pe,A=w(),G&&G.c(),ne=w(),P=b("section"),ae=b("div"),ke=b("div"),ue=b("table"),be=b("thead"),be.innerHTML=Ne,Se=w(),g=b("tbody"),pe.c(),y=w(),q=b("aside"),r=b("div"),f=b("header"),_=b("h3"),_.textContent=C,z=w(),Y=b("label"),de=b("input"),Te=w(),_e=b("span"),_e.textContent=lt,Ze=w(),ee&&ee.c(),Ie=w(),X&&X.c(),Le=w(),ve.c(),xe=w(),Ee=b("div"),J&&J.c(),Ae=w(),Z&&Z.c(),this.h()},l(m){e=h(m,"DIV",{class:!0});var D=v(e);t=h(D,"HEADER",{class:!0});var Ue=v(t);l=h(Ue,"DIV",{class:!0});var Oe=v(l);s=h(Oe,"H2",{class:!0});var He=v(s);c=re(He,o[0]),n=re(He,"."),u=h(He,"SPAN",{class:!0});var rt=v(u);k=re(rt,p),rt.forEach(d),He.forEach(d),E=T(Oe),S=h(Oe,"P",{class:!0});var Be=v(S);N=h(Be,"SPAN",{class:!0});var et=v(N);M=re(et,"Columns: "),x=re(et,O),et.forEach(d),K=T(Be),$&&$.l(Be),Be.forEach(d),Oe.forEach(d),H=T(Ue),V=h(Ue,"DIV",{class:!0,role:!0,"aria-label":!0});var Ke=v(V);I=h(Ke,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),me(I)!=="svelte-606u9s"&&(I.textContent=ie),W=T(Ke),B=h(Ke,"BUTTON",{type:!0,class:!0});var ot=v(B);le=re(ot,te),ot.forEach(d),Ke.forEach(d),Ue.forEach(d),he=T(D),ce=h(D,"SECTION",{class:!0});var it=v(ce);L=h(it,"DIV",{class:!0});var Re=v(L);Q=h(Re,"LABEL",{});var je=v(Q);U=h(je,"SPAN",{class:!0,"data-svelte-h":!0}),me(U)!=="svelte-wdcodd"&&(U.textContent=we),ye=T(je),R=h(je,"INPUT",{type:!0,placeholder:!0,class:!0}),je.forEach(d),qe=T(Re),se=h(Re,"DIV",{class:!0,"data-svelte-h":!0}),me(se)!=="svelte-1754k9a"&&(se.innerHTML=Pe),Re.forEach(d),it.forEach(d),A=T(D),G&&G.l(D),ne=T(D),P=h(D,"SECTION",{class:!0});var ct=v(P);ae=h(ct,"DIV",{class:!0});var Qe=v(ae);ke=h(Qe,"DIV",{class:!0});var ut=v(ke);ue=h(ut,"TABLE",{class:!0});var ze=v(ue);be=h(ze,"THEAD",{class:!0,"data-svelte-h":!0}),me(be)!=="svelte-oe8hb3"&&(be.innerHTML=Ne),Se=T(ze),g=h(ze,"TBODY",{});var ft=v(g);pe.l(ft),ft.forEach(d),ze.forEach(d),ut.forEach(d),y=T(Qe),q=h(Qe,"ASIDE",{class:!0});var Fe=v(q);r=h(Fe,"DIV",{class:!0});var De=v(r);f=h(De,"HEADER",{class:!0});var We=v(f);_=h(We,"H3",{class:!0,"data-svelte-h":!0}),me(_)!=="svelte-1bp9daq"&&(_.textContent=C),z=T(We),Y=h(We,"LABEL",{class:!0});var Ye=v(Y);de=h(Ye,"INPUT",{type:!0}),Te=T(Ye),_e=h(Ye,"SPAN",{class:!0,"data-svelte-h":!0}),me(_e)!=="svelte-1yy9gvt"&&(_e.textContent=lt),Ye.forEach(d),We.forEach(d),Ze=T(De),ee&&ee.l(De),Ie=T(De),X&&X.l(De),Le=T(De),ve.l(De),De.forEach(d),xe=T(Fe),Ee=h(Fe,"DIV",{class:!0});var Ge=v(Ee);J&&J.l(Ge),Ae=T(Ge),Z&&Z.l(Ge),Ge.forEach(d),Fe.forEach(d),Qe.forEach(d),ct.forEach(d),D.forEach(d),this.h()},h(){i(u,"class","svelte-1bsbq5b"),i(s,"class","svelte-1bsbq5b"),i(N,"class","svelte-1bsbq5b"),i(S,"class","designer-header__meta svelte-1bsbq5b"),i(l,"class","designer-header__title svelte-1bsbq5b"),i(I,"type","button"),i(I,"class","ps-btn ps-btn--primary"),i(B,"type","button"),i(B,"class","ps-btn ps-btn--accent"),B.disabled=j=o[11]||o[13].length>0,i(V,"class","designer-header__actions svelte-1bsbq5b"),i(V,"role","toolbar"),i(V,"aria-label","Create table actions"),i(t,"class","designer-header svelte-1bsbq5b"),i(U,"class","svelte-1bsbq5b"),i(R,"type","text"),R.value=o[1],i(R,"placeholder","Enter table name"),i(R,"class","svelte-1bsbq5b"),i(se,"class","info-summary svelte-1bsbq5b"),i(L,"class","info-grid svelte-1bsbq5b"),i(ce,"class","designer-alert designer-alert--info svelte-1bsbq5b"),i(be,"class","svelte-1bsbq5b"),i(ue,"class","svelte-1bsbq5b"),i(ke,"class","designer-columns svelte-1bsbq5b"),i(_,"class","svelte-1bsbq5b"),i(de,"type","checkbox"),de.checked=o[7],i(_e,"class","svelte-1bsbq5b"),i(Y,"class","manual-toggle svelte-1bsbq5b"),i(f,"class","svelte-1bsbq5b"),i(r,"class","preview-card svelte-1bsbq5b"),i(Ee,"class","execution-feedback svelte-1bsbq5b"),i(q,"class","designer-sidebar svelte-1bsbq5b"),i(ae,"class","designer-grid svelte-1bsbq5b"),i(P,"class","designer-body svelte-1bsbq5b"),i(e,"class","designer-container svelte-1bsbq5b")},m(m,D){F(m,e,D),a(e,t),a(t,l),a(l,s),a(s,c),a(s,n),a(s,u),a(u,k),a(l,E),a(l,S),a(S,N),a(N,M),a(N,x),a(S,K),$&&$.m(S,null),a(t,H),a(t,V),a(V,I),a(V,W),a(V,B),a(B,le),a(e,he),a(e,ce),a(ce,L),a(L,Q),a(Q,U),a(Q,ye),a(Q,R),a(L,qe),a(L,se),a(e,A),G&&G.m(e,null),a(e,ne),a(e,P),a(P,ae),a(ae,ke),a(ke,ue),a(ue,be),a(ue,Se),a(ue,g),pe.m(g,null),a(ae,y),a(ae,q),a(q,r),a(r,f),a(f,_),a(f,z),a(f,Y),a(Y,de),a(Y,Te),a(Y,_e),a(r,Ze),ee&&ee.m(r,null),a(r,Ie),X&&X.m(r,null),a(r,Le),ve.m(r,null),a(q,xe),a(q,Ee),J&&J.m(Ee,null),a(Ee,Ae),Z&&Z.m(Ee,null),$e||(st=[fe(I,"click",o[14]),fe(B,"click",o[23]),fe(R,"input",o[24]),fe(de,"change",o[22])],$e=!0)},p(m,D){D[0]&1&&ge(c,m[0]),D[0]&2&&p!==(p=(m[1]||"new_table")+"")&&ge(k,p),D[0]&4&&O!==(O=m[2].length+"")&&ge(x,O),m[12]?$||($=kt(),$.c(),$.m(S,null)):$&&($.d(1),$=null),D[0]&2048&&te!==(te=m[11]?"Creating…":"Create table")&&ge(le,te),D[0]&10240&&j!==(j=m[11]||m[13].length>0)&&(B.disabled=j),D[0]&2&&R.value!==m[1]&&(R.value=m[1]),m[13].length>0?G?G.p(m,D):(G=Et(m),G.c(),G.m(e,ne)):G&&(G.d(1),G=null),Ve===(Ve=nt(m))&&pe?pe.p(m,D):(pe.d(1),pe=Ve(m),pe&&(pe.c(),pe.m(g,null))),D[0]&128&&(de.checked=m[7]),m[6]?ee||(ee=St(),ee.c(),ee.m(r,Ie)):ee&&(ee.d(1),ee=null),m[5].length>0?X?X.p(m,D):(X=Nt(m),X.c(),X.m(r,Le)):X&&(X.d(1),X=null),Me===(Me=at(m))&&ve?ve.p(m,D):(ve.d(1),ve=Me(m),ve&&(ve.c(),ve.m(r,null))),m[9]?J?J.p(m,D):(J=Lt(m),J.c(),J.m(Ee,Ae)):J&&(J.d(1),J=null),m[10]?Z?Z.p(m,D):(Z=At(m),Z.c(),Z.m(Ee,null)):Z&&(Z.d(1),Z=null)},i:tt,o:tt,d(m){m&&d(e),$&&$.d(),G&&G.d(),pe.d(),ee&&ee.d(),X&&X.d(),ve.d(),J&&J.d(),Z&&Z.d(),$e=!1,Mt(st)}}}const Vt=o=>o.includes("name");function Zt(o,e,t){let{vscode:l}=e,{initialState:s}=e,c="",n="",u=[],p=[],k="/* Define at least one column to preview SQL */",E=[],S=!1,N=null,M=!1,O="",x="",K="",H=!1,V=!1,I=[];const ie=["bigint","boolean","bytea","date","double precision","integer","jsonb","numeric","serial","text","timestamp without time zone","timestamp with time zone","uuid","varchar(255)"];function W(r){t(0,c=r.schemaName),t(1,n=r.suggestedTableName),t(3,p=Array.from(new Set([...ie,...r.typeOptions])).sort((f,_)=>f.localeCompare(_))),t(2,u=r.columns.map(f=>({...f,errors:[]}))),t(4,k="/* Define at least one column to preview SQL */"),t(8,O=""),t(5,E=[]),t(6,S=!1),t(10,K=""),t(9,x=""),t(11,H=!1),t(12,V=!1),t(13,I=[]),Pe(),j(!0)}s&&typeof s=="object"&&W(s);function B(){if(!l)throw new Error("VS Code API unavailable.");return l}function te(){t(12,V=!0),Pe(),le()}function le(){M||(N&&clearTimeout(N),N=setTimeout(()=>{j()},250))}function j(r=!1){N&&(clearTimeout(N),N=null),!(M&&!r)&&(t(6,S=!0),B().postMessage({command:"createTablePreview",payload:he()}))}function he(){return{tableName:n,columns:u.map(r=>({id:r.id,name:r.name,type:r.type,nullable:r.nullable,defaultValue:r.defaultValue,comment:r.comment,isPrimaryKey:r.isPrimaryKey}))}}function ce(){const r=new Set(u.map(z=>z.name.trim().toLowerCase()).filter(z=>z.length>0));let f=1,_=`column_${f}`;for(;r.has(_);)f+=1,_=`column_${f}`;const C=p[0]??"text";t(2,u=[...u,{id:`col-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:_,type:C,nullable:!0,defaultValue:null,comment:null,isPrimaryKey:!1,errors:[]}]),te()}function L(r,f,_){t(2,u=u.map(C=>C.id!==r.id?C:{...C,[f]:_})),te()}function Q(r){t(2,u=u.filter(f=>f.id!==r.id)),te()}function U(r,f){const _=f.currentTarget;L(r,"name",(_==null?void 0:_.value)??"")}function we(r,f){const _=f.currentTarget;L(r,"type",(_==null?void 0:_.value)??r.type)}function ye(r,f){const _=f.currentTarget;L(r,"nullable",!!(_!=null&&_.checked))}function R(r,f){const _=f.currentTarget,C=(_==null?void 0:_.value)??"";L(r,"defaultValue",C.length?C:null)}function qe(r,f){const _=f.currentTarget,C=(_==null?void 0:_.value)??"";L(r,"comment",C.length?C:null)}function se(r){L(r,"isPrimaryKey",!r.isPrimaryKey)}function Pe(){t(13,I=[]),(!n||n.trim().length===0)&&I.push("Table name is required."),u.length===0&&I.push("Add at least one column definition.");const r=new Map,f=[];for(const C of u){const z=[],Y=(C.name??"").trim();Y||z.push("Column name is required"),(C.type??"").trim()||z.push("Column type is required");const Te=Y.toLowerCase();Y&&r.set(Te,(r.get(Te)??0)+1),f.push({...C,errors:z})}t(2,u=f.map(C=>{const z=(C.name??"").trim();return z&&(r.get(z.toLowerCase())??0)>1&&!C.errors.includes("Duplicate column name")&&(C.errors=[...C.errors,"Duplicate column name"]),C})),u.filter(C=>C.isPrimaryKey).length===0&&I.push("Select at least one primary key column."),u.some(C=>C.errors.length>0)&&I.push("Resolve column validation errors before continuing.")}function A(r){const f=r.target,_=!!(f!=null&&f.checked);t(7,M=_),_?t(8,O=k):(t(8,O=""),j())}function ne(){if(Pe(),I.length>0){t(10,K=I.join(`
`)),t(9,x="");return}t(10,K=""),t(9,x=""),t(11,H=!0),B().postMessage({command:"createTableExecute",payload:{...he(),tableName:n,useManualSql:M,sql:M?O:void 0}})}function P(r){const f=r.currentTarget;t(1,n=(f==null?void 0:f.value)??""),te()}function ae(r){const f=r.data;if(!(!f||typeof f!="object"))switch(f.command){case"createTablePreview":{const _=f.payload;t(4,k=_.sql||"/* Define at least one column to preview SQL */"),t(5,E=_.warnings??[]),t(6,S=!1),M||t(8,O=k);break}case"createTableExecuteComplete":t(11,H=!1),f.success?(t(9,x="Table created successfully."),t(10,K=""),t(12,V=!1)):(t(10,K=f.error?String(f.error):"Failed to create table."),t(9,x=""));break}}Rt(()=>(window.addEventListener("message",ae),()=>{window.removeEventListener("message",ae),N&&clearTimeout(N)}));const ke=(r,f)=>U(r,f),ue=(r,f)=>we(r,f),be=(r,f)=>ye(r,f),Ne=(r,f)=>R(r,f),Se=(r,f)=>qe(r,f),g=r=>se(r),y=r=>Q(r);function q(){O=this.value,t(8,O)}return o.$$set=r=>{"vscode"in r&&t(25,l=r.vscode),"initialState"in r&&t(26,s=r.initialState)},[c,n,u,p,k,E,S,M,O,x,K,H,V,I,ce,Q,U,we,ye,R,qe,se,A,ne,P,l,s,ke,ue,be,Ne,Se,g,y,q]}class xt extends Ht{constructor(e){super(),Bt(this,e,Zt,Jt,Kt,{vscode:25,initialState:26},null,[-1,-1])}}const Ut=document.getElementById("app");if(!Ut)throw new Error("Failed to locate webview root element.");const $t=window.acquireVsCodeApi?window.acquireVsCodeApi():void 0,Ot=window.initialState??{};Ot.view!=="createTable"&&console.warn("Unexpected initial state payload for create table flow.",window.initialState);new xt({target:Ut,hydrate:!0,props:{vscode:$t,initialState:Ot}});
