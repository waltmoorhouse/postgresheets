/* empty css           */import{S as Pl,i as Ll,s as Ml,n as Xe,d as c,a as xt,r as He,b as se,c as H,e as o,l as J,f as r,g as b,h as S,j as U,k as G,m as ee,o as v,p as R,t as X,q as fn,u as $l,v as sn,w as Al,x as ws,y as ue,z as ae,A as Ts,B as Ss,C as Ns,D as St,E as Nt,F as Ot,G as Dt,H as gt,I as Os,J as Ds,K as Ye,L as Ut,M as Rt,N as rn,O as Is,P as an,Q as As,R as Ps,T as Ls}from"../chunks/index.js";import{g as Ms,c as rt}from"../chunks/clsx.js";import{e as me,u as on,d as un}from"../chunks/each.js";function _n(t,e,l){const n=t.slice();return n[26]=e[l],n[28]=l,n}function mn(t){let e,l,n,s,a,i,f=t[26].name+"",u,d,h,g,m,p,y,E,C;function V(){return t[16](t[26])}function j(...P){return t[17](t[28],...P)}function O(...P){return t[19](t[28],...P)}function T(...P){return t[20](t[28],...P)}function w(...P){return t[21](t[28],...P)}return{c(){e=v("li"),l=v("label"),n=v("input"),i=R(),u=X(f),d=R(),h=v("div"),g=v("button"),m=X("☰"),y=R(),this.h()},l(P){e=b(P,"LI",{class:!0,role:!0});var F=S(e);l=b(F,"LABEL",{});var B=S(l);n=b(B,"INPUT",{type:!0,"aria-label":!0}),i=U(B),u=G(B,f),B.forEach(c),d=U(F),h=b(F,"DIV",{class:!0});var A=S(h);g=b(A,"BUTTON",{type:!0,class:!0,draggable:!0,"aria-label":!0,title:!0});var M=S(g);m=G(M,"☰"),M.forEach(c),A.forEach(c),y=U(F),F.forEach(c),this.h()},h(){r(n,"type","checkbox"),n.checked=s=t[26].visible,r(n,"aria-label",a=`Toggle visibility for ${t[26].name}`),r(g,"type","button"),r(g,"class","drag-handle ps-btn ps-btn--icon svelte-1h2y6hf"),r(g,"draggable","true"),r(g,"aria-label",p=`Reorder ${t[26].name}. Press Alt+ArrowUp or Alt+ArrowDown to move.`),r(g,"title","Drag to reorder — Alt+Up / Alt+Down to move via keyboard"),r(h,"class","column-manager-controls"),r(e,"class","column-manager-item svelte-1h2y6hf"),r(e,"role","listitem"),sn(e,"drag-over",t[1]===t[28])},m(P,F){H(P,e,F),o(e,l),o(l,n),o(l,i),o(l,u),o(e,d),o(e,h),o(h,g),o(g,m),o(e,y),E||(C=[J(n,"change",V),J(g,"dragstart",j),J(g,"dragend",t[18]),J(g,"keydown",O),J(e,"dragover",T),J(e,"drop",w)],E=!0)},p(P,F){t=P,F&1&&s!==(s=t[26].visible)&&(n.checked=s),F&1&&a!==(a=`Toggle visibility for ${t[26].name}`)&&r(n,"aria-label",a),F&1&&f!==(f=t[26].name+"")&&se(u,f),F&1&&p!==(p=`Reorder ${t[26].name}. Press Alt+ArrowUp or Alt+ArrowDown to move.`)&&r(g,"aria-label",p),F&2&&sn(e,"drag-over",t[1]===t[28])},d(P){P&&c(e),E=!1,He(C)}}}function Vs(t){let e,l,n,s,a,i,f,u,d="Save",h,g,m="Cancel",p,y,E="Reset to defaults",C,V,j=me(t[0]),O=[];for(let T=0;T<j.length;T+=1)O[T]=mn(_n(t,j,T));return{c(){e=v("div"),l=v("ul");for(let T=0;T<O.length;T+=1)O[T].c();n=R(),s=v("div"),a=X(t[3]),i=R(),f=v("div"),u=v("button"),u.textContent=d,h=R(),g=v("button"),g.textContent=m,p=R(),y=v("button"),y.textContent=E,this.h()},l(T){e=b(T,"DIV",{class:!0,role:!0});var w=S(e);l=b(w,"UL",{class:!0,role:!0});var P=S(l);for(let A=0;A<O.length;A+=1)O[A].l(P);P.forEach(c),n=U(w),s=b(w,"DIV",{"aria-live":!0,class:!0});var F=S(s);a=G(F,t[3]),F.forEach(c),i=U(w),f=b(w,"DIV",{class:!0,role:!0});var B=S(f);u=b(B,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(u)!=="svelte-jrb4up"&&(u.textContent=d),h=U(B),g=b(B,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(g)!=="svelte-qruyej"&&(g.textContent=m),p=U(B),y=b(B,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(y)!=="svelte-bdjf5d"&&(y.textContent=E),B.forEach(c),w.forEach(c),this.h()},h(){r(l,"class","column-manager-list svelte-1h2y6hf"),r(l,"role","list"),r(s,"aria-live","polite"),r(s,"class","sr-only svelte-1h2y6hf"),r(u,"type","button"),r(u,"class","ps-btn ps-btn--primary"),r(u,"title","Save column preferences (Enter or Alt+S)"),r(g,"type","button"),r(g,"class","ps-btn ps-btn--ghost"),r(g,"title","Close without saving (Escape)"),r(y,"type","button"),r(y,"class","ps-btn ps-btn--link"),r(f,"class","modal-actions svelte-1h2y6hf"),r(f,"role","group"),r(e,"class","column-manager"),r(e,"role","presentation")},m(T,w){H(T,e,w),o(e,l);for(let P=0;P<O.length;P+=1)O[P]&&O[P].m(l,null);o(e,n),o(e,s),o(s,a),o(e,i),o(e,f),o(f,u),t[22](u),o(f,h),o(f,g),o(f,p),o(f,y),C||(V=[J(u,"click",t[8]),J(g,"click",t[23]),J(y,"click",t[9]),J(e,"keydown",t[10])],C=!0)},p(T,[w]){if(w&30947){j=me(T[0]);let P;for(P=0;P<j.length;P+=1){const F=_n(T,j,P);O[P]?O[P].p(F,w):(O[P]=mn(F),O[P].c(),O[P].m(l,null))}for(;P<O.length;P+=1)O[P].d(1);O.length=j.length}w&8&&se(a,T[3])},i:Xe,o:Xe,d(T){T&&c(e),xt(O,T),t[22](null),C=!1,He(V)}}}function Us(t,e,l){let{items:n=[]}=e;const s=fn();let a=null,i=null,f=null,u=n.map(N=>({...N}));function d(){s("change",{items:u.slice()})}function h(N){const I=u.findIndex(Q=>Q.name===N);I>=0&&(l(0,u[I].visible=!u[I].visible,u),d())}function g(N){if(N<=0)return;const I=u.slice(),Q=I[N-1];I[N-1]=I[N],I[N]=Q,l(0,u=I),d(),l(3,T=`${u[N-1].name} moved up`)}function m(N){if(N>=u.length-1)return;const I=u.slice(),Q=I[N+1];I[N+1]=I[N],I[N]=Q,l(0,u=I),d(),l(3,T=`${u[N+1].name} moved down`)}function p(){s("save",{items:u.slice()})}function y(){s("reset")}function E(N){N.key==="Escape"&&(N.preventDefault(),s("cancel"))}function C(N,I){var Q;a=I;try{(Q=N.dataTransfer)==null||Q.setData("text/plain",String(I)),N.dataTransfer.effectAllowed="move";try{const te=N.currentTarget;te&&te.setAttribute("aria-grabbed","true")}catch{}}catch{}}function V(N,I){N.preventDefault(),l(1,i=I)}function j(N,I){var $;N.preventDefault();const Q=a??Number(($=N.dataTransfer)==null?void 0:$.getData("text/plain")),te=I;if(Q===te||Q<0||te<0){a=null,l(1,i=null);return}const ne=u.slice(),[x]=ne.splice(Q,1);ne.splice(te,0,x),l(0,u=ne),d(),l(3,T=`${x.name} moved to position ${te+1}`),a=null,l(1,i=null)}function O(N){try{if(N&&N.currentTarget){const I=N.currentTarget;I&&I.removeAttribute("aria-grabbed")}}catch{}a=null,l(1,i=null)}let T="";$l(()=>{f&&f.focus()});const w=N=>h(N.name),P=(N,I)=>C(I,N),F=N=>O(N),B=(N,I)=>{I.key==="ArrowUp"&&I.altKey?(g(N),I.preventDefault()):I.key==="ArrowDown"&&I.altKey&&(m(N),I.preventDefault())},A=(N,I)=>V(I,N),M=(N,I)=>j(I,N);function z(N){Al[N?"unshift":"push"](()=>{f=N,l(2,f)})}const K=()=>s("cancel");return t.$$set=N=>{"items"in N&&l(15,n=N.items)},t.$$.update=()=>{t.$$.dirty&32769&&Array.isArray(n)&&(n.length===u.length&&n.every((I,Q)=>{var te,ne;return I.name===((te=u[Q])==null?void 0:te.name)&&I.visible===((ne=u[Q])==null?void 0:ne.visible)})||l(0,u=n.map(I=>({...I}))))},[u,i,f,T,s,h,g,m,p,y,E,C,V,j,O,n,w,P,F,B,A,M,z,K]}class Rs extends Pl{constructor(e){super(),Ll(this,e,Us,Vs,Ml,{items:15})}}function Bs(t){let e,l;const n=t[3].default,s=ws(n,t,t[2],null);return{c(){e=v("div"),s&&s.c(),this.h()},l(a){e=b(a,"DIV",{"aria-label":!0,tabindex:!0,role:!0});var i=S(e);s&&s.l(i),i.forEach(c),this.h()},h(){r(e,"aria-label",t[0]),r(e,"tabindex","-1"),r(e,"role","presentation")},m(a,i){H(a,e,i),s&&s.m(e,null),t[4](e),l=!0},p(a,[i]){s&&s.p&&(!l||i&4)&&Ts(s,n,a,a[2],l?Ns(n,a[2],i,null):Ss(a[2]),null),(!l||i&1)&&r(e,"aria-label",a[0])},i(a){l||(ae(s,a),l=!0)},o(a){ue(s,a),l=!1},d(a){a&&c(e),s&&s.d(a),t[4](null)}}}function js(t,e,l){let{$$slots:n={},$$scope:s}=e,{ariaLabel:a}=e,i=null,f=null;const u=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");function d(){return i?Array.from(i.querySelectorAll(u)):[]}function h(){const p=d();p.length>0&&p[0].focus()}function g(p){if(p.key==="Escape"){p.preventDefault(),i==null||i.dispatchEvent(new CustomEvent("escapepressed"));return}if(p.key==="Tab"){const y=d();if(y.length===0)return;let C=y.indexOf(document.activeElement)+(p.shiftKey?-1:1);C>=y.length?C=0:C<0&&(C=y.length-1),p.preventDefault(),y[C].focus()}}$l(()=>(f=document.activeElement,h(),i&&i.addEventListener("keydown",g),()=>{if(i&&i.removeEventListener("keydown",g),f&&typeof f.focus=="function")try{f.focus()}catch{}}));function m(p){Al[p?"unshift":"push"](()=>{i=p,l(1,i)})}return t.$$set=p=>{"ariaLabel"in p&&l(0,a=p.ariaLabel),"$$scope"in p&&l(2,s=p.$$scope)},[a,i,s,n,m]}class Vl extends Pl{constructor(e){super(),Ll(this,e,js,Bs,Ml,{ariaLabel:0})}}function bn(t,e,l){const n=t.slice();return n[14]=e[l],n}function Fs(t){let e,l="No hidden columns for this table.";return{c(){e=v("p"),e.textContent=l,this.h()},l(n){e=b(n,"P",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-yasy1l"&&(e.textContent=l),this.h()},h(){r(e,"class","empty")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function Ks(t){let e,l=me(t[0]),n=[];for(let s=0;s<l.length;s+=1)n[s]=vn(bn(t,l,s));return{c(){e=v("ul");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=b(s,"UL",{class:!0});var a=S(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(c),this.h()},h(){r(e,"class","hidden-list svelte-i7xau8")},m(s,a){H(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,a){if(a&65){l=me(s[0]);let i;for(i=0;i<l.length;i+=1){const f=bn(s,l,i);n[i]?n[i].p(f,a):(n[i]=vn(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&c(e),xt(n,s)}}}function vn(t){let e,l,n=t[14]+"",s,a,i,f,u,d,h,g;function m(){return t[11](t[14])}return{c(){e=v("li"),l=v("span"),s=X(n),a=R(),i=v("button"),f=X("Show"),d=R(),this.h()},l(p){e=b(p,"LI",{class:!0});var y=S(e);l=b(y,"SPAN",{});var E=S(l);s=G(E,n),E.forEach(c),a=U(y),i=b(y,"BUTTON",{type:!0,class:!0,"aria-label":!0});var C=S(i);f=G(C,"Show"),C.forEach(c),d=U(y),y.forEach(c),this.h()},h(){r(i,"type","button"),r(i,"class","ps-btn"),r(i,"aria-label",u=`Show ${t[14]}`),r(e,"class","svelte-i7xau8")},m(p,y){H(p,e,y),o(e,l),o(l,s),o(e,a),o(e,i),o(i,f),o(e,d),h||(g=J(i,"click",m),h=!0)},p(p,y){t=p,y&1&&n!==(n=t[14]+"")&&se(s,n),y&1&&u!==(u=`Show ${t[14]}`)&&r(i,"aria-label",u)},d(p){p&&c(e),h=!1,g()}}}function zs(t){let e,l,n,s="Hidden columns",a,i,f,u,d,h="These columns are currently hidden. You can restore them individually or show all.",g,m,p,y="Keyboard shortcuts",E,C,V="<li><strong>Alt + R</strong>: Show all hidden columns</li> <li><strong>Alt + H</strong>: Toggle this help</li> <li><strong>Esc</strong>: Close modal</li> <li><strong>Alt + ↑ / Alt + ↓</strong>: Move column when the drag handle is focused</li>",j,O,T,w,P,F,B,A,M,z,K="Close",N,I;function Q(x,$){return x[0]&&x[0].length>0?Ks:Fs}let te=Q(t),ne=te(t);return{c(){e=v("div"),l=v("div"),n=v("h3"),n.textContent=s,a=R(),i=v("button"),f=X("?"),u=R(),d=v("p"),d.textContent=h,g=R(),m=v("section"),p=v("h4"),p.textContent=y,E=R(),C=v("ul"),C.innerHTML=V,T=R(),ne.c(),w=R(),P=v("div"),F=v("button"),B=X("Show all"),M=R(),z=v("button"),z.textContent=K,this.h()},l(x){e=b(x,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var $=S(e);l=b($,"DIV",{class:!0});var ce=S(l);n=b(ce,"H3",{id:!0,"data-svelte-h":!0}),ee(n)!=="svelte-3ua83u"&&(n.textContent=s),a=U(ce),i=b(ce,"BUTTON",{type:!0,class:!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0,title:!0});var ie=S(i);f=G(ie,"?"),ie.forEach(c),ce.forEach(c),u=U($),d=b($,"P",{id:!0,"data-svelte-h":!0}),ee(d)!=="svelte-pjalm7"&&(d.textContent=h),g=U($),m=b($,"SECTION",{id:!0,class:!0,"aria-hidden":!0,"aria-labelledby":!0});var _e=S(m);p=b(_e,"H4",{id:!0,tabindex:!0,"data-svelte-h":!0}),ee(p)!=="svelte-1828bdj"&&(p.textContent=y),E=U(_e),C=b(_e,"UL",{"data-svelte-h":!0}),ee(C)!=="svelte-vdyldg"&&(C.innerHTML=V),_e.forEach(c),T=U($),ne.l($),w=U($),P=b($,"DIV",{class:!0,role:!0});var Ie=S(P);F=b(Ie,"BUTTON",{type:!0,class:!0,title:!0});var ve=S(F);B=G(ve,"Show all"),ve.forEach(c),M=U(Ie),z=b(Ie,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(z)!=="svelte-13szhcv"&&(z.textContent=K),Ie.forEach(c),$.forEach(c),this.h()},h(){r(n,"id","hidden-columns-heading"),r(i,"type","button"),r(i,"class","help-btn ps-btn ps-btn--icon svelte-i7xau8"),r(i,"aria-expanded",t[1]),r(i,"aria-controls","shortcuts"),r(i,"aria-label","Keyboard shortcuts"),r(i,"title","Keyboard shortcuts (Alt+H)"),r(l,"class","modal-header svelte-i7xau8"),r(d,"id","hidden-columns-description"),r(p,"id","shortcuts-heading"),r(p,"tabindex","-1"),r(m,"id","shortcuts"),r(m,"class","shortcut-help svelte-i7xau8"),m.hidden=j=!t[1],r(m,"aria-hidden",O=!t[1]),r(m,"aria-labelledby","shortcuts-heading"),r(F,"type","button"),r(F,"class","ps-btn ps-btn--primary"),F.disabled=A=!(t[0]&&t[0].length>0),r(F,"title","Alt+R to show all"),r(z,"type","button"),r(z,"class","ps-btn ps-btn--ghost"),r(P,"class","modal-actions"),r(P,"role","group"),r(e,"class","modal dialog hidden-columns"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","hidden-columns-heading"),r(e,"aria-describedby","hidden-columns-description")},m(x,$){H(x,e,$),o(e,l),o(l,n),o(l,a),o(l,i),o(i,f),o(e,u),o(e,d),o(e,g),o(e,m),o(m,p),t[10](p),o(m,E),o(m,C),o(e,T),ne.m(e,null),o(e,w),o(e,P),o(P,F),o(F,B),o(P,M),o(P,z),t[12](e),N||(I=[J(i,"click",t[9]),J(F,"click",t[7]),J(z,"click",t[8]),J(e,"keydown",t[5],!0)],N=!0)},p(x,$){$&2&&r(i,"aria-expanded",x[1]),$&2&&j!==(j=!x[1])&&(m.hidden=j),$&2&&O!==(O=!x[1])&&r(m,"aria-hidden",O),te===(te=Q(x))&&ne?ne.p(x,$):(ne.d(1),ne=te(x),ne&&(ne.c(),ne.m(e,w))),$&1&&A!==(A=!(x[0]&&x[0].length>0))&&(F.disabled=A)},d(x){x&&c(e),t[10](null),ne.d(),t[12](null),N=!1,He(I)}}}function qs(t){let e,l,n;return l=new Vl({props:{ariaLabel:"Hidden columns",$$slots:{default:[zs]},$$scope:{ctx:t}}}),l.$on("escapepressed",t[4]),{c(){e=v("div"),Dt(l.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=S(e);Ot(l.$$.fragment,a),a.forEach(c),this.h()},h(){r(e,"class","modal-backdrop")},m(s,a){H(s,e,a),Nt(l,e,null),n=!0},p(s,[a]){const i={};a&131087&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){n||(ae(l.$$.fragment,s),n=!0)},o(s){ue(l.$$.fragment,s),n=!1},d(s){s&&c(e),St(l)}}}function Hs(t,e,l){let{hidden:n=[]}=e;const s=fn();function a(){d()}function i(V){!m||!m.contains(V.target)||(V.altKey&&(V.key==="r"||V.key==="R")&&(n??[]).length>0&&(u(),V.preventDefault()),V.altKey&&(V.key==="h"||V.key==="H")&&(l(1,h=!h),V.preventDefault()))}function f(V){s("show",{name:V})}function u(){s("showAll")}function d(){s("close")}let h=!1,g=null,m=null;function p(){l(1,h=!h),h&&setTimeout(()=>g==null?void 0:g.focus(),0)}function y(V){Al[V?"unshift":"push"](()=>{g=V,l(2,g)})}const E=V=>f(V);function C(V){Al[V?"unshift":"push"](()=>{m=V,l(3,m)})}return t.$$set=V=>{"hidden"in V&&l(0,n=V.hidden)},[n,h,g,m,a,i,f,u,d,p,y,E,C]}class Ws extends Pl{constructor(e){super(),Ll(this,e,Hs,qs,Ml,{hidden:0})}}function gn(t,e,l){const n=t.slice();n[23]=e[l];const s=n[23][n[2].pkColumn];n[24]=s;const a=n[6]===n[24];return n[25]=a,n}function kn(t,e,l){const n=t.slice();return n[28]=e[l],n}function yn(t,e,l){const n=t.slice();return n[28]=e[l],n}function En(t){var M,z;let e,l,n,s,a,i=(((z=(M=t[0])==null?void 0:M.foreignKey)==null?void 0:z.referencedTable)||"value")+"",f,u,d,h="✕",g,m,p,y,E,C="Cancel",V,j,O,T,w,P;function F(K,N){return K[4]?Xs:K[3]?Gs:K[2]&&K[2].fkRows.length>0?Qs:Js}let B=F(t),A=B(t);return{c(){e=v("div"),l=v("div"),n=v("div"),s=v("h2"),a=X("Select "),f=X(i),u=R(),d=v("button"),d.textContent=h,g=R(),m=v("div"),A.c(),p=R(),y=v("div"),E=v("button"),E.textContent=C,V=R(),j=v("button"),O=X("Select"),this.h()},l(K){e=b(K,"DIV",{class:!0,role:!0});var N=S(e);l=b(N,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var I=S(l);n=b(I,"DIV",{class:!0});var Q=S(n);s=b(Q,"H2",{id:!0,class:!0});var te=S(s);a=G(te,"Select "),f=G(te,i),te.forEach(c),u=U(Q),d=b(Q,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),ee(d)!=="svelte-1vldziz"&&(d.textContent=h),Q.forEach(c),g=U(I),m=b(I,"DIV",{class:!0});var ne=S(m);A.l(ne),ne.forEach(c),p=U(I),y=b(I,"DIV",{class:!0});var x=S(y);E=b(x,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(E)!=="svelte-s4ryqv"&&(E.textContent=C),V=U(x),j=b(x,"BUTTON",{type:!0,class:!0});var $=S(j);O=G($,"Select"),$.forEach(c),x.forEach(c),I.forEach(c),N.forEach(c),this.h()},h(){r(s,"id","fk-selector-heading"),r(s,"class","svelte-1b3h0lg"),r(d,"type","button"),r(d,"class","close-button svelte-1b3h0lg"),r(d,"aria-label","Close FK selector"),r(n,"class","modal-header svelte-1b3h0lg"),r(m,"class","modal-body svelte-1b3h0lg"),r(E,"type","button"),r(E,"class","ps-btn ps-btn-secondary svelte-1b3h0lg"),r(j,"type","button"),r(j,"class","ps-btn ps-btn-primary svelte-1b3h0lg"),j.disabled=T=t[6]===null,r(y,"class","modal-footer svelte-1b3h0lg"),r(l,"class","modal dialog fk-selector-modal svelte-1b3h0lg"),r(l,"role","dialog"),r(l,"aria-modal","true"),r(l,"aria-labelledby","fk-selector-heading"),r(e,"class","modal-backdrop svelte-1b3h0lg"),r(e,"role","presentation")},m(K,N){H(K,e,N),o(e,l),o(l,n),o(n,s),o(s,a),o(s,f),o(n,u),o(n,d),o(l,g),o(l,m),A.m(m,null),o(l,p),o(l,y),o(y,E),o(y,V),o(y,j),o(j,O),w||(P=[J(d,"click",t[7]),J(E,"click",t[7]),J(j,"click",t[9]),J(l,"click",Os(t[15])),J(e,"click",t[7]),J(e,"keydown",t[19])],w=!0)},p(K,N){var I,Q;N[0]&1&&i!==(i=(((Q=(I=K[0])==null?void 0:I.foreignKey)==null?void 0:Q.referencedTable)||"value")+"")&&se(f,i),B===(B=F(K))&&A?A.p(K,N):(A.d(1),A=B(K),A&&(A.c(),A.m(m,null))),N[0]&64&&T!==(T=K[6]===null)&&(j.disabled=T)},d(K){K&&c(e),A.d(),w=!1,He(P)}}}function Js(t){let e,l="No rows available in the referenced table.";return{c(){e=v("div"),e.textContent=l,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1crcvve"&&(e.textContent=l),this.h()},h(){r(e,"class","no-rows svelte-1b3h0lg")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function Qs(t){let e,l,n,s,a,i;function f(h,g){return h[10]().length>0?Zs:Ys}let d=f(t)(t);return{c(){e=v("div"),l=v("input"),n=R(),s=v("div"),d.c(),this.h()},l(h){e=b(h,"DIV",{class:!0});var g=S(e);l=b(g,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0}),g.forEach(c),n=U(h),s=b(h,"DIV",{class:!0});var m=S(s);d.l(m),m.forEach(c),this.h()},h(){r(l,"type","text"),r(l,"class","search-input svelte-1b3h0lg"),r(l,"placeholder","Search rows..."),r(l,"aria-label","Search foreign key rows"),r(e,"class","search-container svelte-1b3h0lg"),r(s,"class","fk-table-container svelte-1b3h0lg")},m(h,g){H(h,e,g),o(e,l),Ye(l,t[5]),H(h,n,g),H(h,s,g),d.m(s,null),a||(i=J(l,"input",t[16]),a=!0)},p(h,g){g[0]&32&&l.value!==h[5]&&Ye(l,h[5]),d.p(h,g)},d(h){h&&(c(e),c(n),c(s)),d.d(),a=!1,i()}}}function Gs(t){let e,l=`<div class="spinner svelte-1b3h0lg"></div>
            Loading...`;return{c(){e=v("div"),e.innerHTML=l,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-an1qsk"&&(e.innerHTML=l),this.h()},h(){r(e,"class","loading-indicator svelte-1b3h0lg")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function Xs(t){let e,l;return{c(){e=v("div"),l=X(t[4]),this.h()},l(n){e=b(n,"DIV",{class:!0,role:!0});var s=S(e);l=G(s,t[4]),s.forEach(c),this.h()},h(){r(e,"class","error-message svelte-1b3h0lg"),r(e,"role","alert")},m(n,s){H(n,e,s),o(e,l)},p(n,s){s[0]&16&&se(l,n[4])},d(n){n&&c(e)}}}function Ys(t){let e,l="No rows match your search.";return{c(){e=v("div"),e.textContent=l,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1mx8rwt"&&(e.textContent=l),this.h()},h(){r(e,"class","no-results svelte-1b3h0lg")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function Zs(t){let e,l,n,s=[],a=new Map,i,f,u=[],d=new Map,h=me(t[11]());const g=y=>y[28];for(let y=0;y<h.length;y+=1){let E=yn(t,h,y),C=g(E);a.set(C,s[y]=Cn(C,E))}let m=me(t[10]());const p=y=>y[23][y[2].pkColumn];for(let y=0;y<m.length;y+=1){let E=gn(t,m,y),C=p(E);d.set(C,u[y]=Tn(C,E))}return{c(){e=v("table"),l=v("thead"),n=v("tr");for(let y=0;y<s.length;y+=1)s[y].c();i=R(),f=v("tbody");for(let y=0;y<u.length;y+=1)u[y].c();this.h()},l(y){e=b(y,"TABLE",{class:!0});var E=S(e);l=b(E,"THEAD",{class:!0});var C=S(l);n=b(C,"TR",{class:!0});var V=S(n);for(let O=0;O<s.length;O+=1)s[O].l(V);V.forEach(c),C.forEach(c),i=U(E),f=b(E,"TBODY",{});var j=S(f);for(let O=0;O<u.length;O+=1)u[O].l(j);j.forEach(c),E.forEach(c),this.h()},h(){r(n,"class","svelte-1b3h0lg"),r(l,"class","svelte-1b3h0lg"),r(e,"class","fk-selector-table svelte-1b3h0lg")},m(y,E){H(y,e,E),o(e,l),o(l,n);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(n,null);o(e,i),o(e,f);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(f,null)},p(y,E){E[0]&2048&&(h=me(y[11]()),s=on(s,E,g,1,y,h,a,n,un,Cn,null,yn)),E[0]&3396&&(m=me(y[10]()),u=on(u,E,p,1,y,m,d,f,un,Tn,null,gn))},d(y){y&&c(e);for(let E=0;E<s.length;E+=1)s[E].d();for(let E=0;E<u.length;E+=1)u[E].d()}}}function Cn(t,e){let l,n=e[28]+"",s;return{key:t,first:null,c(){l=v("th"),s=X(n),this.h()},l(a){l=b(a,"TH",{class:!0});var i=S(l);s=G(i,n),i.forEach(c),this.h()},h(){r(l,"class","svelte-1b3h0lg"),this.first=l},m(a,i){H(a,l,i),o(l,s)},p(a,i){e=a},d(a){a&&c(l)}}}function wn(t,e){let l,n=xs(e[23],e[28])+"",s;return{key:t,first:null,c(){l=v("td"),s=X(n),this.h()},l(a){l=b(a,"TD",{class:!0});var i=S(l);s=G(i,n),i.forEach(c),this.h()},h(){r(l,"class","svelte-1b3h0lg"),this.first=l},m(a,i){H(a,l,i),o(l,s)},p(a,i){e=a},d(a){a&&c(l)}}}function Tn(t,e){let l,n=[],s=new Map,a,i,f,u=me(e[11]());const d=m=>m[28];for(let m=0;m<u.length;m+=1){let p=kn(e,u,m),y=d(p);s.set(y,n[m]=wn(y,p))}function h(){return e[17](e[24])}function g(...m){return e[18](e[24],...m)}return{key:t,first:null,c(){l=v("tr");for(let m=0;m<n.length;m+=1)n[m].c();a=R(),this.h()},l(m){l=b(m,"TR",{role:!0,tabindex:!0,class:!0});var p=S(l);for(let y=0;y<n.length;y+=1)n[y].l(p);a=U(p),p.forEach(c),this.h()},h(){r(l,"role","button"),r(l,"tabindex","0"),r(l,"class","svelte-1b3h0lg"),sn(l,"selected",e[25]),this.first=l},m(m,p){H(m,l,p);for(let y=0;y<n.length;y+=1)n[y]&&n[y].m(l,null);o(l,a),i||(f=[J(l,"click",h),J(l,"keydown",g)],i=!0)},p(m,p){e=m,p[0]&3072&&(u=me(e[11]()),n=on(n,p,d,1,e,u,s,l,un,wn,a,kn)),p[0]&1092&&sn(l,"selected",e[25])},d(m){m&&c(l);for(let p=0;p<n.length;p+=1)n[p].d();i=!1,He(f)}}}function $s(t){let e,l=t[1]&&En(t);return{c(){l&&l.c(),e=gt()},l(n){l&&l.l(n),e=gt()},m(n,s){l&&l.m(n,s),H(n,e,s)},p(n,s){n[1]?l?l.p(n,s):(l=En(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:Xe,o:Xe,d(n){n&&c(e),l&&l.d(n)}}}function xs(t,e){const l=t[e];return l==null?"":typeof l=="object"?JSON.stringify(l):String(l)}function er(t,e,l){const n=fn();let{column:s=null}=e,{schemaName:a=""}=e,{tableName:i=""}=e,{isOpen:f=!1}=e,{vscode:u=void 0}=e,d=null,h=!1,g="",m="",p=null;function y(M){var K,N;const z=M.data;console.log("[FKSelectorModal] Received message:",z),z.command==="foreignKeyRows"?(console.log("[FKSelectorModal] Processing foreignKeyRows:",(K=z.rows)==null?void 0:K.length,"rows"),l(2,d={fkRows:z.rows||[],pkColumn:z.pkColumn||"id",selectedValue:null}),l(3,h=!1)):z.command==="webviewError"&&(console.log("[FKSelectorModal] Error received:",z.error),l(4,g=((N=z.error)==null?void 0:N.message)||"An error occurred"),l(3,h=!1))}$l(()=>(console.log("[FKSelectorModal] Component mounted, adding message listener"),window.addEventListener("message",y),()=>{console.log("[FKSelectorModal] Component unmounting, removing message listener"),window.removeEventListener("message",y)}));async function E(){if(console.log("[FKSelectorModal] openFKSelector called",{column:s,schemaName:a,tableName:i}),!s||!s.foreignKey){l(4,g="Column is not a foreign key"),console.log("[FKSelectorModal] Column is not a foreign key:",s);return}if(!u){l(4,g="VS Code API not available"),console.log("[FKSelectorModal] VS Code API not available");return}l(3,h=!0),l(4,g=""),l(2,d=null),l(5,m=""),l(6,p=null),console.log("[FKSelectorModal] Sending loadForeignKeyRows request:",{command:"loadForeignKeyRows",schemaName:a,tableName:i,columnName:s.name}),u.postMessage({command:"loadForeignKeyRows",schemaName:a,tableName:i,columnName:s.name})}function C(){n("close"),l(2,d=null),l(4,g=""),l(3,h=!1),l(5,m=""),l(6,p=null)}function V(M){l(6,p=M)}function j(){p!==null&&(n("fkSelected",{value:p}),l(2,d=null),l(4,g=""),l(3,h=!1),l(5,m=""),l(6,p=null))}function O(){if(!d||!m)return(d==null?void 0:d.fkRows)||[];const M=m.toLowerCase();return((d==null?void 0:d.fkRows)||[]).filter(z=>Object.values(z).some(K=>K==null?!1:String(K).toLowerCase().includes(M)))}function T(){if(!d||!d.fkRows||d.fkRows.length===0)return[];const M=d.fkRows[0];return Object.keys(M).slice(0,5)}function w(M){Ds.call(this,t,M)}function P(){m=this.value,l(5,m)}const F=M=>V(M),B=(M,z)=>{(z.key==="Enter"||z.key===" ")&&V(M)},A=M=>M.key==="Escape"&&C();return t.$$set=M=>{"column"in M&&l(0,s=M.column),"schemaName"in M&&l(12,a=M.schemaName),"tableName"in M&&l(13,i=M.tableName),"isOpen"in M&&l(1,f=M.isOpen),"vscode"in M&&l(14,u=M.vscode)},t.$$.update=()=>{t.$$.dirty[0]&14&&f&&!d&&!h&&E()},[s,f,d,h,g,m,p,C,V,j,O,T,a,i,u,w,P,F,B,A]}class tr extends Pl{constructor(e){super(),Ll(this,e,er,$s,Ml,{column:0,schemaName:12,tableName:13,isOpen:1,vscode:14},null,[-1,-1])}}function Sn(t,e,l){const n=t.slice();return n[18]=e[l],n}function Nn(t){let e,l,n,s,a,i;return n=new Vl({props:{$$slots:{default:[lr]},$$scope:{ctx:t}}}),{c(){e=v("div"),l=R(),Dt(n.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0,role:!0}),S(e).forEach(c),l=U(f),Ot(n.$$.fragment,f),this.h()},h(){r(e,"class","modal-backdrop"),r(e,"role","presentation")},m(f,u){H(f,e,u),H(f,l,u),Nt(n,f,u),s=!0,a||(i=J(e,"click",function(){rn(t[2])&&t[2].apply(this,arguments)}),a=!0)},p(f,u){t=f;const d={};u&2097406&&(d.$$scope={dirty:u,ctx:t}),n.$set(d)},i(f){s||(ae(n.$$.fragment,f),s=!0)},o(f){ue(n.$$.fragment,f),s=!1},d(f){f&&(c(e),c(l)),St(n,f),a=!1,i()}}}function On(t){let e,l;return{c(){e=v("div"),l=X(t[7]),this.h()},l(n){e=b(n,"DIV",{class:!0,role:!0});var s=S(e);l=G(s,t[7]),s.forEach(c),this.h()},h(){r(e,"class","error-message svelte-vfuaxg"),r(e,"role","alert")},m(n,s){H(n,e,s),o(e,l)},p(n,s){s&128&&se(l,n[7])},d(n){n&&c(e)}}}function Dn(t){let e,l,n="Time",s,a,i,f=t[3].includes("time zone"),u,d,h,g=f&&In(t);return{c(){e=v("div"),l=v("label"),l.textContent=n,s=R(),a=v("input"),i=R(),g&&g.c(),u=gt(),this.h()},l(m){e=b(m,"DIV",{class:!0});var p=S(e);l=b(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-1u3j7l3"&&(l.textContent=n),s=U(p),a=b(p,"INPUT",{id:!0,type:!0,step:!0,class:!0}),p.forEach(c),i=U(m),g&&g.l(m),u=gt(),this.h()},h(){r(l,"for","time-input"),r(l,"class","svelte-vfuaxg"),r(a,"id","time-input"),r(a,"type","time"),r(a,"step","1"),r(a,"class","svelte-vfuaxg"),r(e,"class","form-group svelte-vfuaxg")},m(m,p){H(m,e,p),o(e,l),o(e,s),o(e,a),Ye(a,t[5]),H(m,i,p),g&&g.m(m,p),H(m,u,p),d||(h=[J(a,"input",t[15]),J(a,"keydown",t[10])],d=!0)},p(m,p){p&32&&Ye(a,m[5]),p&8&&(f=m[3].includes("time zone")),f?g?g.p(m,p):(g=In(m),g.c(),g.m(u.parentNode,u)):g&&(g.d(1),g=null)},d(m){m&&(c(e),c(i),c(u)),g&&g.d(m),d=!1,He(h)}}}function In(t){let e,l,n="Timezone",s,a,i,f,u="PostgreSQL will adjust to server timezone",d,h,g=me(t[8]),m=[];for(let p=0;p<g.length;p+=1)m[p]=An(Sn(t,g,p));return{c(){e=v("div"),l=v("label"),l.textContent=n,s=R(),a=v("select");for(let p=0;p<m.length;p+=1)m[p].c();i=R(),f=v("small"),f.textContent=u,this.h()},l(p){e=b(p,"DIV",{class:!0});var y=S(e);l=b(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-12ua8o"&&(l.textContent=n),s=U(y),a=b(y,"SELECT",{id:!0,class:!0});var E=S(a);for(let C=0;C<m.length;C+=1)m[C].l(E);E.forEach(c),i=U(y),f=b(y,"SMALL",{class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-17teeca"&&(f.textContent=u),y.forEach(c),this.h()},h(){r(l,"for","tz-select"),r(l,"class","svelte-vfuaxg"),r(a,"id","tz-select"),r(a,"class","svelte-vfuaxg"),t[6]===void 0&&As(()=>t[16].call(a)),r(f,"class","svelte-vfuaxg"),r(e,"class","form-group svelte-vfuaxg")},m(p,y){H(p,e,y),o(e,l),o(e,s),o(e,a);for(let E=0;E<m.length;E+=1)m[E]&&m[E].m(a,null);an(a,t[6],!0),o(e,i),o(e,f),d||(h=J(a,"change",t[16]),d=!0)},p(p,y){if(y&256){g=me(p[8]);let E;for(E=0;E<g.length;E+=1){const C=Sn(p,g,E);m[E]?m[E].p(C,y):(m[E]=An(C),m[E].c(),m[E].m(a,null))}for(;E<m.length;E+=1)m[E].d(1);m.length=g.length}y&320&&an(a,p[6])},d(p){p&&c(e),xt(m,p),d=!1,h()}}}function An(t){let e,l=t[18]+"",n;return{c(){e=v("option"),n=X(l),this.h()},l(s){e=b(s,"OPTION",{});var a=S(e);n=G(a,l),a.forEach(c),this.h()},h(){e.__value=t[18],Ye(e,e.__value)},m(s,a){H(s,e,a),o(e,n)},p:Xe,d(s){s&&c(e)}}}function lr(t){let e,l,n,s,a,i,f,u="✕",d,h,g,m,p,y="Date",E,C,V,j=!t[3].includes("date")||t[3].includes("timestamp"),O,T,w,P="Current value:",F,B,A=(t[1]||"(empty)")+"",M,z,K,N,I="Clear",Q,te,ne="Now",x,$,ce="Cancel",ie,_e,Ie="Save",ve,We,fe=t[7]&&On(t),he=j&&Dn(t);return{c(){e=v("div"),l=v("div"),n=v("h2"),s=X("Edit "),a=X(t[3]),i=R(),f=v("button"),f.textContent=u,d=R(),h=v("div"),fe&&fe.c(),g=R(),m=v("div"),p=v("label"),p.textContent=y,E=R(),C=v("input"),V=R(),he&&he.c(),O=R(),T=v("div"),w=v("strong"),w.textContent=P,F=R(),B=v("code"),M=X(A),z=R(),K=v("div"),N=v("button"),N.textContent=I,Q=R(),te=v("button"),te.textContent=ne,x=R(),$=v("button"),$.textContent=ce,ie=R(),_e=v("button"),_e.textContent=Ie,this.h()},l(re){e=b(re,"DIV",{class:!0,role:!0,"aria-labelledby":!0,"aria-modal":!0});var pe=S(e);l=b(pe,"DIV",{class:!0});var Ve=S(l);n=b(Ve,"H2",{id:!0});var Ne=S(n);s=G(Ne,"Edit "),a=G(Ne,t[3]),Ne.forEach(c),i=U(Ve),f=b(Ve,"BUTTON",{class:!0,"aria-label":!0,title:!0,"data-svelte-h":!0}),ee(f)!=="svelte-1nxnd6d"&&(f.textContent=u),Ve.forEach(c),d=U(pe),h=b(pe,"DIV",{class:!0});var Ae=S(h);fe&&fe.l(Ae),g=U(Ae),m=b(Ae,"DIV",{class:!0});var ht=S(m);p=b(ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(p)!=="svelte-dllkcn"&&(p.textContent=y),E=U(ht),C=b(ht,"INPUT",{id:!0,type:!0,class:!0}),ht.forEach(c),V=U(Ae),he&&he.l(Ae),O=U(Ae),T=b(Ae,"DIV",{class:!0});var de=S(T);w=b(de,"STRONG",{class:!0,"data-svelte-h":!0}),ee(w)!=="svelte-rl9ine"&&(w.textContent=P),F=U(de),B=b(de,"CODE",{class:!0});var pt=S(B);M=G(pt,A),pt.forEach(c),de.forEach(c),Ae.forEach(c),z=U(pe),K=b(pe,"DIV",{class:!0});var Oe=S(K);N=b(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(N)!=="svelte-iw5o2q"&&(N.textContent=I),Q=U(Oe),te=b(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(te)!=="svelte-rq5yvs"&&(te.textContent=ne),x=U(Oe),$=b(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee($)!=="svelte-x8ngz8"&&($.textContent=ce),ie=U(Oe),_e=b(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(_e)!=="svelte-w4orhp"&&(_e.textContent=Ie),Oe.forEach(c),pe.forEach(c),this.h()},h(){r(n,"id","datetime-title"),r(f,"class","modal-close-btn"),r(f,"aria-label","Close dialog"),r(f,"title","Close (Esc)"),r(l,"class","modal-header"),r(p,"for","date-input"),r(p,"class","svelte-vfuaxg"),r(C,"id","date-input"),r(C,"type","date"),r(C,"class","svelte-vfuaxg"),r(m,"class","form-group svelte-vfuaxg"),r(w,"class","svelte-vfuaxg"),r(B,"class","svelte-vfuaxg"),r(T,"class","current-value svelte-vfuaxg"),r(h,"class","modal-body"),r(N,"class","btn btn-secondary"),r(te,"class","btn btn-secondary"),r($,"class","btn btn-secondary"),r(_e,"class","btn btn-primary"),r(K,"class","modal-footer"),r(e,"class","modal dialog"),r(e,"role","dialog"),r(e,"aria-labelledby","datetime-title"),r(e,"aria-modal","true")},m(re,pe){H(re,e,pe),o(e,l),o(l,n),o(n,s),o(n,a),o(l,i),o(l,f),o(e,d),o(e,h),fe&&fe.m(h,null),o(h,g),o(h,m),o(m,p),o(m,E),o(m,C),Ye(C,t[4]),o(h,V),he&&he.m(h,null),o(h,O),o(h,T),o(T,w),o(T,F),o(T,B),o(B,M),o(e,z),o(e,K),o(K,N),o(K,Q),o(K,te),o(K,x),o(K,$),o(K,ie),o(K,_e),ve||(We=[J(f,"click",function(){rn(t[2])&&t[2].apply(this,arguments)}),J(C,"input",t[14]),J(C,"keydown",t[10]),J(N,"click",t[11]),J(te,"click",t[12]),J($,"click",function(){rn(t[2])&&t[2].apply(this,arguments)}),J(_e,"click",t[9])],ve=!0)},p(re,pe){t=re,pe&8&&se(a,t[3]),t[7]?fe?fe.p(t,pe):(fe=On(t),fe.c(),fe.m(h,g)):fe&&(fe.d(1),fe=null),pe&16&&Ye(C,t[4]),pe&8&&(j=!t[3].includes("date")||t[3].includes("timestamp")),j?he?he.p(t,pe):(he=Dn(t),he.c(),he.m(h,O)):he&&(he.d(1),he=null),pe&2&&A!==(A=(t[1]||"(empty)")+"")&&se(M,A)},d(re){re&&c(e),fe&&fe.d(),he&&he.d(),ve=!1,He(We)}}}function nr(t){let e,l,n=t[0]&&Nn(t);return{c(){n&&n.c(),e=gt()},l(s){n&&n.l(s),e=gt()},m(s,a){n&&n.m(s,a),H(s,e,a),l=!0},p(s,[a]){s[0]?n?(n.p(s,a),a&1&&ae(n,1)):(n=Nn(s),n.c(),ae(n,1),n.m(e.parentNode,e)):n&&(Ut(),ue(n,1,1,()=>{n=null}),Rt())},i(s){l||(ae(n),l=!0)},o(s){ue(n),l=!1},d(s){s&&c(e),n&&n.d(s)}}}function sr(t,e,l){let{isOpen:n=!1}=e,{value:s=""}=e,{onClose:a=()=>{}}=e,{onSave:i=()=>{}}=e,{columnType:f="timestamp with time zone"}=e,u="",d="",h="UTC",g="";const m=["UTC","America/New_York","America/Los_Angeles","America/Chicago","America/Denver","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Australia/Sydney","Pacific/Auckland"];$l(()=>{var w;if(s)try{const P=new Date(s);if(l(4,u=P.toISOString().split("T")[0]),l(5,d=((w=P.toISOString().split("T")[1])==null?void 0:w.split(".")[0])||"00:00:00"),f.includes("time zone")){const F=s.match(/([A-Z_]+)$/);F&&l(6,h=F[1])}}catch{l(4,u=""),l(5,d="")}});function p(){if(!u)return l(7,g="Date is required"),"";const w=d||"00:00:00",P=`${u}T${w}`;return f.includes("time zone")?`${P}+00:00`:f.includes("timestamp")?new Date(P).toISOString():f==="date"?u:f==="time"?w:P}function y(){l(7,g="");const w=p();w&&(i(w),l(0,n=!1))}function E(w){w.key==="Enter"?y():w.key==="Escape"&&a()}function C(){l(4,u=""),l(5,d=""),i(""),l(0,n=!1)}function V(){var P;const w=new Date;l(4,u=w.toISOString().split("T")[0]),l(5,d=((P=w.toISOString().split("T")[1])==null?void 0:P.split(".")[0])||"00:00:00")}function j(){u=this.value,l(4,u)}function O(){d=this.value,l(5,d)}function T(){h=Is(this),l(6,h),l(8,m)}return t.$$set=w=>{"isOpen"in w&&l(0,n=w.isOpen),"value"in w&&l(1,s=w.value),"onClose"in w&&l(2,a=w.onClose),"onSave"in w&&l(13,i=w.onSave),"columnType"in w&&l(3,f=w.columnType)},[n,s,a,f,u,d,h,g,m,y,E,C,V,i,j,O,T]}class rr extends Pl{constructor(e){super(),Ll(this,e,sr,nr,Ml,{isOpen:0,value:1,onClose:2,onSave:13,columnType:3})}}function Yl(t){if(!t)return!1;const e=String(t).toLowerCase();return/(^|\W)(smallint|int|integer|bigint|serial|bigserial)(\W|$)/.test(e)}function Zl(t){if(!t)return!1;const e=String(t).toLowerCase();return/(^|\W)(numeric|decimal|float|real|double precision)(\W|$)/.test(e)||e.includes("double")}function ar(t){if(!t)return"";const e=t.startsWith("-"),l=t.replace(/[^0-9]/g,"");return e?`-${l}`:l}function or(t){if(!t)return"";let e=t.replace(/[^0-9eE+\-.]/g,"");const l=e.indexOf(".");l!==-1&&(e=e.slice(0,l+1)+e.slice(l+1).replace(/\./g,""));const n=Math.max(e.indexOf("e"),e.indexOf("E"));if(n!==-1){const s=e.slice(0,n+1);let a=e.slice(n+1).replace(/[eE]/g,"");a=a.replace(/[^0-9+\-]/g,""),a=a.replace(/^(\+|-)+/,i=>i[i.length-1]),e=s+a}return e==="+"||e==="-"?"":e}const{Map:ir,document:Pn}=Ms;function Ln(t,e,l){const n=t.slice();return n[159]=e[l],n}function Mn(t,e,l){const n=t.slice();return n[162]=e[l],n}function Vn(t,e,l){const n=t.slice();return n[166]=e[l],n}function ur(t){var s;const e=t.slice(),l=(s=e[159].validation)==null?void 0:s[e[162].name];e[165]=l;const n=e[5].includes(e[162].name)&&e[162].type.toLowerCase()==="uuid";return e[169]=n,e}function fr(t){var n;const e=t.slice(),l=(n=e[159].validation)==null?void 0:n[e[162].name];return e[165]=l,e}function cr(t){var n;const e=t.slice(),l=(n=e[159].validation)==null?void 0:n[e[162].name];return e[165]=l,e}function dr(t){var n;const e=t.slice(),l=(n=e[159].validation)==null?void 0:n[e[162].name];return e[165]=l,e}function hr(t){var n;const e=t.slice(),l=(n=e[159].validation)==null?void 0:n[e[162].name];return e[165]=l,e}function pr(t){var n;const e=t.slice(),l=(n=e[159].validation)==null?void 0:n[e[162].name];return e[165]=l,e}function Un(t,e,l){const n=t.slice();return n[162]=e[l],n}function Rn(t,e,l){const n=t.slice();return n[162]=e[l],n}function Bn(t,e,l){const n=t.slice();return n[162]=e[l],n}function _r(t){let e,l,n,s,a,i,f,u,d=".",h,g,m,p,y,E,C,V,j,O,T="•",w,P,F,B=t[6]+1+"",A,M,z,K=Object.values(t[20]).some(ks),N,I,Q,te,ne,x,$="Bypass validation",ce,ie,_e="Add row",Ie,ve,We,fe,he,re,pe="Refresh",Ve,Ne,Ae="Preview SQL",ht,de,pt,Oe,_t,el,Fe,It,Bt,wt,Ze,il="Columns",Ul,mt,xl="Hidden",ul,tl,fl,cl,dl,kt,Je,nt,jt,bt,Rl="Search",Ft,$e,ot,Bl,hl,pl,yt,jl,Kt=t[6]+1+"",ll,Fl,nl,Kl,vt,sl,Tt,At,zt,it,ut,_l,ml,bl,qt,rl,Ke,ft,ge,Pt,zl,Ht,Wt,ql,st,vl,Hl,gl,al,Wl,Et,Qe=[],kl=new ir,ol,Jl,xe,yl,El,Ct,Cl,wl,Jt,Qt,Gt,De,Ql,en,Ue=t[19]&&jn(t),ze=K&&Fn(),ke=t[24]&&Kn(t),ye=t[25]&&zn(t),Ee=t[38]&&t[39]&&qn(t),Ce=t[40]&&t[41]&&Hn(t),Xt=me(t[23]),Pe=[];for(let D=0;D<Xt.length;D+=1)Pe[D]=Wn(Bn(t,Xt,D));let Yt=me(t[23]),Le=[];for(let D=0;D<Yt.length;D+=1)Le[D]=Zn(Rn(t,Yt,D));let Zt=me(t[23]),Me=[];for(let D=0;D<Zt.length;D+=1)Me[D]=$n(Un(t,Zt,D));let Tl=me(t[1]);const tn=D=>D[159].id;for(let D=0;D<Tl.length;D+=1){let W=Ln(t,Tl,D),Y=tn(W);kl.set(Y,Qe[D]=is(Y,W))}let Re=t[1].length===0&&us(t),Be=t[14]&&fs(t),je=t[15]&&cs(t),we=t[11]&&ds(t),Te=t[27]&&t[28]&&t[29]&&hs(t),Se=t[33]&&t[34]&&t[35]&&ms(t);return{c(){e=v("div"),l=v("header"),n=v("div"),s=v("h2"),a=v("span"),i=X(t[2]),f=R(),u=v("span"),u.textContent=d,h=R(),g=v("span"),m=X(t[3]),p=R(),y=v("p"),E=v("span"),C=X(t[7]),V=X(" rows"),j=R(),O=v("span"),O.textContent=T,w=R(),P=v("span"),F=X("Page "),A=X(B),M=R(),Ue&&Ue.c(),z=R(),ze&&ze.c(),N=R(),I=v("div"),Q=v("label"),te=v("input"),ne=R(),x=v("span"),x.textContent=$,ce=R(),ie=v("button"),ie.textContent=_e,Ie=R(),ve=v("button"),We=X("Delete selected"),he=R(),re=v("button"),re.textContent=pe,Ve=R(),Ne=v("button"),Ne.textContent=Ae,ht=R(),de=v("button"),pt=X("Execute"),el=R(),Fe=v("button"),It=X("Clear filters"),wt=R(),Ze=v("button"),Ze.textContent=il,Ul=R(),mt=v("button"),mt.textContent=xl,ul=R(),ke&&ke.c(),tl=R(),ye&&ye.c(),fl=R(),Ee&&Ee.c(),cl=R(),Ce&&Ce.c(),dl=R(),kt=v("section"),Je=v("div"),nt=v("input"),jt=R(),bt=v("button"),bt.textContent=Rl,Ft=R(),$e=v("div"),ot=v("button"),Bl=X("Previous"),pl=R(),yt=v("span"),jl=X("Page "),ll=X(Kt),Fl=X(" · Rows "),nl=X(t[7]),Kl=R(),vt=v("button"),sl=X("Next"),At=R(),zt=v("section"),it=v("table"),ut=v("colgroup"),_l=v("col"),ml=R();for(let D=0;D<Pe.length;D+=1)Pe[D].c();bl=R(),qt=v("col"),rl=R(),Ke=v("thead"),ft=v("tr"),ge=v("th"),Pt=v("input"),zl=R();for(let D=0;D<Le.length;D+=1)Le[D].c();Ht=R(),Wt=v("th"),ql=R(),st=v("tr"),vl=v("th"),Hl=R();for(let D=0;D<Me.length;D+=1)Me[D].c();gl=R(),al=v("th"),Wl=R(),Et=v("tbody");for(let D=0;D<Qe.length;D+=1)Qe[D].c();ol=R(),Re&&Re.c(),Jl=R(),xe=v("section"),Be&&Be.c(),yl=R(),je&&je.c(),El=R(),Ct=v("div"),Cl=X(t[26]),wl=R(),we&&we.c(),Jt=R(),Te&&Te.c(),Qt=R(),Se&&Se.c(),Gt=gt(),this.h()},l(D){e=b(D,"DIV",{class:!0});var W=S(e);l=b(W,"HEADER",{class:!0});var Y=S(l);n=b(Y,"DIV",{class:!0});var et=S(n);s=b(et,"H2",{});var $t=S(s);a=b($t,"SPAN",{class:!0});var _=S(a);i=G(_,t[2]),_.forEach(c),f=U($t),u=b($t,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),ee(u)!=="svelte-skpd"&&(u.textContent=d),h=U($t),g=b($t,"SPAN",{class:!0});var k=S(g);m=G(k,t[3]),k.forEach(c),$t.forEach(c),p=U(et),y=b(et,"P",{class:!0});var L=S(y);E=b(L,"SPAN",{});var q=S(E);C=G(q,t[7]),V=G(q," rows"),q.forEach(c),j=U(L),O=b(L,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),ee(O)!=="svelte-9zni1r"&&(O.textContent=T),w=U(L),P=b(L,"SPAN",{});var Z=S(P);F=G(Z,"Page "),A=G(Z,B),Z.forEach(c),M=U(L),Ue&&Ue.l(L),z=U(L),ze&&ze.l(L),L.forEach(c),et.forEach(c),N=U(Y),I=b(Y,"DIV",{class:!0,role:!0,"aria-label":!0});var le=S(I);Q=b(le,"LABEL",{class:!0,title:!0});var qe=S(Q);te=b(qe,"INPUT",{type:!0}),ne=U(qe),x=b(qe,"SPAN",{"data-svelte-h":!0}),ee(x)!=="svelte-6xi1db"&&(x.textContent=$),qe.forEach(c),ce=U(le),ie=b(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(ie)!=="svelte-sdx1ou"&&(ie.textContent=_e),Ie=U(le),ve=b(le,"BUTTON",{type:!0,class:!0});var oe=S(ve);We=G(oe,"Delete selected"),oe.forEach(c),he=U(le),re=b(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(re)!=="svelte-e58r4x"&&(re.textContent=pe),Ve=U(le),Ne=b(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(Ne)!=="svelte-nmcl5k"&&(Ne.textContent=Ae),ht=U(le),de=b(le,"BUTTON",{type:!0,class:!0,title:!0});var Ge=S(de);pt=G(Ge,"Execute"),Ge.forEach(c),el=U(le),Fe=b(le,"BUTTON",{type:!0,class:!0});var Lt=S(Fe);It=G(Lt,"Clear filters"),Lt.forEach(c),wt=U(le),Ze=b(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(Ze)!=="svelte-1l46cb0"&&(Ze.textContent=il),Ul=U(le),mt=b(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(mt)!=="svelte-vic425"&&(mt.textContent=xl),le.forEach(c),Y.forEach(c),ul=U(W),ke&&ke.l(W),tl=U(W),ye&&ye.l(W),fl=U(W),Ee&&Ee.l(W),cl=U(W),Ce&&Ce.l(W),dl=U(W),kt=b(W,"SECTION",{class:!0});var tt=S(kt);Je=b(tt,"DIV",{class:!0});var ct=S(Je);nt=b(ct,"INPUT",{type:!0,placeholder:!0}),jt=U(ct),bt=b(ct,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(bt)!=="svelte-1dfbi0w"&&(bt.textContent=Rl),ct.forEach(c),Ft=U(tt),$e=b(tt,"DIV",{class:!0,role:!0,"aria-label":!0});var Mt=S($e);ot=b(Mt,"BUTTON",{type:!0,class:!0});var Gl=S(ot);Bl=G(Gl,"Previous"),Gl.forEach(c),pl=U(Mt),yt=b(Mt,"SPAN",{});var Vt=S(yt);jl=G(Vt,"Page "),ll=G(Vt,Kt),Fl=G(Vt," · Rows "),nl=G(Vt,t[7]),Vt.forEach(c),Kl=U(Mt),vt=b(Mt,"BUTTON",{type:!0,class:!0});var cn=S(vt);sl=G(cn,"Next"),cn.forEach(c),Mt.forEach(c),tt.forEach(c),At=U(W),zt=b(W,"SECTION",{class:!0});var dn=S(zt);it=b(dn,"TABLE",{});var Sl=S(it);ut=b(Sl,"COLGROUP",{});var Nl=S(ut);_l=b(Nl,"COL",{class:!0}),ml=U(Nl);for(let lt=0;lt<Pe.length;lt+=1)Pe[lt].l(Nl);bl=U(Nl),qt=b(Nl,"COL",{class:!0}),Nl.forEach(c),rl=U(Sl),Ke=b(Sl,"THEAD",{});var ln=S(Ke);ft=b(ln,"TR",{});var Ol=S(ft);ge=b(Ol,"TH",{class:!0});var hn=S(ge);Pt=b(hn,"INPUT",{type:!0}),hn.forEach(c),zl=U(Ol);for(let lt=0;lt<Le.length;lt+=1)Le[lt].l(Ol);Ht=U(Ol),Wt=b(Ol,"TH",{class:!0,"aria-label":!0}),S(Wt).forEach(c),Ol.forEach(c),ql=U(ln),st=b(ln,"TR",{class:!0});var Dl=S(st);vl=b(Dl,"TH",{}),S(vl).forEach(c),Hl=U(Dl);for(let lt=0;lt<Me.length;lt+=1)Me[lt].l(Dl);gl=U(Dl),al=b(Dl,"TH",{}),S(al).forEach(c),Dl.forEach(c),ln.forEach(c),Wl=U(Sl),Et=b(Sl,"TBODY",{});var nn=S(Et);for(let lt=0;lt<Qe.length;lt+=1)Qe[lt].l(nn);ol=U(nn),Re&&Re.l(nn),nn.forEach(c),Sl.forEach(c),dn.forEach(c),Jl=U(W),xe=b(W,"SECTION",{class:!0});var Il=S(xe);Be&&Be.l(Il),yl=U(Il),je&&je.l(Il),El=U(Il),Ct=b(Il,"DIV",{role:!0,"aria-live":!0,"aria-atomic":!0,class:!0});var pn=S(Ct);Cl=G(pn,t[26]),pn.forEach(c),Il.forEach(c),W.forEach(c),wl=U(D),we&&we.l(D),Jt=U(D),Te&&Te.l(D),Qt=U(D),Se&&Se.l(D),Gt=gt(),this.h()},h(){r(a,"class","schema-name"),r(u,"class","delimiter"),r(u,"aria-hidden","true"),r(g,"class","table-name"),r(O,"class","separator"),r(O,"aria-hidden","true"),r(y,"class","subheader"),r(n,"class","header-title"),r(te,"type","checkbox"),r(Q,"class","bypass-toggle"),r(Q,"title","Skip client-side validation and let the database enforce constraints"),r(ie,"type","button"),r(ie,"class","ps-btn ps-btn--primary"),r(ve,"type","button"),r(ve,"class","ps-btn ps-btn--ghost"),ve.disabled=fe=!t[1].some(ys),r(re,"type","button"),r(re,"class","ps-btn"),r(Ne,"type","button"),r(Ne,"class","ps-btn ps-btn--ghost"),r(de,"type","button"),r(de,"class","ps-btn ps-btn--accent"),de.disabled=Oe=t[16]||t[43]&&!t[21],r(de,"title",_t=t[43]&&!t[21]?"Fix validation errors before executing":void 0),r(Fe,"type","button"),r(Fe,"class","ps-btn ps-btn--link"),Fe.disabled=Bt=Object.values(t[20]).every(Es),r(Ze,"type","button"),r(Ze,"class","ps-btn"),r(mt,"type","button"),r(mt,"class","ps-btn"),r(I,"class","actions"),r(I,"role","toolbar"),r(I,"aria-label","Table actions"),r(l,"class","header"),r(nt,"type","search"),r(nt,"placeholder","Search this table…"),r(bt,"type","button"),r(bt,"class","ps-btn ps-btn--ghost"),r(Je,"class","toolbar-group toolbar-search"),r(ot,"type","button"),r(ot,"class","ps-btn ps-btn--ghost"),ot.disabled=hl=t[6]===0,r(vt,"type","button"),r(vt,"class","ps-btn ps-btn--ghost"),vt.disabled=Tt=(t[6]+1)*t[8]>=t[7],r($e,"class","toolbar-group pagination"),r($e,"role","navigation"),r($e,"aria-label","Pagination"),r(kt,"class","toolbar"),r(_l,"class","select-column"),r(qt,"class","row-actions-column"),r(Pt,"type","checkbox"),Pt.checked=t[18],r(ge,"class","select-cell"),r(Wt,"class","row-actions"),r(Wt,"aria-label","Row actions"),r(st,"class","filters"),r(zt,"class","table-wrapper"),r(Ct,"role","status"),r(Ct,"aria-live","polite"),r(Ct,"aria-atomic","true"),r(Ct,"class","aria-live-region"),r(xe,"class","feedback"),r(e,"class","container")},m(D,W){H(D,e,W),o(e,l),o(l,n),o(n,s),o(s,a),o(a,i),o(s,f),o(s,u),o(s,h),o(s,g),o(g,m),o(n,p),o(n,y),o(y,E),o(E,C),o(E,V),o(y,j),o(y,O),o(y,w),o(y,P),o(P,F),o(P,A),o(y,M),Ue&&Ue.m(y,null),o(y,z),ze&&ze.m(y,null),o(l,N),o(l,I),o(I,Q),o(Q,te),te.checked=t[21],o(Q,ne),o(Q,x),o(I,ce),o(I,ie),o(I,Ie),o(I,ve),o(ve,We),o(I,he),o(I,re),o(I,Ve),o(I,Ne),o(I,ht),o(I,de),o(de,pt),o(I,el),o(I,Fe),o(Fe,It),o(I,wt),o(I,Ze),o(I,Ul),o(I,mt),o(e,ul),ke&&ke.m(e,null),o(e,tl),ye&&ye.m(e,null),o(e,fl),Ee&&Ee.m(e,null),o(e,cl),Ce&&Ce.m(e,null),o(e,dl),o(e,kt),o(kt,Je),o(Je,nt),Ye(nt,t[9]),o(Je,jt),o(Je,bt),o(kt,Ft),o(kt,$e),o($e,ot),o(ot,Bl),o($e,pl),o($e,yt),o(yt,jl),o(yt,ll),o(yt,Fl),o(yt,nl),o($e,Kl),o($e,vt),o(vt,sl),o(e,At),o(e,zt),o(zt,it),o(it,ut),o(ut,_l),o(ut,ml);for(let Y=0;Y<Pe.length;Y+=1)Pe[Y]&&Pe[Y].m(ut,null);o(ut,bl),o(ut,qt),o(it,rl),o(it,Ke),o(Ke,ft),o(ft,ge),o(ge,Pt),o(ft,zl);for(let Y=0;Y<Le.length;Y+=1)Le[Y]&&Le[Y].m(ft,null);o(ft,Ht),o(ft,Wt),o(Ke,ql),o(Ke,st),o(st,vl),o(st,Hl);for(let Y=0;Y<Me.length;Y+=1)Me[Y]&&Me[Y].m(st,null);o(st,gl),o(st,al),o(it,Wl),o(it,Et);for(let Y=0;Y<Qe.length;Y+=1)Qe[Y]&&Qe[Y].m(Et,null);o(Et,ol),Re&&Re.m(Et,null),o(e,Jl),o(e,xe),Be&&Be.m(xe,null),o(xe,yl),je&&je.m(xe,null),o(xe,El),o(xe,Ct),o(Ct,Cl),H(D,wl,W),we&&we.m(D,W),H(D,Jt,W),Te&&Te.m(D,W),H(D,Qt,W),Se&&Se.m(D,W),H(D,Gt,W),De=!0,Ql||(en=[J(te,"change",t[93]),J(ie,"click",t[49]),J(ve,"click",t[50]),J(re,"click",t[77]),J(Ne,"click",t[78]),J(de,"click",t[82]),J(Fe,"click",t[71]),J(Ze,"click",t[83]),J(mt,"click",t[84]),J(nt,"input",t[100]),J(nt,"keydown",t[101]),J(nt,"search",t[102]),J(bt,"click",t[89]),J(ot,"click",t[103]),J(vt,"click",t[104]),J(Pt,"change",t[48])],Ql=!0)},p(D,W){if((!De||W[0]&4)&&se(i,D[2]),(!De||W[0]&8)&&se(m,D[3]),(!De||W[0]&128)&&se(C,D[7]),(!De||W[0]&64)&&B!==(B=D[6]+1+"")&&se(A,B),D[19]?Ue?Ue.p(D,W):(Ue=jn(D),Ue.c(),Ue.m(y,z)):Ue&&(Ue.d(1),Ue=null),W[0]&1048576&&(K=Object.values(D[20]).some(ks)),K?ze||(ze=Fn(),ze.c(),ze.m(y,null)):ze&&(ze.d(1),ze=null),W[0]&2097152&&(te.checked=D[21]),(!De||W[0]&8388610&&fe!==(fe=!D[1].some(ys)))&&(ve.disabled=fe),(!De||W[0]&2162688|W[1]&4096&&Oe!==(Oe=D[16]||D[43]&&!D[21]))&&(de.disabled=Oe),(!De||W[0]&2097152|W[1]&4096&&_t!==(_t=D[43]&&!D[21]?"Fix validation errors before executing":void 0))&&r(de,"title",_t),(!De||W[0]&1048576&&Bt!==(Bt=Object.values(D[20]).every(Es)))&&(Fe.disabled=Bt),D[24]?ke?(ke.p(D,W),W[0]&16777216&&ae(ke,1)):(ke=Kn(D),ke.c(),ae(ke,1),ke.m(e,tl)):ke&&(Ut(),ue(ke,1,1,()=>{ke=null}),Rt()),D[25]?ye?(ye.p(D,W),W[0]&33554432&&ae(ye,1)):(ye=zn(D),ye.c(),ae(ye,1),ye.m(e,fl)):ye&&(Ut(),ue(ye,1,1,()=>{ye=null}),Rt()),D[38]&&D[39]?Ee?(Ee.p(D,W),W[1]&384&&ae(Ee,1)):(Ee=qn(D),Ee.c(),ae(Ee,1),Ee.m(e,cl)):Ee&&(Ut(),ue(Ee,1,1,()=>{Ee=null}),Rt()),D[40]&&D[41]?Ce?(Ce.p(D,W),W[1]&1536&&ae(Ce,1)):(Ce=Hn(D),Ce.c(),ae(Ce,1),Ce.m(e,dl)):Ce&&(Ut(),ue(Ce,1,1,()=>{Ce=null}),Rt()),W[0]&512&&nt.value!==D[9]&&Ye(nt,D[9]),(!De||W[0]&64&&hl!==(hl=D[6]===0))&&(ot.disabled=hl),(!De||W[0]&64)&&Kt!==(Kt=D[6]+1+"")&&se(ll,Kt),(!De||W[0]&128)&&se(nl,D[7]),(!De||W[0]&448&&Tt!==(Tt=(D[6]+1)*D[8]>=D[7]))&&(vt.disabled=Tt),W[0]&8388608|W[2]&8192){Xt=me(D[23]);let Y;for(Y=0;Y<Xt.length;Y+=1){const et=Bn(D,Xt,Y);Pe[Y]?Pe[Y].p(et,W):(Pe[Y]=Wn(et),Pe[Y].c(),Pe[Y].m(ut,bl))}for(;Y<Pe.length;Y+=1)Pe[Y].d(1);Pe.length=Xt.length}if((!De||W[0]&262144)&&(Pt.checked=D[18]),W[0]&8388640|W[2]&27840){Yt=me(D[23]);let Y;for(Y=0;Y<Yt.length;Y+=1){const et=Rn(D,Yt,Y);Le[Y]?Le[Y].p(et,W):(Le[Y]=Zn(et),Le[Y].c(),Le[Y].m(ft,Ht))}for(;Y<Le.length;Y+=1)Le[Y].d(1);Le.length=Yt.length}if(W[0]&9437184|W[2]&12544){Zt=me(D[23]);let Y;for(Y=0;Y<Zt.length;Y+=1){const et=Un(D,Zt,Y);Me[Y]?Me[Y].p(et,W):(Me[Y]=$n(et),Me[Y].c(),Me[Y].m(st,gl))}for(;Y<Me.length;Y+=1)Me[Y].d(1);Me.length=Zt.length}W[0]&8388642|W[1]&200392704|W[2]&8201&&(Tl=me(D[1]),Qe=on(Qe,W,tn,1,D,Tl,kl,Et,un,is,ol,Ln)),D[1].length===0?Re?Re.p(D,W):(Re=us(D),Re.c(),Re.m(Et,null)):Re&&(Re.d(1),Re=null),D[14]?Be?Be.p(D,W):(Be=fs(D),Be.c(),Be.m(xe,yl)):Be&&(Be.d(1),Be=null),D[15]?je?je.p(D,W):(je=cs(D),je.c(),je.m(xe,El)):je&&(je.d(1),je=null),(!De||W[0]&67108864)&&se(Cl,D[26]),D[11]?we?(we.p(D,W),W[0]&2048&&ae(we,1)):(we=ds(D),we.c(),ae(we,1),we.m(Jt.parentNode,Jt)):we&&(Ut(),ue(we,1,1,()=>{we=null}),Rt()),D[27]&&D[28]&&D[29]?Te?(Te.p(D,W),W[0]&939524096&&ae(Te,1)):(Te=hs(D),Te.c(),ae(Te,1),Te.m(Qt.parentNode,Qt)):Te&&(Ut(),ue(Te,1,1,()=>{Te=null}),Rt()),D[33]&&D[34]&&D[35]?Se?(Se.p(D,W),W[1]&28&&ae(Se,1)):(Se=ms(D),Se.c(),ae(Se,1),Se.m(Gt.parentNode,Gt)):Se&&(Ut(),ue(Se,1,1,()=>{Se=null}),Rt())},i(D){De||(ae(ke),ae(ye),ae(Ee),ae(Ce),ae(we),ae(Te),ae(Se),De=!0)},o(D){ue(ke),ue(ye),ue(Ee),ue(Ce),ue(we),ue(Te),ue(Se),De=!1},d(D){D&&(c(e),c(wl),c(Jt),c(Qt),c(Gt)),Ue&&Ue.d(),ze&&ze.d(),ke&&ke.d(),ye&&ye.d(),Ee&&Ee.d(),Ce&&Ce.d(),xt(Pe,D),xt(Le,D),xt(Me,D);for(let W=0;W<Qe.length;W+=1)Qe[W].d();Re&&Re.d(),Be&&Be.d(),je&&je.d(),we&&we.d(D),Te&&Te.d(D),Se&&Se.d(D),Ql=!1,He(en)}}}function mr(t){let e,l="Loading table data…";return{c(){e=v("div"),e.textContent=l,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-bt2ji1"&&(e.textContent=l),this.h()},h(){r(e,"class","loading")},m(n,s){H(n,e,s)},p:Xe,i:Xe,o:Xe,d(n){n&&c(e)}}}function jn(t){let e,l="•",n,s,a,i=t[19].column+"",f,u,d=t[19].direction+"",h,g;return{c(){e=v("span"),e.textContent=l,n=R(),s=v("span"),a=X("Sort · "),f=X(i),u=R(),h=X(d),this.h()},l(m){e=b(m,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),ee(e)!=="svelte-9zni1r"&&(e.textContent=l),n=U(m),s=b(m,"SPAN",{class:!0,title:!0});var p=S(s);a=G(p,"Sort · "),f=G(p,i),u=U(p),h=G(p,d),p.forEach(c),this.h()},h(){r(e,"class","separator"),r(e,"aria-hidden","true"),r(s,"class","badge"),r(s,"title",g=`Sorted by ${t[19].column} ${t[19].direction}`)},m(m,p){H(m,e,p),H(m,n,p),H(m,s,p),o(s,a),o(s,f),o(s,u),o(s,h)},p(m,p){p[0]&524288&&i!==(i=m[19].column+"")&&se(f,i),p[0]&524288&&d!==(d=m[19].direction+"")&&se(h,d),p[0]&524288&&g!==(g=`Sorted by ${m[19].column} ${m[19].direction}`)&&r(s,"title",g)},d(m){m&&(c(e),c(n),c(s))}}}function Fn(t){let e,l="•",n,s,a="Filters active";return{c(){e=v("span"),e.textContent=l,n=R(),s=v("span"),s.textContent=a,this.h()},l(i){e=b(i,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),ee(e)!=="svelte-9zni1r"&&(e.textContent=l),n=U(i),s=b(i,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),ee(s)!=="svelte-16nhm5u"&&(s.textContent=a),this.h()},h(){r(e,"class","separator"),r(e,"aria-hidden","true"),r(s,"class","badge"),r(s,"title","Active filters applied")},m(i,f){H(i,e,f),H(i,n,f),H(i,s,f)},d(i){i&&(c(e),c(n),c(s))}}}function Kn(t){let e,l,n;return l=new Vl({props:{ariaLabel:"Column Manager",$$slots:{default:[br]},$$scope:{ctx:t}}}),l.$on("escapepressed",t[97]),{c(){e=v("div"),Dt(l.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=S(e);Ot(l.$$.fragment,a),a.forEach(c),this.h()},h(){r(e,"class","modal-backdrop")},m(s,a){H(s,e,a),Nt(l,e,null),n=!0},p(s,a){const i={};a[0]&20971536|a[5]&2097152&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){n||(ae(l.$$.fragment,s),n=!0)},o(s){ue(l.$$.fragment,s),n=!1},d(s){s&&c(e),St(l)}}}function br(t){let e,l,n="Manage Columns",s,a,i;return a=new Rs({props:{items:t[4].map(t[94])}}),a.$on("change",t[86]),a.$on("save",t[91]),a.$on("reset",t[95]),a.$on("cancel",t[96]),{c(){e=v("div"),l=v("h2"),l.textContent=n,s=R(),Dt(a.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var u=S(e);l=b(u,"H2",{id:!0,class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-15tcnqg"&&(l.textContent=n),s=U(u),Ot(a.$$.fragment,u),u.forEach(c),this.h()},h(){r(l,"id","column-manager-heading"),r(l,"class","sr-only"),r(e,"class","modal dialog column-manager"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","column-manager-heading")},m(f,u){H(f,e,u),o(e,l),o(e,s),Nt(a,e,null),i=!0},p(f,u){const d={};u[0]&4194320&&(d.items=f[4].map(f[94])),a.$set(d)},i(f){i||(ae(a.$$.fragment,f),i=!0)},o(f){ue(a.$$.fragment,f),i=!1},d(f){f&&c(e),St(a)}}}function zn(t){let e,l;return e=new Ws({props:{hidden:Array.from(t[22])}}),e.$on("show",t[87]),e.$on("showAll",t[98]),e.$on("close",t[99]),{c(){Dt(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,s){Nt(e,n,s),l=!0},p(n,s){const a={};s[0]&4194304&&(a.hidden=Array.from(n[22])),e.$set(a)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){ue(e.$$.fragment,n),l=!1},d(n){St(e,n)}}}function qn(t){let e,l;return e=new tr({props:{column:t[39],schemaName:t[2],tableName:t[3],isOpen:t[38],vscode:t[0]}}),e.$on("fkSelected",t[64]),e.$on("close",t[63]),{c(){Dt(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,s){Nt(e,n,s),l=!0},p(n,s){const a={};s[1]&256&&(a.column=n[39]),s[0]&4&&(a.schemaName=n[2]),s[0]&8&&(a.tableName=n[3]),s[1]&128&&(a.isOpen=n[38]),s[0]&1&&(a.vscode=n[0]),e.$set(a)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){ue(e.$$.fragment,n),l=!1},d(n){St(e,n)}}}function Hn(t){let e,l;return e=new rr({props:{isOpen:t[40],value:t[42],columnType:t[41].type,onClose:t[66],onSave:t[67]}}),{c(){Dt(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,s){Nt(e,n,s),l=!0},p(n,s){const a={};s[1]&512&&(a.isOpen=n[40]),s[1]&2048&&(a.value=n[42]),s[1]&1024&&(a.columnType=n[41].type),e.$set(a)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){ue(e.$$.fragment,n),l=!1},d(n){St(e,n)}}}function Wn(t){let e,l;return{c(){e=v("col"),this.h()},l(n){e=b(n,"COL",{style:!0}),this.h()},h(){r(e,"style",l=t[75](t[162]))},m(n,s){H(n,e,s)},p(n,s){s[0]&8388608&&l!==(l=n[75](n[162]))&&r(e,"style",l)},d(n){n&&c(e)}}}function Jn(t){let e,l="🔑";return{c(){e=v("span"),e.textContent=l,this.h()},l(n){e=b(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),ee(e)!=="svelte-7lwync"&&(e.textContent=l),this.h()},h(){r(e,"class","pk"),r(e,"title","Primary key")},m(n,s){H(n,e,s)},d(n){n&&c(e)}}}function Qn(t){let e,l,n;return{c(){e=v("span"),l=X("🔗"),this.h()},l(s){e=b(s,"SPAN",{class:!0,title:!0});var a=S(e);l=G(a,"🔗"),a.forEach(c),this.h()},h(){r(e,"class","fk"),r(e,"title",n=`Foreign key: ${t[162].foreignKey.referencedSchema}.${t[162].foreignKey.referencedTable}.${t[162].foreignKey.referencedColumn}`)},m(s,a){H(s,e,a),o(e,l)},p(s,a){a[0]&8388608&&n!==(n=`Foreign key: ${s[162].foreignKey.referencedSchema}.${s[162].foreignKey.referencedTable}.${s[162].foreignKey.referencedColumn}`)&&r(e,"title",n)},d(s){s&&c(e)}}}function Gn(t){let e,l="✓";return{c(){e=v("span"),e.textContent=l,this.h()},l(n){e=b(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),ee(e)!=="svelte-185rqoo"&&(e.textContent=l),this.h()},h(){r(e,"class","unique"),r(e,"title","Unique constraint")},m(n,s){H(n,e,s)},d(n){n&&c(e)}}}function Xn(t){let e,l="📑",n,s;return{c(){e=v("button"),e.textContent=l,this.h()},l(a){e=b(a,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(e)!=="svelte-he55mi"&&(e.textContent=l),this.h()},h(){r(e,"type","button"),r(e,"class","index-indicator"),r(e,"title","Click to manage indexes for this table")},m(a,i){H(a,e,i),n||(s=J(e,"click",t[105]),n=!0)},p:Xe,d(a){a&&c(e),n=!1,s()}}}function Yn(t){let e,l=t[69](t[162])+"",n;return{c(){e=v("span"),n=X(l),this.h()},l(s){e=b(s,"SPAN",{class:!0});var a=S(e);n=G(a,l),a.forEach(c),this.h()},h(){r(e,"class","sort-indicator")},m(s,a){H(s,e,a),o(e,n)},p(s,a){a[0]&8388608&&l!==(l=s[69](s[162])+"")&&se(n,l)},d(s){s&&c(e)}}}function Zn(t){let e,l,n,s,a=t[162].name+"",i,f,u=t[5].includes(t[162].name),d,h,g,m,p=t[69](t[162]),y,E,C,V,j,O=t[162].type+"",T,w,P,F,B,A=u&&Jn(),M=t[162].foreignKey&&Qn(t),z=t[162].isUnique&&Gn(),K=t[162].isIndexed&&Xn(t),N=p&&Yn(t);function I(){return t[106](t[162])}function Q(...x){return t[107](t[162],...x)}function te(...x){return t[108](t[162],...x)}function ne(...x){return t[109](t[162],...x)}return{c(){e=v("th"),l=v("div"),n=v("button"),s=v("span"),i=X(a),f=R(),A&&A.c(),d=R(),M&&M.c(),h=R(),z&&z.c(),g=R(),K&&K.c(),m=R(),N&&N.c(),y=R(),E=v("button"),V=R(),j=v("small"),T=X(O),this.h()},l(x){e=b(x,"TH",{class:!0,style:!0});var $=S(e);l=b($,"DIV",{class:!0});var ce=S(l);n=b(ce,"BUTTON",{type:!0,class:!0});var ie=S(n);s=b(ie,"SPAN",{});var _e=S(s);i=G(_e,a),_e.forEach(c),f=U(ie),A&&A.l(ie),d=U(ie),M&&M.l(ie),h=U(ie),z&&z.l(ie),g=U(ie),K&&K.l(ie),m=U(ie),N&&N.l(ie),ie.forEach(c),y=U(ce),E=b(ce,"BUTTON",{type:!0,class:!0,tabindex:!0,"aria-label":!0,title:!0}),S(E).forEach(c),ce.forEach(c),V=U($),j=b($,"SMALL",{});var Ie=S(j);T=G(Ie,O),Ie.forEach(c),$.forEach(c),this.h()},h(){r(n,"type","button"),r(n,"class","header-button"),r(E,"type","button"),r(E,"class","resize-handle"),r(E,"tabindex","0"),r(E,"aria-label",C=`Resize ${t[162].name} column. Use arrow keys to adjust width.`),r(E,"title","Drag to resize, or use arrow keys (Left/Right to decrease/increase width)"),r(l,"class","column-header"),r(e,"class","column-header-cell"),r(e,"style",w=t[75](t[162]))},m(x,$){H(x,e,$),o(e,l),o(l,n),o(n,s),o(s,i),o(n,f),A&&A.m(n,null),o(n,d),M&&M.m(n,null),o(n,h),z&&z.m(n,null),o(n,g),K&&K.m(n,null),o(n,m),N&&N.m(n,null),o(l,y),o(l,E),o(e,V),o(e,j),o(j,T),F||(B=[J(n,"click",I),J(E,"pointerdown",Q),J(E,"mousedown",te),J(E,"keydown",ne),Ls(P=t[44].call(null,e,t[162].name))],F=!0)},p(x,$){t=x,$[0]&8388608&&a!==(a=t[162].name+"")&&se(i,a),$[0]&8388640&&(u=t[5].includes(t[162].name)),u?A||(A=Jn(),A.c(),A.m(n,d)):A&&(A.d(1),A=null),t[162].foreignKey?M?M.p(t,$):(M=Qn(t),M.c(),M.m(n,h)):M&&(M.d(1),M=null),t[162].isUnique?z||(z=Gn(),z.c(),z.m(n,g)):z&&(z.d(1),z=null),t[162].isIndexed?K?K.p(t,$):(K=Xn(t),K.c(),K.m(n,m)):K&&(K.d(1),K=null),$[0]&8388608&&(p=t[69](t[162])),p?N?N.p(t,$):(N=Yn(t),N.c(),N.m(n,null)):N&&(N.d(1),N=null),$[0]&8388608&&C!==(C=`Resize ${t[162].name} column. Use arrow keys to adjust width.`)&&r(E,"aria-label",C),$[0]&8388608&&O!==(O=t[162].type+"")&&se(T,O),$[0]&8388608&&w!==(w=t[75](t[162]))&&r(e,"style",w),P&&rn(P.update)&&$[0]&8388608&&P.update.call(null,t[162].name)},d(x){x&&c(e),A&&A.d(),M&&M.d(),z&&z.d(),K&&K.d(),N&&N.d(),F=!1,He(B)}}}function $n(t){let e,l,n,s,a,i;function f(...u){return t[110](t[162],...u)}return{c(){e=v("th"),l=v("input"),this.h()},l(u){e=b(u,"TH",{style:!0});var d=S(e);l=b(d,"INPUT",{type:!0,placeholder:!0}),d.forEach(c),this.h()},h(){r(l,"type","text"),r(l,"placeholder","Filter"),l.value=n=t[20][t[162].name]??"",r(e,"style",s=t[75](t[162]))},m(u,d){H(u,e,d),o(e,l),a||(i=[J(l,"input",f),J(l,"change",t[70]),J(l,"keydown",t[111])],a=!0)},p(u,d){t=u,d[0]&9437184&&n!==(n=t[20][t[162].name]??"")&&l.value!==n&&(l.value=n),d[0]&8388608&&s!==(s=t[75](t[162]))&&r(e,"style",s)},d(u){u&&c(e),a=!1,He(i)}}}function vr(t){let e,l,n,s,a,i,f,u,d,h,g,m,p,y,E,C,V=t[165]?"⚠":"",j,O,T,w,P,F,B,A;function M(...N){return t[121](t[159],t[162],...N)}let z=t[169]&&t[159].isNew&&ss(t);function K(){return t[123](t[159],t[162])}return{c(){e=v("td"),l=v("div"),n=v("input"),h=R(),z&&z.c(),g=R(),m=v("button"),p=X("📝"),E=R(),C=v("span"),j=X(V),this.h()},l(N){e=b(N,"TD",{class:!0,style:!0});var I=S(e);l=b(I,"DIV",{class:!0});var Q=S(l);n=b(Q,"INPUT",{type:!0,inputmode:!0,pattern:!0,class:!0,"aria-invalid":!0,"aria-describedby":!0}),h=U(Q),z&&z.l(Q),g=U(Q),m=b(Q,"BUTTON",{type:!0,class:!0,title:!0});var te=S(m);p=G(te,"📝"),te.forEach(c),E=U(Q),C=b(Q,"SPAN",{id:!0,class:!0,role:!0,"aria-hidden":!0,title:!0});var ne=S(C);j=G(ne,V),ne.forEach(c),Q.forEach(c),I.forEach(c),this.h()},h(){r(n,"type","text"),r(n,"inputmode",s=Yl(t[162].type)?"numeric":Zl(t[162].type)?"decimal":void 0),r(n,"pattern",a=Yl(t[162].type)?"\\d*":Zl(t[162].type)?"[-+]?\\d*(\\.\\d+)?":void 0),n.value=i=dt(t[159].current[t[162].name],t[162]),n.disabled=f=t[159].deleted,r(n,"class","cell-input"),r(n,"aria-invalid",u=t[165]?"true":"false"),r(n,"aria-describedby",d=t[165]?be(t[159].id,t[162].name):void 0),r(m,"type","button"),r(m,"class","ps-btn ps-btn--icon text-expand-button"),m.disabled=y=t[159].deleted,r(m,"title","Expand text editor"),r(C,"id",O=be(t[159].id,t[162].name)),r(C,"class","cell-error"),r(C,"role","img"),r(C,"aria-hidden",T=!t[165]),r(C,"title",w=t[165]),r(l,"class","cell-edit"),r(e,"class",P=rt("cell",{modified:at(t[159],t[162])})),r(e,"style",F=t[75](t[162]))},m(N,I){H(N,e,I),o(e,l),o(l,n),o(l,h),z&&z.m(l,null),o(l,g),o(l,m),o(m,p),o(l,E),o(l,C),o(C,j),B||(A=[J(n,"input",M),J(m,"click",K)],B=!0)},p(N,I){t=N,I[0]&8388608&&s!==(s=Yl(t[162].type)?"numeric":Zl(t[162].type)?"decimal":void 0)&&r(n,"inputmode",s),I[0]&8388608&&a!==(a=Yl(t[162].type)?"\\d*":Zl(t[162].type)?"[-+]?\\d*(\\.\\d+)?":void 0)&&r(n,"pattern",a),I[0]&8388610&&i!==(i=dt(t[159].current[t[162].name],t[162]))&&n.value!==i&&(n.value=i),I[0]&8388610&&f!==(f=t[159].deleted)&&(n.disabled=f),I[0]&8388610&&u!==(u=t[165]?"true":"false")&&r(n,"aria-invalid",u),I[0]&8388610&&d!==(d=t[165]?be(t[159].id,t[162].name):void 0)&&r(n,"aria-describedby",d),t[169]&&t[159].isNew?z?z.p(t,I):(z=ss(t),z.c(),z.m(l,g)):z&&(z.d(1),z=null),I[0]&8388610&&y!==(y=t[159].deleted)&&(m.disabled=y),I[0]&8388610&&V!==(V=t[165]?"⚠":"")&&se(j,V),I[0]&8388610&&O!==(O=be(t[159].id,t[162].name))&&r(C,"id",O),I[0]&8388610&&T!==(T=!t[165])&&r(C,"aria-hidden",T),I[0]&8388610&&w!==(w=t[165])&&r(C,"title",w),I[0]&8388610&&P!==(P=rt("cell",{modified:at(t[159],t[162])}))&&r(e,"class",P),I[0]&8388608&&F!==(F=t[75](t[162]))&&r(e,"style",F)},d(N){N&&c(e),z&&z.d(),B=!1,He(A)}}}function xn(t){let e,l,n,s,a,i,f,u,d,h,g,m,p,y=t[165]?"⚠":"",E,C,V,j,O,T,w,P;function F(...A){return t[119](t[159],t[162],...A)}function B(){return t[120](t[159],t[162])}return{c(){e=v("td"),l=v("div"),n=v("input"),u=R(),d=v("button"),h=X("📅"),m=R(),p=v("span"),E=X(y),this.h()},l(A){e=b(A,"TD",{class:!0,style:!0});var M=S(e);l=b(M,"DIV",{class:!0});var z=S(l);n=b(z,"INPUT",{type:!0,class:!0,"aria-invalid":!0,"aria-describedby":!0,placeholder:!0}),u=U(z),d=b(z,"BUTTON",{type:!0,class:!0,title:!0});var K=S(d);h=G(K,"📅"),K.forEach(c),m=U(z),p=b(z,"SPAN",{id:!0,class:!0,role:!0,"aria-hidden":!0,title:!0});var N=S(p);E=G(N,y),N.forEach(c),z.forEach(c),M.forEach(c),this.h()},h(){r(n,"type","text"),n.value=s=dt(t[159].current[t[162].name],t[162]),n.disabled=a=t[159].deleted,r(n,"class","cell-input"),r(n,"aria-invalid",i=t[165]?"true":"false"),r(n,"aria-describedby",f=t[165]?be(t[159].id,t[162].name):void 0),r(n,"placeholder","Enter date/time or click..."),r(d,"type","button"),r(d,"class","ps-btn ps-btn--icon text-expand-button"),d.disabled=g=t[159].deleted,r(d,"title","Open date/time picker"),r(p,"id",C=be(t[159].id,t[162].name)),r(p,"class","cell-error"),r(p,"role","img"),r(p,"aria-hidden",V=!t[165]),r(p,"title",j=t[165]),r(l,"class","cell-edit"),r(e,"class",O=rt("cell",{modified:at(t[159],t[162])})),r(e,"style",T=t[75](t[162]))},m(A,M){H(A,e,M),o(e,l),o(l,n),o(l,u),o(l,d),o(d,h),o(l,m),o(l,p),o(p,E),w||(P=[J(n,"input",F),J(d,"click",B)],w=!0)},p(A,M){t=A,M[0]&8388610&&s!==(s=dt(t[159].current[t[162].name],t[162]))&&n.value!==s&&(n.value=s),M[0]&8388610&&a!==(a=t[159].deleted)&&(n.disabled=a),M[0]&8388610&&i!==(i=t[165]?"true":"false")&&r(n,"aria-invalid",i),M[0]&8388610&&f!==(f=t[165]?be(t[159].id,t[162].name):void 0)&&r(n,"aria-describedby",f),M[0]&8388610&&g!==(g=t[159].deleted)&&(d.disabled=g),M[0]&8388610&&y!==(y=t[165]?"⚠":"")&&se(E,y),M[0]&8388610&&C!==(C=be(t[159].id,t[162].name))&&r(p,"id",C),M[0]&8388610&&V!==(V=!t[165])&&r(p,"aria-hidden",V),M[0]&8388610&&j!==(j=t[165])&&r(p,"title",j),M[0]&8388610&&O!==(O=rt("cell",{modified:at(t[159],t[162])}))&&r(e,"class",O),M[0]&8388608&&T!==(T=t[75](t[162]))&&r(e,"style",T)},d(A){A&&c(e),w=!1,He(P)}}}function es(t){let e,l,n,s,a,i,f,u,d,h,g,m,p,y=t[165]?"⚠":"",E,C,V,j,O,T,w,P;function F(...A){return t[117](t[159],t[162],...A)}function B(){return t[118](t[159],t[162])}return{c(){e=v("td"),l=v("div"),n=v("input"),u=R(),d=v("button"),h=X("🔗"),m=R(),p=v("span"),E=X(y),this.h()},l(A){e=b(A,"TD",{class:!0,style:!0});var M=S(e);l=b(M,"DIV",{class:!0});var z=S(l);n=b(z,"INPUT",{type:!0,class:!0,"aria-invalid":!0,"aria-describedby":!0,placeholder:!0}),u=U(z),d=b(z,"BUTTON",{type:!0,class:!0,title:!0});var K=S(d);h=G(K,"🔗"),K.forEach(c),m=U(z),p=b(z,"SPAN",{id:!0,class:!0,role:!0,"aria-hidden":!0,title:!0});var N=S(p);E=G(N,y),N.forEach(c),z.forEach(c),M.forEach(c),this.h()},h(){r(n,"type","text"),n.value=s=dt(t[159].current[t[162].name],t[162]),n.disabled=a=t[159].deleted,r(n,"class","cell-input"),r(n,"aria-invalid",i=t[165]?"true":"false"),r(n,"aria-describedby",f=t[165]?be(t[159].id,t[162].name):void 0),r(n,"placeholder","Enter FK value or click..."),r(d,"type","button"),r(d,"class","ps-btn ps-btn--icon text-expand-button"),d.disabled=g=t[159].deleted,r(d,"title","Browse and select from referenced table"),r(p,"id",C=be(t[159].id,t[162].name)),r(p,"class","cell-error"),r(p,"role","img"),r(p,"aria-hidden",V=!t[165]),r(p,"title",j=t[165]),r(l,"class","cell-edit"),r(e,"class",O=rt("cell",{modified:at(t[159],t[162])})),r(e,"style",T=t[75](t[162]))},m(A,M){H(A,e,M),o(e,l),o(l,n),o(l,u),o(l,d),o(d,h),o(l,m),o(l,p),o(p,E),w||(P=[J(n,"input",F),J(d,"click",B)],w=!0)},p(A,M){t=A,M[0]&8388610&&s!==(s=dt(t[159].current[t[162].name],t[162]))&&n.value!==s&&(n.value=s),M[0]&8388610&&a!==(a=t[159].deleted)&&(n.disabled=a),M[0]&8388610&&i!==(i=t[165]?"true":"false")&&r(n,"aria-invalid",i),M[0]&8388610&&f!==(f=t[165]?be(t[159].id,t[162].name):void 0)&&r(n,"aria-describedby",f),M[0]&8388610&&g!==(g=t[159].deleted)&&(d.disabled=g),M[0]&8388610&&y!==(y=t[165]?"⚠":"")&&se(E,y),M[0]&8388610&&C!==(C=be(t[159].id,t[162].name))&&r(p,"id",C),M[0]&8388610&&V!==(V=!t[165])&&r(p,"aria-hidden",V),M[0]&8388610&&j!==(j=t[165])&&r(p,"title",j),M[0]&8388610&&O!==(O=rt("cell",{modified:at(t[159],t[162])}))&&r(e,"class",O),M[0]&8388608&&T!==(T=t[75](t[162]))&&r(e,"style",T)},d(A){A&&c(e),w=!1,He(P)}}}function ts(t){let e,l,n,s,a,i,f,u=t[165]?"⚠":"",d,h,g,m,p,y,E,C;function V(w,P){return P[0]&8388610&&(n=null),w[159].current[w[162].name]===null?yr:(n==null&&(n=dt(w[159].current[w[162].name],w[162]).length>80),n?kr:gr)}let j=V(t,[-1,-1,-1,-1,-1,-1]),O=j(t);function T(){return t[116](t[159],t[162])}return{c(){e=v("td"),l=v("button"),O.c(),i=R(),f=v("span"),d=X(u),this.h()},l(w){e=b(w,"TD",{class:!0,style:!0});var P=S(e);l=b(P,"BUTTON",{type:!0,class:!0,"aria-describedby":!0});var F=S(l);O.l(F),F.forEach(c),i=U(P),f=b(P,"SPAN",{id:!0,class:!0,role:!0,"aria-hidden":!0,title:!0});var B=S(f);d=G(B,u),B.forEach(c),P.forEach(c),this.h()},h(){r(l,"type","button"),r(l,"class","ps-btn ps-btn--ghost json-button"),l.disabled=s=t[159].deleted,r(l,"aria-describedby",a=t[165]?be(t[159].id,t[162].name):void 0),r(f,"id",h=be(t[159].id,t[162].name)),r(f,"class","cell-error"),r(f,"role","img"),r(f,"aria-hidden",g=!t[165]),r(f,"title",m=t[165]),r(e,"class",p=rt("cell json",{modified:at(t[159],t[162]),"cell-error-state":t[165]})),r(e,"style",y=t[75](t[162]))},m(w,P){H(w,e,P),o(e,l),O.m(l,null),o(e,i),o(e,f),o(f,d),E||(C=J(l,"click",T),E=!0)},p(w,P){t=w,j===(j=V(t,P))&&O?O.p(t,P):(O.d(1),O=j(t),O&&(O.c(),O.m(l,null))),P[0]&8388610&&s!==(s=t[159].deleted)&&(l.disabled=s),P[0]&8388610&&a!==(a=t[165]?be(t[159].id,t[162].name):void 0)&&r(l,"aria-describedby",a),P[0]&8388610&&u!==(u=t[165]?"⚠":"")&&se(d,u),P[0]&8388610&&h!==(h=be(t[159].id,t[162].name))&&r(f,"id",h),P[0]&8388610&&g!==(g=!t[165])&&r(f,"aria-hidden",g),P[0]&8388610&&m!==(m=t[165])&&r(f,"title",m),P[0]&8388610&&p!==(p=rt("cell json",{modified:at(t[159],t[162]),"cell-error-state":t[165]}))&&r(e,"class",p),P[0]&8388608&&y!==(y=t[75](t[162]))&&r(e,"style",y)},d(w){w&&c(e),O.d(),E=!1,C()}}}function ls(t){let e,l,n,s,a,i,f,u,d=t[165]?"⚠":"",h,g,m,p,y,E,C,V;function j(...O){return t[115](t[159],t[162],...O)}return{c(){e=v("td"),l=v("input"),f=R(),u=v("span"),h=X(d),this.h()},l(O){e=b(O,"TD",{class:!0,style:!0});var T=S(e);l=b(T,"INPUT",{type:!0,"aria-invalid":!0,"aria-describedby":!0}),f=U(T),u=b(T,"SPAN",{id:!0,class:!0,role:!0,"aria-hidden":!0,title:!0});var w=S(u);h=G(w,d),w.forEach(c),T.forEach(c),this.h()},h(){r(l,"type","checkbox"),l.checked=n=!!t[159].current[t[162].name],l.disabled=s=t[159].deleted,r(l,"aria-invalid",a=t[165]?"true":"false"),r(l,"aria-describedby",i=t[165]?be(t[159].id,t[162].name):void 0),r(u,"id",g=be(t[159].id,t[162].name)),r(u,"class","cell-error"),r(u,"role","img"),r(u,"aria-hidden",m=!t[165]),r(u,"title",p=t[165]),r(e,"class",y=rt("cell",{modified:at(t[159],t[162])})),r(e,"style",E=t[75](t[162]))},m(O,T){H(O,e,T),o(e,l),o(e,f),o(e,u),o(u,h),C||(V=J(l,"change",j),C=!0)},p(O,T){t=O,T[0]&8388610&&n!==(n=!!t[159].current[t[162].name])&&(l.checked=n),T[0]&8388610&&s!==(s=t[159].deleted)&&(l.disabled=s),T[0]&8388610&&a!==(a=t[165]?"true":"false")&&r(l,"aria-invalid",a),T[0]&8388610&&i!==(i=t[165]?be(t[159].id,t[162].name):void 0)&&r(l,"aria-describedby",i),T[0]&8388610&&d!==(d=t[165]?"⚠":"")&&se(h,d),T[0]&8388610&&g!==(g=be(t[159].id,t[162].name))&&r(u,"id",g),T[0]&8388610&&m!==(m=!t[165])&&r(u,"aria-hidden",m),T[0]&8388610&&p!==(p=t[165])&&r(u,"title",p),T[0]&8388610&&y!==(y=rt("cell",{modified:at(t[159],t[162])}))&&r(e,"class",y),T[0]&8388608&&E!==(E=t[75](t[162]))&&r(e,"style",E)},d(O){O&&c(e),C=!1,V()}}}function ns(t){let e,l,n,s="NULL",a,i,f,u,d,h,g=t[165]?"⚠":"",m,p,y,E,C,V,j,O,T=me(t[162].enumValues),w=[];for(let F=0;F<T.length;F+=1)w[F]=rs(Vn(t,T,F));function P(...F){return t[114](t[159],t[162],...F)}return{c(){e=v("td"),l=v("select"),n=v("option"),n.textContent=s;for(let F=0;F<w.length;F+=1)w[F].c();d=R(),h=v("span"),m=X(g),this.h()},l(F){e=b(F,"TD",{class:!0,style:!0});var B=S(e);l=b(B,"SELECT",{"aria-invalid":!0,"aria-describedby":!0});var A=S(l);n=b(A,"OPTION",{"data-svelte-h":!0}),ee(n)!=="svelte-1ihpddp"&&(n.textContent=s);for(let z=0;z<w.length;z+=1)w[z].l(A);A.forEach(c),d=U(B),h=b(B,"SPAN",{id:!0,class:!0,role:!0,"aria-hidden":!0,title:!0});var M=S(h);m=G(M,g),M.forEach(c),B.forEach(c),this.h()},h(){n.__value="",Ye(n,n.__value),l.disabled=a=t[159].deleted,r(l,"aria-invalid",f=t[165]?"true":"false"),r(l,"aria-describedby",u=t[165]?be(t[159].id,t[162].name):void 0),r(h,"id",p=be(t[159].id,t[162].name)),r(h,"class","cell-error"),r(h,"role","img"),r(h,"aria-hidden",y=!t[165]),r(h,"title",E=t[165]),r(e,"class",C=rt("cell",{modified:at(t[159],t[162])})),r(e,"style",V=t[75](t[162]))},m(F,B){H(F,e,B),o(e,l),o(l,n);for(let A=0;A<w.length;A+=1)w[A]&&w[A].m(l,null);an(l,t[159].current[t[162].name]??""),o(e,d),o(e,h),o(h,m),j||(O=J(l,"change",P),j=!0)},p(F,B){if(t=F,B[0]&8388608){T=me(t[162].enumValues);let A;for(A=0;A<T.length;A+=1){const M=Vn(t,T,A);w[A]?w[A].p(M,B):(w[A]=rs(M),w[A].c(),w[A].m(l,null))}for(;A<w.length;A+=1)w[A].d(1);w.length=T.length}B[0]&8388610&&a!==(a=t[159].deleted)&&(l.disabled=a),B[0]&8388610&&i!==(i=t[159].current[t[162].name]??"")&&an(l,t[159].current[t[162].name]??""),B[0]&8388610&&f!==(f=t[165]?"true":"false")&&r(l,"aria-invalid",f),B[0]&8388610&&u!==(u=t[165]?be(t[159].id,t[162].name):void 0)&&r(l,"aria-describedby",u),B[0]&8388610&&g!==(g=t[165]?"⚠":"")&&se(m,g),B[0]&8388610&&p!==(p=be(t[159].id,t[162].name))&&r(h,"id",p),B[0]&8388610&&y!==(y=!t[165])&&r(h,"aria-hidden",y),B[0]&8388610&&E!==(E=t[165])&&r(h,"title",E),B[0]&8388610&&C!==(C=rt("cell",{modified:at(t[159],t[162])}))&&r(e,"class",C),B[0]&8388608&&V!==(V=t[75](t[162]))&&r(e,"style",V)},d(F){F&&c(e),xt(w,F),j=!1,O()}}}function ss(t){let e,l,n,s,a;function i(){return t[122](t[159],t[162])}return{c(){e=v("button"),l=X("🎲"),this.h()},l(f){e=b(f,"BUTTON",{type:!0,class:!0,title:!0});var u=S(e);l=G(u,"🎲"),u.forEach(c),this.h()},h(){r(e,"type","button"),r(e,"class","ps-btn ps-btn--icon text-expand-button"),e.disabled=n=t[159].deleted,r(e,"title","Generate random UUID")},m(f,u){H(f,e,u),o(e,l),s||(a=J(e,"click",i),s=!0)},p(f,u){t=f,u[0]&8388610&&n!==(n=t[159].deleted)&&(e.disabled=n)},d(f){f&&c(e),s=!1,a()}}}function gr(t){let e=dt(t[159].current[t[162].name],t[162])+"",l;return{c(){l=X(e)},l(n){l=G(n,e)},m(n,s){H(n,l,s)},p(n,s){s[0]&8388610&&e!==(e=dt(n[159].current[n[162].name],n[162])+"")&&se(l,e)},d(n){n&&c(l)}}}function kr(t){let e=dt(t[159].current[t[162].name],t[162]).slice(0,80)+"",l,n;return{c(){l=X(e),n=X("…")},l(s){l=G(s,e),n=G(s,"…")},m(s,a){H(s,l,a),H(s,n,a)},p(s,a){a[0]&8388610&&e!==(e=dt(s[159].current[s[162].name],s[162]).slice(0,80)+"")&&se(l,e)},d(s){s&&(c(l),c(n))}}}function yr(t){let e,l="NULL";return{c(){e=v("span"),e.textContent=l,this.h()},l(n){e=b(n,"SPAN",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1c7a5rh"&&(e.textContent=l),this.h()},h(){r(e,"class","null")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function rs(t){let e,l=t[166]+"",n,s;return{c(){e=v("option"),n=X(l),this.h()},l(a){e=b(a,"OPTION",{});var i=S(e);n=G(i,l),i.forEach(c),this.h()},h(){e.__value=s=t[166],Ye(e,e.__value)},m(a,i){H(a,e,i),o(e,n)},p(a,i){i[0]&8388608&&l!==(l=a[166]+"")&&se(n,l),i[0]&8388608&&s!==(s=a[166])&&(e.__value=s,Ye(e,e.__value))},d(a){a&&c(e)}}}function as(t){let e,l,n,s;function a(d,h){return h[0]&8388608&&(e=null),h[0]&8388608&&(l=null),h[0]&8388608&&(n=null),e==null&&(e=!!(d[162].enumValues&&d[162].enumValues.length>0&&!String(d[162].type).endsWith("[]"))),e?ns:d[162].type==="boolean"||d[162].type==="bool"?ls:(l==null&&(l=!!(d[162].type==="json"||d[162].type==="jsonb"||String(d[162].type).endsWith("[]"))),l?ts:d[162].foreignKey?es:(n==null&&(n=!!/timestamp|date|time/i.test(d[162].type)),n?xn:vr))}function i(d,h){return h===ns?pr(d):h===ls?hr(d):h===ts?dr(d):h===es?cr(d):h===xn?fr(d):ur(d)}let f=a(t,[-1,-1,-1,-1,-1,-1]),u=f(i(t,f));return{c(){u.c(),s=gt()},l(d){u.l(d),s=gt()},m(d,h){u.m(d,h),H(d,s,h)},p(d,h){f===(f=a(d,h))&&u?u.p(i(d,f),h):(u.d(1),u=f(i(d,f)),u&&(u.c(),u.m(s.parentNode,s)))},d(d){d&&c(s),u.d(d)}}}function os(t){let e,l="Restore",n,s;function a(){return t[124](t[159])}return{c(){e=v("button"),e.textContent=l,this.h()},l(i){e=b(i,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1laf8hu"&&(e.textContent=l),this.h()},h(){r(e,"type","button"),r(e,"class","ps-btn ps-btn--ghost")},m(i,f){H(i,e,f),n||(s=J(e,"click",a),n=!0)},p(i,f){t=i},d(i){i&&c(e),n=!1,s()}}}function is(t,e){let l,n,s,a,i,f,u,d,h,g,m;function p(...j){return e[112](e[159],...j)}function y(...j){return e[113](e[159],...j)}let E=me(e[23]),C=[];for(let j=0;j<E.length;j+=1)C[j]=as(Mn(e,E,j));let V=e[159].deleted&&os(e);return{key:t,first:null,c(){l=v("tr"),n=v("td"),s=v("input"),f=R();for(let j=0;j<C.length;j+=1)C[j].c();u=R(),d=v("td"),V&&V.c(),this.h()},l(j){l=b(j,"TR",{class:!0});var O=S(l);n=b(O,"TD",{class:!0});var T=S(n);s=b(T,"INPUT",{type:!0,title:!0}),T.forEach(c),f=U(O);for(let P=0;P<C.length;P+=1)C[P].l(O);u=U(O),d=b(O,"TD",{class:!0});var w=S(d);V&&V.l(w),w.forEach(c),O.forEach(c),this.h()},h(){r(s,"type","checkbox"),s.checked=a=e[159].selected,s.disabled=i=e[159].deleted,r(s,"title","Click to select, Shift+Click to select a range"),r(n,"class","select-cell"),r(d,"class","row-actions"),r(l,"class",h=rt({deleted:e[159].deleted,modified:e[45](e[159])})),this.first=l},m(j,O){H(j,l,O),o(l,n),o(n,s),o(l,f);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(l,null);o(l,u),o(l,d),V&&V.m(d,null),g||(m=[J(s,"change",p),J(s,"click",y)],g=!0)},p(j,O){if(e=j,O[0]&8388610&&a!==(a=e[159].selected)&&(s.checked=a),O[0]&8388610&&i!==(i=e[159].deleted)&&(s.disabled=i),O[0]&8388642|O[1]&199229440|O[2]&8201){E=me(e[23]);let T;for(T=0;T<E.length;T+=1){const w=Mn(e,E,T);C[T]?C[T].p(w,O):(C[T]=as(w),C[T].c(),C[T].m(l,u))}for(;T<C.length;T+=1)C[T].d(1);C.length=E.length}e[159].deleted?V?V.p(e,O):(V=os(e),V.c(),V.m(d,null)):V&&(V.d(1),V=null),O[0]&8388610&&h!==(h=rt({deleted:e[159].deleted,modified:e[45](e[159])}))&&r(l,"class",h)},d(j){j&&c(l),xt(C,j),V&&V.d(),g=!1,He(m)}}}function us(t){let e,l,n,s;return{c(){e=v("tr"),l=v("td"),n=X("No rows in this page."),this.h()},l(a){e=b(a,"TR",{});var i=S(e);l=b(i,"TD",{class:!0,colspan:!0});var f=S(l);n=G(f,"No rows in this page."),f.forEach(c),i.forEach(c),this.h()},h(){r(l,"class","empty"),r(l,"colspan",s=t[23].length+2)},m(a,i){H(a,e,i),o(e,l),o(l,n)},p(a,i){i[0]&8388608&&s!==(s=a[23].length+2)&&r(l,"colspan",s)},d(a){a&&c(e)}}}function fs(t){let e,l;return{c(){e=v("div"),l=X(t[14]),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=S(e);l=G(s,t[14]),s.forEach(c),this.h()},h(){r(e,"class","message success")},m(n,s){H(n,e,s),o(e,l)},p(n,s){s[0]&16384&&se(l,n[14])},d(n){n&&c(e)}}}function cs(t){let e,l;return{c(){e=v("div"),l=X(t[15]),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=S(e);l=G(s,t[15]),s.forEach(c),this.h()},h(){r(e,"class","message error")},m(n,s){H(n,e,s),o(e,l)},p(n,s){s[0]&32768&&se(l,n[15])},d(n){n&&c(e)}}}function ds(t){let e,l,n;return l=new Vl({props:{ariaLabel:"SQL Preview",$$slots:{default:[Sr]},$$scope:{ctx:t}}}),l.$on("escapepressed",t[79]),{c(){e=v("div"),Dt(l.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=S(e);Ot(l.$$.fragment,a),a.forEach(c),this.h()},h(){r(e,"class","modal-backdrop")},m(s,a){H(s,e,a),Nt(l,e,null),n=!0},p(s,a){const i={};a[0]&2176e3|a[1]&4096|a[5]&2097152&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){n||(ae(l.$$.fragment,s),n=!0)},o(s){ue(l.$$.fragment,s),n=!1},d(s){s&&c(e),St(l)}}}function Er(t){let e,l="No SQL changes to display.";return{c(){e=v("p"),e.textContent=l,this.h()},l(n){e=b(n,"P",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1yc3dw9"&&(e.textContent=l),this.h()},h(){r(e,"class","preview-status")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function Cr(t){let e,l;return{c(){e=v("pre"),l=X(t[10]),this.h()},l(n){e=b(n,"PRE",{class:!0});var s=S(e);l=G(s,t[10]),s.forEach(c),this.h()},h(){r(e,"class","sql-preview")},m(n,s){H(n,e,s),o(e,l)},p(n,s){s[0]&1024&&se(l,n[10])},d(n){n&&c(e)}}}function wr(t){let e,l,n="Error generating SQL",s,a,i,f,u,d;return{c(){e=v("div"),l=v("strong"),l.textContent=n,s=R(),a=v("p"),i=X(t[10]),f=R(),u=v("pre"),d=X(t[10]),this.h()},l(h){e=b(h,"DIV",{class:!0,role:!0,"aria-live":!0});var g=S(e);l=b(g,"STRONG",{"data-svelte-h":!0}),ee(l)!=="svelte-1r1ps6q"&&(l.textContent=n),s=U(g),a=b(g,"P",{class:!0});var m=S(a);i=G(m,t[10]),m.forEach(c),g.forEach(c),f=U(h),u=b(h,"PRE",{class:!0});var p=S(u);d=G(p,t[10]),p.forEach(c),this.h()},h(){r(a,"class","sql-error-msg"),r(e,"class","sql-error-banner"),r(e,"role","alert"),r(e,"aria-live","polite"),r(u,"class","sql-preview")},m(h,g){H(h,e,g),o(e,l),o(e,s),o(e,a),o(a,i),H(h,f,g),H(h,u,g),o(u,d)},p(h,g){g[0]&1024&&se(i,h[10]),g[0]&1024&&se(d,h[10])},d(h){h&&(c(e),c(f),c(u))}}}function Tr(t){let e,l="Generating SQL preview…";return{c(){e=v("p"),e.textContent=l,this.h()},l(n){e=b(n,"P",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-ntllly"&&(e.textContent=l),this.h()},h(){r(e,"class","preview-status")},m(n,s){H(n,e,s)},p:Xe,d(n){n&&c(e)}}}function Sr(t){let e,l,n='<h3 id="sql-preview-heading">SQL Preview</h3>',s,a,i,f,u,d="Cancel",h,g,m,p,y,E,C,V,j,O,T;function w(B,A){return B[13]?Tr:B[12]?wr:B[10]?Cr:Er}let P=w(t),F=P(t);return{c(){e=v("div"),l=v("header"),l.innerHTML=n,s=R(),a=v("div"),F.c(),i=R(),f=v("footer"),u=v("button"),u.textContent=d,h=R(),g=v("button"),m=X("📋 Copy to Clipboard"),y=R(),E=v("button"),C=X("Execute"),this.h()},l(B){e=b(B,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var A=S(e);l=b(A,"HEADER",{class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-9t6ktd"&&(l.innerHTML=n),s=U(A),a=b(A,"DIV",{id:!0,class:!0});var M=S(a);F.l(M),M.forEach(c),i=U(A),f=b(A,"FOOTER",{class:!0,role:!0});var z=S(f);u=b(z,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(u)!=="svelte-3jvaz0"&&(u.textContent=d),h=U(z),g=b(z,"BUTTON",{type:!0,class:!0,title:!0});var K=S(g);m=G(K,"📋 Copy to Clipboard"),K.forEach(c),y=U(z),E=b(z,"BUTTON",{type:!0,class:!0,title:!0});var N=S(E);C=G(N,"Execute"),N.forEach(c),z.forEach(c),A.forEach(c),this.h()},h(){r(l,"class","modal-header"),r(a,"id","sql-preview-content"),r(a,"class","modal-body"),r(u,"type","button"),r(u,"class","ps-btn ps-btn--ghost"),r(u,"title","Close preview (Escape)"),r(g,"type","button"),r(g,"class","ps-btn ps-btn--ghost"),g.disabled=p=t[16]||t[13]||!t[10],r(g,"title","Copy SQL to clipboard"),r(E,"type","button"),r(E,"class","ps-btn ps-btn--accent"),E.disabled=V=t[16]||t[13]||t[43]&&!t[21],r(E,"title",j=t[43]&&!t[21]?"Fix validation errors before executing":"Execute changes (Enter)"),r(f,"class","modal-actions"),r(f,"role","group"),r(e,"class","modal dialog preview-modal"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","sql-preview-heading"),r(e,"aria-describedby","sql-preview-content")},m(B,A){H(B,e,A),o(e,l),o(e,s),o(e,a),F.m(a,null),o(e,i),o(e,f),o(f,u),o(f,h),o(f,g),o(g,m),o(f,y),o(f,E),o(E,C),O||(T=[J(u,"click",t[79]),J(g,"click",t[80]),J(E,"click",t[81])],O=!0)},p(B,A){P===(P=w(B))&&F?F.p(B,A):(F.d(1),F=P(B),F&&(F.c(),F.m(a,null))),A[0]&74752&&p!==(p=B[16]||B[13]||!B[10])&&(g.disabled=p),A[0]&2170880|A[1]&4096&&V!==(V=B[16]||B[13]||B[43]&&!B[21])&&(E.disabled=V),A[0]&2097152|A[1]&4096&&j!==(j=B[43]&&!B[21]?"Fix validation errors before executing":"Execute changes (Enter)")&&r(E,"title",j)},d(B){B&&c(e),F.d(),O=!1,He(T)}}}function hs(t){let e,l,n;return l=new Vl({props:{ariaLabel:"JSON Editor",$$slots:{default:[Nr]},$$scope:{ctx:t}}}),l.$on("escapepressed",t[57]),{c(){e=v("div"),Dt(l.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=S(e);Ot(l.$$.fragment,a),a.forEach(c),this.h()},h(){r(e,"class","modal-backdrop")},m(s,a){H(s,e,a),Nt(l,e,null),n=!0},p(s,a){const i={};a[0]&1610612736|a[1]&3|a[5]&2097152&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){n||(ae(l.$$.fragment,s),n=!0)},o(s){ue(l.$$.fragment,s),n=!1},d(s){s&&c(e),St(l)}}}function ps(t){let e,l,n=t[29].enumValues.join(", ")+"",s;return{c(){e=v("p"),l=X("Allowed values: "),s=X(n),this.h()},l(a){e=b(a,"P",{id:!0,class:!0});var i=S(e);l=G(i,"Allowed values: "),s=G(i,n),i.forEach(c),this.h()},h(){r(e,"id","json-editor-description"),r(e,"class","enum-hint")},m(a,i){H(a,e,i),o(e,l),o(e,s)},p(a,i){i[0]&536870912&&n!==(n=a[29].enumValues.join(", ")+"")&&se(s,n)},d(a){a&&c(e)}}}function _s(t){let e,l;return{c(){e=v("p"),l=X(t[31]),this.h()},l(n){e=b(n,"P",{id:!0,class:!0,role:!0});var s=S(e);l=G(s,t[31]),s.forEach(c),this.h()},h(){r(e,"id","json-error-message"),r(e,"class","error"),r(e,"role","alert")},m(n,s){H(n,e,s),o(e,l)},p(n,s){s[1]&1&&se(l,n[31])},d(n){n&&c(e)}}}function Nr(t){let e,l,n,s,a=t[29].name+"",i,f,u=gs(t[29])+"",d,h,g,m,p,y,E,C,V,j,O,T,w,P="Cancel",F,B,A="Save",M,z,K=t[29].enumValues&&t[29].enumValues.length>0&&ps(t),N=t[31]&&_s(t);return{c(){e=v("div"),l=v("header"),n=v("h3"),s=X("Edit "),i=X(a),f=X(" ("),d=X(u),h=X(")"),g=R(),K&&K.c(),m=R(),p=v("div"),y=v("textarea"),j=R(),N&&N.c(),O=R(),T=v("footer"),w=v("button"),w.textContent=P,F=R(),B=v("button"),B.textContent=A,this.h()},l(I){e=b(I,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var Q=S(e);l=b(Q,"HEADER",{class:!0});var te=S(l);n=b(te,"H3",{id:!0});var ne=S(n);s=G(ne,"Edit "),i=G(ne,a),f=G(ne," ("),d=G(ne,u),h=G(ne,")"),ne.forEach(c),g=U(te),K&&K.l(te),te.forEach(c),m=U(Q),p=b(Q,"DIV",{class:!0});var x=S(p);y=b(x,"TEXTAREA",{spellcheck:!0,class:!0,"aria-label":!0,"aria-describedby":!0,"aria-invalid":!0}),S(y).forEach(c),j=U(x),N&&N.l(x),x.forEach(c),O=U(Q),T=b(Q,"FOOTER",{class:!0,role:!0});var $=S(T);w=b($,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(w)!=="svelte-169ozbx"&&(w.textContent=P),F=U($),B=b($,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(B)!=="svelte-13tmr6u"&&(B.textContent=A),$.forEach(c),Q.forEach(c),this.h()},h(){r(n,"id","json-editor-heading"),r(l,"class","modal-header"),r(y,"spellcheck",!1),r(y,"class",E=t[31]?"invalid":""),r(y,"aria-label","JSON content editor"),r(y,"aria-describedby",C=t[31]?"json-error-message":void 0),r(y,"aria-invalid",V=t[31]?"true":"false"),r(p,"class","modal-body"),r(w,"type","button"),r(w,"class","ps-btn ps-btn--ghost"),r(w,"title","Close without saving (Escape)"),r(B,"type","button"),r(B,"class","ps-btn ps-btn--accent"),r(B,"title","Save changes (Enter or primary action)"),r(T,"class","modal-actions"),r(T,"role","group"),r(e,"class","modal dialog json-editor-modal"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","json-editor-heading"),r(e,"aria-describedby","json-editor-description")},m(I,Q){H(I,e,Q),o(e,l),o(l,n),o(n,s),o(n,i),o(n,f),o(n,d),o(n,h),o(l,g),K&&K.m(l,null),o(e,m),o(e,p),o(p,y),t[125](y),Ye(y,t[30]),o(p,j),N&&N.m(p,null),o(e,O),o(e,T),o(T,w),o(T,F),o(T,B),M||(z=[J(y,"input",t[126]),J(w,"click",t[57]),J(B,"click",t[61])],M=!0)},p(I,Q){Q[0]&536870912&&a!==(a=I[29].name+"")&&se(i,a),Q[0]&536870912&&u!==(u=gs(I[29])+"")&&se(d,u),I[29].enumValues&&I[29].enumValues.length>0?K?K.p(I,Q):(K=ps(I),K.c(),K.m(l,null)):K&&(K.d(1),K=null),Q[1]&1&&E!==(E=I[31]?"invalid":"")&&r(y,"class",E),Q[1]&1&&C!==(C=I[31]?"json-error-message":void 0)&&r(y,"aria-describedby",C),Q[1]&1&&V!==(V=I[31]?"true":"false")&&r(y,"aria-invalid",V),Q[0]&1073741824&&Ye(y,I[30]),I[31]?N?N.p(I,Q):(N=_s(I),N.c(),N.m(p,null)):N&&(N.d(1),N=null)},d(I){I&&c(e),K&&K.d(),t[125](null),N&&N.d(),M=!1,He(z)}}}function ms(t){let e,l,n;return l=new Vl({props:{ariaLabel:"Text Editor",$$slots:{default:[Or]},$$scope:{ctx:t}}}),l.$on("escapepressed",t[59]),{c(){e=v("div"),Dt(l.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=S(e);Ot(l.$$.fragment,a),a.forEach(c),this.h()},h(){r(e,"class","modal-backdrop")},m(s,a){H(s,e,a),Nt(l,e,null),n=!0},p(s,a){const i={};a[1]&112|a[5]&2097152&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){n||(ae(l.$$.fragment,s),n=!0)},o(s){ue(l.$$.fragment,s),n=!1},d(s){s&&c(e),St(l)}}}function Or(t){let e,l,n,s,a=t[35].name+"",i,f,u,d,h,g,m,p,y="Cancel",E,C,V="Save",j,O;return{c(){e=v("div"),l=v("header"),n=v("h3"),s=X("Edit "),i=X(a),f=X(" (Text)"),u=R(),d=v("div"),h=v("textarea"),g=R(),m=v("footer"),p=v("button"),p.textContent=y,E=R(),C=v("button"),C.textContent=V,this.h()},l(T){e=b(T,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var w=S(e);l=b(w,"HEADER",{class:!0});var P=S(l);n=b(P,"H3",{id:!0});var F=S(n);s=G(F,"Edit "),i=G(F,a),f=G(F," (Text)"),F.forEach(c),P.forEach(c),u=U(w),d=b(w,"DIV",{class:!0});var B=S(d);h=b(B,"TEXTAREA",{spellcheck:!0,"aria-label":!0}),S(h).forEach(c),B.forEach(c),g=U(w),m=b(w,"FOOTER",{class:!0,role:!0});var A=S(m);p=b(A,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(p)!=="svelte-v0m7e0"&&(p.textContent=y),E=U(A),C=b(A,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),ee(C)!=="svelte-1rlghq3"&&(C.textContent=V),A.forEach(c),w.forEach(c),this.h()},h(){r(n,"id","text-editor-heading"),r(l,"class","modal-header"),r(h,"spellcheck",!1),r(h,"aria-label","Text content editor"),r(d,"class","modal-body"),r(p,"type","button"),r(p,"class","ps-btn ps-btn--ghost"),r(p,"title","Close without saving (Escape)"),r(C,"type","button"),r(C,"class","ps-btn ps-btn--accent"),r(C,"title","Save changes (Enter or primary action)"),r(m,"class","modal-actions"),r(m,"role","group"),r(e,"class","modal dialog text-editor-modal"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","text-editor-heading")},m(T,w){H(T,e,w),o(e,l),o(l,n),o(n,s),o(n,i),o(n,f),o(e,u),o(e,d),o(d,h),t[127](h),Ye(h,t[36]),o(e,g),o(e,m),o(m,p),o(m,E),o(m,C),j||(O=[J(h,"input",t[128]),J(p,"click",t[59]),J(C,"click",t[60])],j=!0)},p(T,w){w[1]&16&&a!==(a=T[35].name+"")&&se(i,a),w[1]&32&&Ye(h,T[36])},d(T){T&&c(e),t[127](null),j=!1,He(O)}}}function Dr(t){let e,l=`body {
      background-color: var(--vscode-editor-background);
      color: var(--vscode-foreground);
    }`,n,s,a,i,f;const u=[mr,_r],d=[];function h(g,m){return g[17]?1:0}return s=h(t),a=d[s]=u[s](t),{c(){e=v("style"),e.textContent=l,n=R(),a.c(),i=gt()},l(g){const m=Ps("svelte-18qsyiv",Pn.head);e=b(m,"STYLE",{"data-svelte-h":!0}),ee(e)!=="svelte-1dgcfaq"&&(e.textContent=l),m.forEach(c),n=U(g),a.l(g),i=gt()},m(g,m){o(Pn.head,e),H(g,n,m),d[s].m(g,m),H(g,i,m),f=!0},p(g,m){let p=s;s=h(g),s===p?d[s].p(g,m):(Ut(),ue(d[p],1,1,()=>{d[p]=null}),Rt(),a=d[s],a?a.p(g,m):(a=d[s]=u[s](g),a.c()),ae(a,1),a.m(i.parentNode,i))},i(g){f||(ae(a),f=!0)},o(g){ue(a),f=!1},d(g){g&&(c(n),c(i)),c(e),d[s].d(g)}}}function Xl(t){return JSON.parse(JSON.stringify(t))}function Ir(t){return t?Array.isArray(t)?t:t.columns??[]:[]}function bs(t,e){if(t==null)return null;if(typeof t=="string"){const l=t.trim();if(l.toUpperCase()==="NULL")return null;if((e==="json"||e==="jsonb")&&l.length>0)try{return JSON.parse(l)}catch{return l}if(e.includes("int")||e==="bigint"||e==="smallint"){const n=Number.parseInt(l,10);return Number.isNaN(n)?l:n}if(e==="numeric"||e==="decimal"||e.includes("float")||e==="real"||e==="double precision"){const n=Number.parseFloat(l);return Number.isNaN(n)?l:n}return e==="boolean"||e==="bool"?l.toLowerCase()==="true"||l==="1":t}return e==="boolean"||e==="bool"?!!t:t}function be(t,e){const l=String(e).replace(/[^a-zA-Z0-9_-]/g,"_");return`cell-error-${t}-${l}`}function dt(t,e){if(t==null)return"";if(e.type==="json"||e.type==="jsonb")try{return JSON.stringify(t)}catch{return String(t)}if(String(e.type).endsWith("[]"))try{return JSON.stringify(t)}catch{return String(t)}return String(t)}function at(t,e){const l=t.original[e.name],n=t.current[e.name],s=e.type.startsWith("json")?JSON.stringify(l):l,a=e.type.startsWith("json")?JSON.stringify(n):n;return s!==a}function Ar(){const t=new Uint8Array(16);crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;const e=Array.from(t).map(l=>l.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}function vs(t,e){if(t==null||typeof t=="string"&&t.trim().length===0)return null;const l=String(e.type).replace(/\[\]$/,"").toLowerCase();if(l==="uuid")return typeof t=="string"&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)?"Invalid UUID format (expected: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)":null;if(l==="json"||l==="jsonb"){if(typeof t=="string")try{return JSON.parse(t),null}catch{return"Invalid JSON"}return null}if(l.includes("int")||l==="bigint"||l==="smallint"||l==="integer"){const n=String(t).trim();return/^-?\d+$/.test(n)?null:"Must be an integer"}if(l==="numeric"||l==="decimal"||l.includes("float")||l==="real"||l==="double precision"){const n=String(t).trim();return/^-?\d+(?:\.\d+)?$/.test(n)?null:"Must be a number"}return null}function gs(t){return t?t.type==="json"?"JSON":t.type==="jsonb"?"JSONB":String(t.type).endsWith("[]")?"Array":"JSON":""}const ks=t=>t,ys=t=>t.selected,Es=t=>!t;function Pr(t,e,l){let n,{vscode:s}=e,{initialState:a}=e,i="",f="",u=[],d=[],h=[],g=0,m=0,p=100,y="",E="",C=!1,V=!1,j=!1,O="",T="",w=!1,P=!1,F=!1,B=null,A={},M={},z=!1,K=new Set,N=[],I=!1,Q=new Map,te=!1;const ne=s&&typeof s.getState=="function"?s.getState():void 0;ne!=null&&ne.columnWidths&&(M={...ne.columnWidths});const x={};function $(_,k){let L=k;return L&&(x[L]=_),{update(q){L&&L!==q&&delete x[L],L=q??"",L&&(x[L]=_)},destroy(){L&&delete x[L]}}}let ce=null,ie=0,_e=0,Ie=null,ve=null,We="",fe=null,he=!1,re=null,pe=null,Ve="",Ne="",Ae=null,ht=!1,de=null,pt=null,Oe="",_t=null,el=!1,Fe=null,It=null,Bt=!1,wt=null,Ze=null,il="";function Ul(_){return d.length?d.map(k=>`${k}:${JSON.stringify(_[k])}`).join("|"):JSON.stringify(_)}function mt(_,k){const L={...M},q={};l(2,i=_.schemaName),l(3,f=_.tableName),l(4,u=_.columns??[]),Q=new Map(u.map(oe=>[oe.name,oe])),l(5,d=Ir(_.primaryKey));const Z=_.rows??[];l(1,h=Z.map((oe,Ge)=>{const Lt=Xl(oe),tt=Ul(Lt),ct=q[tt],Mt=Xl(ct?ct.current:oe),Gl={};for(const Vt of u)Gl[Vt.name]=vs(Mt[Vt.name],Vt);return{id:Ge+1,original:Lt,current:Mt,selected:!1,isNew:!1,deleted:(ct==null?void 0:ct.deleted)??!1,validation:Gl}})),l(6,g=_.currentPage??0),l(7,m=_.totalRows??Z.length),l(8,p=_.paginationSize??100),l(9,y=""),l(10,E=""),l(11,C=!1),l(13,j=!1),l(14,O=""),l(15,T=""),l(16,w=!1),l(18,F=h.length>0&&h.every(oe=>oe.deleted||oe.selected)),l(17,P=!0),l(19,B=_.sort??null),l(20,A={..._.filters??{}}),l(9,y=_.searchTerm??"");const le={};u.forEach(oe=>{const Ge=L[oe.name];typeof Ge=="number"&&Number.isFinite(Ge)&&Ge>0&&(le[oe.name]=Ge)}),M=le,Tt(),l(27,he=!1),l(28,re=null),l(29,pe=null),l(30,Ve=""),l(31,Ne="");const qe=_.tablePreferences??{};if(qe.columnOrder&&Array.isArray(qe.columnOrder)&&qe.columnOrder.length>0){const oe=qe.columnOrder,Ge=new Map(u.map(tt=>[tt.name,tt])),Lt=[];for(const tt of oe){const ct=Ge.get(tt);ct&&(Lt.push(ct),Ge.delete(tt))}for(const tt of u)Ge.has(tt.name)&&Lt.push(tt);l(4,u=Lt)}qe.hiddenColumns&&Array.isArray(qe.hiddenColumns)?l(22,K=new Set(qe.hiddenColumns)):l(22,K=new Set),l(23,N=u.filter(oe=>!K.has(oe.name)))}a&&typeof a=="object"&&mt(a);function xl(_){return _.isNew||_.deleted?!0:u.some(k=>at(_,k))}function ul(_,k){const q=k.target.checked;l(1,h=h.map(Z=>Z.id!==_.id?Z:{...Z,selected:q})),q?(l(18,F=h.every(Z=>Z.deleted||Z.selected)),fe=_.id,l(26,We=`Row ${_.id} selected`)):(l(18,F=!1),fe=null)}function tl(_,k){if(k.shiftKey&&fe!==null){k.preventDefault();const L=h.findIndex(Z=>Z.id===fe),q=h.findIndex(Z=>Z.id===_.id);if(L!==-1&&q!==-1){const[Z,le]=L<=q?[L,q]:[q,L],qe=le-Z+1;l(1,h=h.map((oe,Ge)=>Ge>=Z&&Ge<=le&&!oe.deleted?{...oe,selected:!0}:oe)),l(18,F=h.every(oe=>oe.deleted||oe.selected)),l(26,We=`Selected ${qe} rows from row ${Math.min(fe,_.id)} to row ${Math.max(fe,_.id)}`)}}}function fl(_){const L=_.target.checked;l(18,F=L),l(1,h=h.map(q=>q.deleted?q:{...q,selected:L}))}function cl(){const _={};u.forEach(k=>{_[k.name]=null}),l(1,h=[{id:Date.now(),original:Xl(_),current:Xl(_),selected:!1,isNew:!0,deleted:!1,validation:{}},...h])}function dl(){const _=[];for(const k of h){if(!k.selected){_.push(k);continue}k.isNew||_.push({...k,selected:!1,deleted:!0})}l(1,h=_),re&&!_.some(k=>k.id===(re==null?void 0:re.id))&&Ft(),l(18,F=!1)}function kt(_){l(1,h=h.map(k=>k.id!==_.id?k:{...k,deleted:!1,selected:!1}))}function Je(_,k,L){const q=h.map(Z=>{if(Z.id!==_.id||Z.deleted)return Z;let le;k.type==="boolean"||k.type==="bool"?le=!!L:le=L;const qe=vs(le,k);return{...Z,current:{...Z.current,[k.name]:le},validation:{...Z.validation??{},[k.name]:qe}}});l(1,h=q),re&&re.id===_.id&&l(28,re=q.find(Z=>Z.id===_.id)??null)}function nt(_,k,L){const q=L.target;Je(_,k,!!(q!=null&&q.checked))}function jt(_,k,L){const q=L.target;let Z=(q==null?void 0:q.value)??"";if(Yl(k.type)){const le=ar(Z);q&&(q.value=le),Je(_,k,le===""?null:le);return}if(Zl(k.type)){const le=or(Z);q&&(q.value=le),Je(_,k,le===""?null:le);return}Je(_,k,Z)}function bt(_,k,L){const q=L.target,Z=q?q.value:"";Je(_,k,Z===""?null:Z)}function Rl(_,k){l(27,he=!0),l(28,re=h.find(L=>L.id===_.id)??_),l(29,pe=k),l(30,Ve=dt(re.current[k.name],k)),l(31,Ne=""),setTimeout(()=>{Ae&&(Ae.focus(),Ae.select())},0)}function Ft(){l(27,he=!1),l(28,re=null),l(29,pe=null),l(30,Ve=""),l(31,Ne=""),l(32,Ae=null)}function $e(_,k){l(33,ht=!0),l(34,de=h.find(L=>L.id===_.id)??_),l(35,pt=k),l(36,Oe=dt(de.current[k.name],k)),setTimeout(()=>{_t&&(_t.focus(),_t.select())},0)}function ot(){l(33,ht=!1),l(34,de=null),l(35,pt=null),l(36,Oe=""),l(37,_t=null)}function Bl(){if(!de||!pt)return;const{name:_}=pt,k=h.map(L=>L.id!==(de==null?void 0:de.id)?L:{...L,current:{...L.current,[_]:Oe}});l(1,h=k),ot()}function hl(){if(!re||!pe)return;const{type:_,name:k}=pe;if(Ve.trim().length===0){const L=h.map(q=>q.id!==(re==null?void 0:re.id)?q:{...q,current:{...q.current,[k]:null}});l(1,h=L),Ft();return}try{const q=_==="json"||_==="jsonb"||String(_).endsWith("[]")?JSON.parse(Ve):Ve,Z=h.map(le=>le.id!==(re==null?void 0:re.id)?le:{...le,current:{...le.current,[k]:q}});l(1,h=Z),l(31,Ne=""),Ft()}catch(L){l(31,Ne=L instanceof Error?L.message:"Invalid JSON value")}}function pl(_,k){k.foreignKey&&(l(38,el=!0),Fe=h.find(L=>L.id===_.id)??_,l(39,It=k))}function yt(){l(38,el=!1),Fe=null,l(39,It=null)}function jl(_){if(!Fe||!It)return;const{name:k}=It,{value:L}=_.detail,q=h.map(Z=>Z.id!==(Fe==null?void 0:Fe.id)?Z:{...Z,current:{...Z.current,[k]:L}});l(1,h=q),yt()}function Kt(_,k){k.type&&/timestamp|date|time/i.test(k.type)&&(l(40,Bt=!0),wt=h.find(q=>q.id===_.id)??_,l(41,Ze=k),l(42,il=String(_.current[k.name]??"")))}function ll(){l(40,Bt=!1),wt=null,l(41,Ze=null),l(42,il="")}function Fl(_){if(!wt||!Ze)return;const{name:k}=Ze,L=h.map(q=>q.id!==(wt==null?void 0:wt.id)?q:{...q,current:{...q.current,[k]:_||null}});l(1,h=L),ll()}function nl(_){let k=null;!B||B.column!==_.name?k={column:_.name,direction:"asc"}:B.direction==="asc"?k={column:_.name,direction:"desc"}:k=null,l(19,B=k),ge().postMessage({command:"applySort",sort:k})}function Kl(_){return!B||B.column!==_.name?"":B.direction==="asc"?"▲":"▼"}function vt(_,k){l(20,A={...A,[_.name]:k})}function sl(){ge().postMessage({command:"applyFilters",filters:{...A}})}function Tt(){if(!s||typeof s.setState!="function")return;let _={};typeof s.getState=="function"&&(_=s.getState()??{}),s.setState({..._,columnWidths:M})}function At(_,k){M={...M,[_]:k};const L=x[_];L&&(L.style.width=`${k}px`,L.style.minWidth=`${k}px`,L.style.maxWidth=`${k}px`);const q=document.querySelector(".data-table");if(q){const Z=N.findIndex(le=>le.name===_);Z>=0&&(q.querySelectorAll(`thead th:nth-child(${Z+2})`).forEach(oe=>{oe instanceof HTMLElement&&(oe.style.width=`${k}px`,oe.style.minWidth=`${k}px`,oe.style.maxWidth=`${k}px`)}),q.querySelectorAll(`tbody td:nth-child(${Z+2})`).forEach(oe=>{oe instanceof HTMLElement&&(oe.style.width=`${k}px`,oe.style.minWidth=`${k}px`,oe.style.maxWidth=`${k}px`)}))}}function zt(){l(20,A={}),sl()}function it(_,k){if(ce||"button"in k&&typeof k.button=="number"&&k.button!==0)return;k.preventDefault(),k.stopPropagation();const L=k.currentTarget,q=L.closest("th");if(!q){console.error("Could not find header element for resize");return}ce=_.name,ie=k.clientX,_e=q.getBoundingClientRect().width,M[_.name]||At(_.name,_e),document.body.style.cursor="col-resize",document.body.style.userSelect="none",_l(k,L)}function ut(_,k){if(k.key==="ArrowLeft"||k.key==="ArrowDown"){k.preventDefault();const L=M[_.name]||100,q=Math.max(60,L-10);At(_.name,q),_.name,l(26,We=`${_.name} column width decreased to ${q} pixels`),setTimeout(()=>Tt(),100)}else if(k.key==="ArrowRight"||k.key==="ArrowUp"){k.preventDefault();const q=(M[_.name]||100)+10;At(_.name,q),_.name,l(26,We=`${_.name} column width increased to ${q} pixels`),setTimeout(()=>Tt(),100)}else(k.key==="Enter"||k.key==="Escape")&&(k.preventDefault(),Tt())}function _l(_,k){if("pointerId"in _){if(Ie=_.pointerId,ve=k,typeof k.setPointerCapture=="function")try{k.setPointerCapture(_.pointerId)}catch{}window.addEventListener("pointermove",qt,{passive:!1}),window.addEventListener("pointerup",Ke),window.addEventListener("pointercancel",Ke)}else window.addEventListener("mousemove",rl,{passive:!1}),window.addEventListener("mouseup",Ke)}function ml(_,k){const L=k.target;vt(_,(L==null?void 0:L.value)??"")}function bl(_){const k=M[_.name];return k?`width: ${k}px; min-width: ${k}px; max-width: ${k}px;`:""}function qt(_){if(!ce)return;_.preventDefault();const k=_.clientX-ie,L=Math.max(60,_e+k);At(ce,L)}function rl(_){if(!ce)return;_.preventDefault();const k=_.clientX-ie,L=Math.max(60,_e+k);At(ce,L)}function Ke(_){const k=!!ce;if(ve&&Ie!==null&&typeof ve.releasePointerCapture=="function")try{ve.releasePointerCapture(Ie)}catch{}ve=null,Ie=null,ce&&(document.body.style.cursor="",document.body.style.userSelect="",ce=null),window.removeEventListener("pointermove",qt),window.removeEventListener("pointerup",Ke),window.removeEventListener("pointercancel",Ke),window.removeEventListener("mousemove",rl),window.removeEventListener("mouseup",Ke),_ instanceof MouseEvent&&_.type==="mouseup"&&_.preventDefault(),k&&Tt()}function ft(){const _=[];return h.forEach(k=>{if(k.isNew&&!k.deleted){const q={};u.forEach(Z=>{const le=k.current[Z.name];q[Z.name]=bs(le,Z.type)}),_.push({type:"insert",data:q});return}if(k.deleted&&!k.isNew){const q={};d.forEach(Z=>{q[Z]=k.original[Z]}),Object.keys(q).length>0&&_.push({type:"delete",where:q});return}if(k.deleted&&k.isNew)return;const L={};if(u.forEach(q=>{if(at(k,q)){const Z=k.current[q.name];L[q.name]=bs(Z,q.type)}}),Object.keys(L).length>0){const q={};d.forEach(Z=>{q[Z]=k.original[Z]}),_.push({type:"update",data:L,where:q})}}),_}function ge(){if(!s)throw new Error("VS Code API unavailable.");return s}function Pt(){ge().postMessage({command:"refresh"})}function zl(){const _=ft();if(h.flatMap(L=>Object.entries(L.validation??{}).filter(([,q])=>q).map(([q,Z])=>({rowId:L.id,column:q,error:Z}))).length>0&&!z){l(15,T="Fix validation errors before generating SQL preview."),l(11,C=!0),l(10,E=""),l(13,j=!1),l(12,V=!0);return}l(13,j=!0),l(11,C=!0),l(10,E=""),l(12,V=!1),ge().postMessage({command:"previewChanges",changes:_})}function Ht(){l(11,C=!1),l(13,j=!1)}function Wt(){try{let _=String(E||"");_=_.replace(/\r\n?/g,`
`),_=_.replace(/;[ \t\f\v]*\n+/g,"; "),_=_.replace(/;[ \t\f\v]+/g,"; "),_=_.replace(/\n+/g," "),_=_.replace(/\s+/g," ").trim(),_&&!_.endsWith(";")&&(_=_+";"),ge().postMessage({command:"copyToSqlTerminal",sql:_})}catch{ge().postMessage({command:"copyToSqlTerminal",sql:E})}finally{Ht()}}function ql(){Ht(),st()}function st(){const _=ft();if(h.flatMap(L=>Object.entries(L.validation??{}).filter(([,q])=>q).map(([q,Z])=>({rowId:L.id,column:q,error:Z}))).length>0&&!z){l(15,T="Fix validation errors before executing changes."),l(14,O="");return}if(_.length===0){l(14,O="No pending changes to execute."),l(15,T="");return}l(14,O=""),l(15,T=""),l(16,w=!0),ge().postMessage({command:"executeChanges",changes:_,batchMode:!0,bypassValidation:z})}function vl(){l(24,I=!0)}function Hl(){l(25,te=!0)}function gl(_){if(K.has(_)){K.delete(_),l(23,N=u.filter(L=>!K.has(L.name)));const k={columnOrder:u.map(L=>L.name),hiddenColumns:Array.from(K)};ge().postMessage({command:"saveTablePreferences",prefs:k})}}function al(){K.clear(),l(23,N=u.filter(k=>!K.has(k.name)));const _={columnOrder:u.map(k=>k.name),hiddenColumns:[]};ge().postMessage({command:"saveTablePreferences",prefs:_}),l(25,te=!1)}function Wl(_){const k=_.detail.items;l(4,u=k.map(L=>Q.get(L.name)??{name:L.name,type:L.type,nullable:!1})),l(22,K=new Set(k.filter(L=>!L.visible).map(L=>L.name))),l(23,N=u.filter(L=>!K.has(L.name)))}function Et(_){gl(_.detail.name)}function Qe(_){ge().postMessage({command:"loadPage",pageNumber:_}),l(26,We=`Page ${_+1} of ${Math.ceil(m/p)} loaded`)}function kl(){ge().postMessage({command:"search",term:(y||"").trim()}),l(26,We=y!=null&&y.trim()?`Searching for "${y.trim()}"`:"Search cleared, showing all rows")}function ol(){ge().postMessage({command:"resetTablePreferences"}),l(26,We="Column preferences reset to defaults")}function Jl(_){const k=_.detail.items;l(4,u=k.map(q=>Q.get(q.name)??{name:q.name,type:q.type,nullable:!1})),l(22,K=new Set(k.filter(q=>!q.visible).map(q=>q.name))),l(23,N=u.filter(q=>!K.has(q.name)));const L={columnOrder:u.map(q=>q.name),hiddenColumns:Array.from(K)};ge().postMessage({command:"saveTablePreferences",prefs:L})}function xe(_){const k=_.data;if(!(!k||typeof k!="object"))switch(k.command){case"sqlPreview":l(13,j=!1),l(12,V=!!k.error),l(10,E=k.payload&&typeof k.payload=="string"?String(k.payload):""),l(11,C=!0);break;case"loadData":mt(k.payload);const L=k.payload;l(26,We=`Table loaded: ${L.totalRows} rows, page ${L.currentPage+1} of ${Math.ceil(L.totalRows/L.paginationSize)}`);break;case"executionComplete":l(16,w=!1),k.success?(l(14,O="Changes executed successfully"),l(15,T="")):(l(15,T=k.error?String(k.error):"Execution failed"),l(14,O="")),l(13,j=!1),l(11,C=!1);break;case"showMessage":l(14,O=k.text?String(k.text):"");break;case"saveTablePreferencesResult":k.payload&&k.payload.success?(l(14,O="Column preferences saved"),l(15,T=""),l(24,I=!1)):l(15,T=k.payload&&k.payload.error?String(k.payload.error):"Failed to save column preferences");break;case"resetTablePreferencesResult":k.payload&&k.payload.success?(l(14,O="Column preferences reset to defaults"),l(15,T=""),l(22,K=new Set),l(4,u=Array.from(Q.values())),l(23,N=u.filter(q=>!K.has(q.name))),l(24,I=!1)):l(15,T=k.payload&&k.payload.error?String(k.payload.error):"Failed to reset column preferences");break}}$l(()=>(window.addEventListener("message",xe),()=>{window.removeEventListener("message",xe),window.removeEventListener("pointermove",qt),window.removeEventListener("pointerup",Ke),window.removeEventListener("pointercancel",Ke),window.removeEventListener("mousemove",rl),window.removeEventListener("mouseup",Ke)}));function yl(){z=this.checked,l(21,z)}const El=_=>({name:_.name,type:_.type,visible:!K.has(_.name)}),Ct=()=>ol(),Cl=()=>l(24,I=!1),wl=()=>l(24,I=!1),Jt=()=>{al()},Qt=()=>{l(25,te=!1)};function Gt(){y=this.value,l(9,y)}const De=_=>_.key==="Enter"&&kl(),Ql=()=>{(!y||y.trim().length===0)&&kl()},en=()=>Qe(Math.max(g-1,0)),Ue=()=>Qe(g+1),ze=_=>{_.stopPropagation(),ge().postMessage({command:"openIndexManager"})},ke=_=>nl(_),ye=(_,k)=>it(_,k),Ee=(_,k)=>it(_,k),Ce=(_,k)=>ut(_,k),Xt=(_,k)=>ml(_,k),Pe=_=>_.key==="Enter"&&sl(),Yt=(_,k)=>ul(_,k),Le=(_,k)=>tl(_,k),Zt=(_,k,L)=>bt(_,k,L),Me=(_,k,L)=>nt(_,k,L),Tl=(_,k)=>Rl(_,k),tn=(_,k,L)=>jt(_,k,L),Re=(_,k)=>pl(_,k),Be=(_,k,L)=>jt(_,k,L),je=(_,k)=>Kt(_,k),we=(_,k,L)=>jt(_,k,L),Te=(_,k)=>{const L=Ar();Je(_,k,L)},Se=(_,k)=>$e(_,k),D=_=>kt(_);function W(_){Al[_?"unshift":"push"](()=>{Ae=_,l(32,Ae)})}function Y(){Ve=this.value,l(30,Ve)}function et(_){Al[_?"unshift":"push"](()=>{_t=_,l(37,_t)})}function $t(){Oe=this.value,l(36,Oe)}return t.$$set=_=>{"vscode"in _&&l(0,s=_.vscode),"initialState"in _&&l(92,a=_.initialState)},t.$$.update=()=>{t.$$.dirty[0]&2&&l(43,n=h.some(_=>!_||!_.validation?!1:Object.values(_.validation).some(k=>k!=null)))},[s,h,i,f,u,d,g,m,p,y,E,C,V,j,O,T,w,P,F,B,A,z,K,N,I,te,We,he,re,pe,Ve,Ne,Ae,ht,de,pt,Oe,_t,el,It,Bt,Ze,il,n,$,xl,ul,tl,fl,cl,dl,kt,Je,nt,jt,bt,Rl,Ft,$e,ot,Bl,hl,pl,yt,jl,Kt,ll,Fl,nl,Kl,sl,zt,it,ut,ml,bl,ge,Pt,zl,Ht,Wt,ql,st,vl,Hl,al,Wl,Et,Qe,kl,ol,Jl,a,yl,El,Ct,Cl,wl,Jt,Qt,Gt,De,Ql,en,Ue,ze,ke,ye,Ee,Ce,Xt,Pe,Yt,Le,Zt,Me,Tl,tn,Re,Be,je,we,Te,Se,D,W,Y,et,$t]}class Lr extends Pl{constructor(e){super(),Ll(this,e,Pr,Dr,Ml,{vscode:0,initialState:92},null,[-1,-1,-1,-1,-1,-1])}}const Cs=document.getElementById("app");if(!Cs)throw new Error("Failed to locate webview root element.");const Mr=window.acquireVsCodeApi?window.acquireVsCodeApi():void 0;new Lr({target:Cs,hydrate:!0,props:{vscode:Mr,initialState:window.initialState}});
