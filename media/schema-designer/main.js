/* empty css           */import{S as Tt,i as Pt,s as St,n as Ge,d as f,r as Dt,b as ve,c as R,e as o,l as me,f as u,g as h,h as b,k as te,j as T,m as ye,o as _,t as le,p as P,u as Ft,a as We,H as et,K as Qe,v as tt,P as lt,U as st}from"../chunks/index.js";import{g as It,c as at}from"../chunks/clsx.js";import{e as Ce,u as At,d as Lt}from"../chunks/each.js";const{Map:Mt}=It;function nt(n,e,t){const l=n.slice();return l[48]=e[t],l}function rt(n,e,t){const l=n.slice();return l[51]=e[t],l}function ot(n,e,t){const l=n.slice();return l[54]=e[t],l}function it(n,e,t){const l=n.slice();return l[57]=e[t],l}function ct(n,e,t){const l=n.slice();return l[57]=e[t],l}function ut(n){let e,t="Unsaved";return{c(){e=_("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),ye(e)!=="svelte-2puac7"&&(e.textContent=t),this.h()},h(){u(e,"class","designer-header__badge svelte-1a7w302"),u(e,"title","Unsaved changes")},m(l,s){R(l,e,s)},d(l){l&&f(e)}}}function ft(n){let e,t,l="Fix before applying",s,r,a=Ce(n[13]),i=[];for(let m=0;m<a.length;m+=1)i[m]=dt(ct(n,a,m));return{c(){e=_("section"),t=_("h3"),t.textContent=l,s=P(),r=_("ul");for(let m=0;m<i.length;m+=1)i[m].c();this.h()},l(m){e=h(m,"SECTION",{class:!0});var F=b(e);t=h(F,"H3",{"data-svelte-h":!0}),ye(t)!=="svelte-a4moic"&&(t.textContent=l),s=T(F),r=h(F,"UL",{class:!0});var g=b(r);for(let C=0;C<i.length;C+=1)i[C].l(g);g.forEach(f),F.forEach(f),this.h()},h(){u(r,"class","svelte-1a7w302"),u(e,"class","designer-alert designer-alert--error svelte-1a7w302")},m(m,F){R(m,e,F),o(e,t),o(e,s),o(e,r);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(r,null)},p(m,F){if(F[0]&8192){a=Ce(m[13]);let g;for(g=0;g<a.length;g+=1){const C=ct(m,a,g);i[g]?i[g].p(C,F):(i[g]=dt(C),i[g].c(),i[g].m(r,null))}for(;g<i.length;g+=1)i[g].d(1);i.length=a.length}},d(m){m&&f(e),We(i,m)}}}function dt(n){let e,t=n[57]+"",l;return{c(){e=_("li"),l=le(t)},l(s){e=h(s,"LI",{});var r=b(e);l=te(r,t),r.forEach(f)},m(s,r){R(s,e,r),o(e,l)},p(s,r){r[0]&8192&&t!==(t=s[57]+"")&&ve(l,t)},d(s){s&&f(e)}}}function Vt(n){let e=[],t=new Mt,l,s=Ce(n[2]);const r=a=>a[51].id;for(let a=0;a<s.length;a+=1){let i=rt(n,s,a),m=r(i);t.set(m,e[a]=bt(m,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=et()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);l=et()},m(a,i){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(a,i);R(a,l,i)},p(a,i){i[0]&8355852&&(s=Ce(a[2]),e=At(e,i,r,1,a,s,t,l.parentNode,Lt,bt,l,rt))},d(a){a&&f(l);for(let i=0;i<e.length;i+=1)e[i].d(a)}}}function Ut(n){let e,t='<td colspan="7" class="empty svelte-1a7w302">No columns defined.</td>';return{c(){e=_("tr"),e.innerHTML=t},l(l){e=h(l,"TR",{"data-svelte-h":!0}),ye(e)!=="svelte-8zvkww"&&(e.innerHTML=t)},m(l,s){R(l,e,s)},p:Ge,d(l){l&&f(e)}}}function ht(n){let e,t,l=n[51].originalName+"",s;return{c(){e=_("p"),t=le("Renamed from "),s=le(l),this.h()},l(r){e=h(r,"P",{class:!0});var a=b(e);t=te(a,"Renamed from "),s=te(a,l),a.forEach(f),this.h()},h(){u(e,"class","hint svelte-1a7w302")},m(r,a){R(r,e,a),o(e,t),o(e,s)},p(r,a){a[0]&4&&l!==(l=r[51].originalName+"")&&ve(s,l)},d(r){r&&f(e)}}}function _t(n){let e,t=Ce(n[51].errors),l=[];for(let s=0;s<t.length;s+=1)l[s]=pt(it(n,t,s));return{c(){e=_("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=h(s,"UL",{class:!0});var r=b(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(f),this.h()},h(){u(e,"class","cell-errors svelte-1a7w302")},m(s,r){R(s,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(s,r){if(r[0]&4){t=Ce(s[51].errors);let a;for(a=0;a<t.length;a+=1){const i=it(s,t,a);l[a]?l[a].p(i,r):(l[a]=pt(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(s){s&&f(e),We(l,s)}}}function pt(n){let e,t=n[57]+"",l;return{c(){e=_("li"),l=le(t)},l(s){e=h(s,"LI",{});var r=b(e);l=te(r,t),r.forEach(f)},m(s,r){R(s,e,r),o(e,l)},p(s,r){r[0]&4&&t!==(t=s[57]+"")&&ve(l,t)},d(s){s&&f(e)}}}function mt(n){let e,t=n[54]+"",l,s;return{c(){e=_("option"),l=le(t),this.h()},l(r){e=h(r,"OPTION",{});var a=b(e);l=te(a,t),a.forEach(f),this.h()},h(){e.__value=s=n[54],Qe(e,e.__value)},m(r,a){R(r,e,a),o(e,l)},p(r,a){a[0]&8&&t!==(t=r[54]+"")&&ve(l,t),a[0]&8&&s!==(s=r[54])&&(e.__value=s,Qe(e,e.__value))},d(r){r&&f(e)}}}function qt(n){let e,t=n[51].isNew?"Remove":"Drop",l,s,r;function a(){return n[35](n[51])}return{c(){e=_("button"),l=le(t),this.h()},l(i){e=h(i,"BUTTON",{type:!0,class:!0});var m=b(e);l=te(m,t),m.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class","ps-btn ps-btn--ghost")},m(i,m){R(i,e,m),o(e,l),s||(r=me(e,"click",a),s=!0)},p(i,m){n=i,m[0]&4&&t!==(t=n[51].isNew?"Remove":"Drop")&&ve(l,t)},d(i){i&&f(e),s=!1,r()}}}function Ot(n){let e,t="Restore",l,s;function r(){return n[34](n[51])}return{c(){e=_("button"),e.textContent=t,this.h()},l(a){e=h(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-ez10iu"&&(e.textContent=t),this.h()},h(){u(e,"type","button"),u(e,"class","ps-btn ps-btn--ghost")},m(a,i){R(a,e,i),l||(s=me(e,"click",r),l=!0)},p(a,i){n=a},d(a){a&&f(e),l=!1,s()}}}function vt(n){let e,t="New";return{c(){e=_("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-ukivu4"&&(e.textContent=t),this.h()},h(){u(e,"class","hint svelte-1a7w302")},m(l,s){R(l,e,s)},d(l){l&&f(e)}}}function bt(n,e){let t,l,s,r,a,i,m,F,g,C,se,z,W,B,L,I,H,ie,he,S,be,_e,Z,Y,K,ge,G,ke,X,M,ce,x,ue,ae,pe,ne,De,re,q,fe;function we(...k){return e[28](e[51],...k)}let O=e[51].originalName&&e[51].originalName!==e[51].name&&ht(e),V=e[51].errors.length>0&&_t(e),J=Ce(e[3]),D=[];for(let k=0;k<J.length;k+=1)D[k]=mt(ot(e,J,k));function Te(...k){return e[29](e[51],...k)}function Ee(...k){return e[30](e[51],...k)}function Ae(...k){return e[31](e[51],...k)}function Pe(...k){return e[32](e[51],...k)}function c(){return e[33](e[51])}function d(k,w){return k[51].markedForDrop?Ot:qt}let p=d(e),v=p(e),N=e[51].isNew&&vt();return{key:n,first:null,c(){t=_("tr"),l=_("td"),s=_("input"),i=P(),O&&O.c(),m=P(),V&&V.c(),F=P(),g=_("td"),C=_("select");for(let k=0;k<D.length;k+=1)D[k].c();W=P(),B=_("td"),L=_("input"),ie=P(),he=_("td"),S=_("input"),Z=P(),Y=_("td"),K=_("input"),ke=P(),X=_("td"),M=_("input"),ue=P(),ae=_("td"),pe=_("div"),v.c(),ne=P(),N&&N.c(),De=P(),this.h()},l(k){t=h(k,"TR",{class:!0});var w=b(t);l=h(w,"TD",{"data-label":!0,class:!0});var y=b(l);s=h(y,"INPUT",{type:!0,class:!0}),i=T(y),O&&O.l(y),m=T(y),V&&V.l(y),y.forEach(f),F=T(w),g=h(w,"TD",{"data-label":!0,class:!0});var U=b(g);C=h(U,"SELECT",{class:!0});var Me=b(C);for(let oe=0;oe<D.length;oe+=1)D[oe].l(Me);Me.forEach(f),U.forEach(f),W=T(w),B=h(w,"TD",{"data-label":!0,class:!0});var Se=b(B);L=h(Se,"INPUT",{type:!0,class:!0}),Se.forEach(f),ie=T(w),he=h(w,"TD",{"data-label":!0,class:!0});var de=b(he);S=h(de,"INPUT",{type:!0,placeholder:!0,class:!0}),de.forEach(f),Z=T(w),Y=h(w,"TD",{"data-label":!0,class:!0});var Q=b(Y);K=h(Q,"INPUT",{type:!0,placeholder:!0,class:!0}),Q.forEach(f),ke=T(w),X=h(w,"TD",{"data-label":!0,class:!0});var j=b(X);M=h(j,"INPUT",{type:!0,class:!0}),j.forEach(f),ue=T(w),ae=h(w,"TD",{class:!0});var Fe=b(ae);pe=h(Fe,"DIV",{class:!0});var Ie=b(pe);v.l(Ie),Ie.forEach(f),ne=T(Fe),N&&N.l(Fe),Fe.forEach(f),De=T(w),w.forEach(f),this.h()},h(){u(s,"type","text"),s.value=r=e[51].name,s.disabled=a=e[51].markedForDrop,u(s,"class","svelte-1a7w302"),tt(s,"has-error",e[51].errors.some(Ct)),u(l,"data-label","Column name"),u(l,"class","svelte-1a7w302"),C.disabled=z=e[51].markedForDrop,u(C,"class","svelte-1a7w302"),u(g,"data-label","Type"),u(g,"class","svelte-1a7w302"),u(L,"type","checkbox"),L.checked=I=e[51].nullable,L.disabled=H=e[51].markedForDrop,u(L,"class","svelte-1a7w302"),u(B,"data-label","Nullable"),u(B,"class","checkbox-cell svelte-1a7w302"),u(S,"type","text"),S.value=be=e[51].defaultValue??"",u(S,"placeholder","e.g. NOW()"),S.disabled=_e=e[51].markedForDrop,u(S,"class","svelte-1a7w302"),u(he,"data-label","Default"),u(he,"class","svelte-1a7w302"),u(K,"type","text"),K.value=ge=e[51].comment??"",u(K,"placeholder","Column description"),K.disabled=G=e[51].markedForDrop,u(K,"class","svelte-1a7w302"),u(Y,"data-label","Comment"),u(Y,"class","svelte-1a7w302"),u(M,"type","checkbox"),M.checked=ce=e[51].isPrimaryKey,M.disabled=x=e[51].markedForDrop,u(M,"class","svelte-1a7w302"),u(X,"data-label","Primary"),u(X,"class","checkbox-cell svelte-1a7w302"),u(pe,"class","row-actions svelte-1a7w302"),u(ae,"class","actions svelte-1a7w302"),u(t,"class",re=st(at({dropped:e[51].markedForDrop}))+" svelte-1a7w302"),this.first=t},m(k,w){R(k,t,w),o(t,l),o(l,s),o(l,i),O&&O.m(l,null),o(l,m),V&&V.m(l,null),o(t,F),o(t,g),o(g,C);for(let y=0;y<D.length;y+=1)D[y]&&D[y].m(C,null);lt(C,e[51].type),o(t,W),o(t,B),o(B,L),o(t,ie),o(t,he),o(he,S),o(t,Z),o(t,Y),o(Y,K),o(t,ke),o(t,X),o(X,M),o(t,ue),o(t,ae),o(ae,pe),v.m(pe,null),o(ae,ne),N&&N.m(ae,null),o(t,De),q||(fe=[me(s,"input",we),me(C,"change",Te),me(L,"change",Ee),me(S,"input",Ae),me(K,"input",Pe),me(M,"change",c)],q=!0)},p(k,w){if(e=k,w[0]&12&&r!==(r=e[51].name)&&s.value!==r&&(s.value=r),w[0]&12&&a!==(a=e[51].markedForDrop)&&(s.disabled=a),w[0]&4&&tt(s,"has-error",e[51].errors.some(Ct)),e[51].originalName&&e[51].originalName!==e[51].name?O?O.p(e,w):(O=ht(e),O.c(),O.m(l,m)):O&&(O.d(1),O=null),e[51].errors.length>0?V?V.p(e,w):(V=_t(e),V.c(),V.m(l,null)):V&&(V.d(1),V=null),w[0]&8){J=Ce(e[3]);let y;for(y=0;y<J.length;y+=1){const U=ot(e,J,y);D[y]?D[y].p(U,w):(D[y]=mt(U),D[y].c(),D[y].m(C,null))}for(;y<D.length;y+=1)D[y].d(1);D.length=J.length}w[0]&12&&se!==(se=e[51].type)&&lt(C,e[51].type),w[0]&12&&z!==(z=e[51].markedForDrop)&&(C.disabled=z),w[0]&12&&I!==(I=e[51].nullable)&&(L.checked=I),w[0]&12&&H!==(H=e[51].markedForDrop)&&(L.disabled=H),w[0]&12&&be!==(be=e[51].defaultValue??"")&&S.value!==be&&(S.value=be),w[0]&12&&_e!==(_e=e[51].markedForDrop)&&(S.disabled=_e),w[0]&12&&ge!==(ge=e[51].comment??"")&&K.value!==ge&&(K.value=ge),w[0]&12&&G!==(G=e[51].markedForDrop)&&(K.disabled=G),w[0]&12&&ce!==(ce=e[51].isPrimaryKey)&&(M.checked=ce),w[0]&12&&x!==(x=e[51].markedForDrop)&&(M.disabled=x),p===(p=d(e))&&v?v.p(e,w):(v.d(1),v=p(e),v&&(v.c(),v.m(pe,null))),e[51].isNew?N||(N=vt(),N.c(),N.m(ae,null)):N&&(N.d(1),N=null),w[0]&12&&re!==(re=st(at({dropped:e[51].markedForDrop}))+" svelte-1a7w302")&&u(t,"class",re)},d(k){k&&f(t),O&&O.d(),V&&V.d(),We(D,k),v.d(),N&&N.d(),q=!1,Dt(fe)}}}function gt(n){let e,t="Generating preview…";return{c(){e=_("p"),e.textContent=t,this.h()},l(l){e=h(l,"P",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-3otbvi"&&(e.textContent=t),this.h()},h(){u(e,"class","preview-status svelte-1a7w302")},m(l,s){R(l,e,s)},d(l){l&&f(e)}}}function kt(n){let e,t=Ce(n[5]),l=[];for(let s=0;s<t.length;s+=1)l[s]=wt(nt(n,t,s));return{c(){e=_("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=h(s,"UL",{class:!0});var r=b(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(f),this.h()},h(){u(e,"class","designer-alert designer-alert--warning svelte-1a7w302")},m(s,r){R(s,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(s,r){if(r[0]&32){t=Ce(s[5]);let a;for(a=0;a<t.length;a+=1){const i=nt(s,t,a);l[a]?l[a].p(i,r):(l[a]=wt(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(s){s&&f(e),We(l,s)}}}function wt(n){let e,t=n[48]+"",l;return{c(){e=_("li"),l=le(t)},l(s){e=h(s,"LI",{});var r=b(e);l=te(r,t),r.forEach(f)},m(s,r){R(s,e,r),o(e,l)},p(s,r){r[0]&32&&t!==(t=s[48]+"")&&ve(l,t)},d(s){s&&f(e)}}}function Rt(n){let e,t;return{c(){e=_("pre"),t=le(n[4]),this.h()},l(l){e=h(l,"PRE",{class:!0});var s=b(e);t=te(s,n[4]),s.forEach(f),this.h()},h(){u(e,"class","svelte-1a7w302")},m(l,s){R(l,e,s),o(e,t)},p(l,s){s[0]&16&&ve(t,l[4])},d(l){l&&f(e)}}}function Kt(n){let e,t,l;return{c(){e=_("textarea"),this.h()},l(s){e=h(s,"TEXTAREA",{spellcheck:!0,rows:!0,class:!0}),b(e).forEach(f),this.h()},h(){u(e,"spellcheck",!1),u(e,"rows","12"),u(e,"class","manual-editor svelte-1a7w302")},m(s,r){R(s,e,r),Qe(e,n[8]),t||(l=me(e,"input",n[36]),t=!0)},p(s,r){r[0]&256&&Qe(e,s[8])},d(s){s&&f(e),t=!1,l()}}}function yt(n){let e,t;return{c(){e=_("div"),t=le(n[9]),this.h()},l(l){e=h(l,"DIV",{class:!0});var s=b(e);t=te(s,n[9]),s.forEach(f),this.h()},h(){u(e,"class","message success svelte-1a7w302")},m(l,s){R(l,e,s),o(e,t)},p(l,s){s[0]&512&&ve(t,l[9])},d(l){l&&f(e)}}}function Et(n){let e,t;return{c(){e=_("div"),t=le(n[10]),this.h()},l(l){e=h(l,"DIV",{class:!0});var s=b(e);t=te(s,n[10]),s.forEach(f),this.h()},h(){u(e,"class","message error svelte-1a7w302")},m(l,s){R(l,e,s),o(e,t)},p(l,s){s[0]&1024&&ve(t,l[10])},d(l){l&&f(e)}}}function Bt(n){let e,t,l,s,r,a,i,m,F,g,C,se,z=n[2].length+"",W,B,L,I,H,ie="Reload structure",he,S,be="Add column",_e,Z,Y=n[11]?"Applying…":"Apply changes",K,ge,G,ke,X,M,ce,x,ue,ae='<tr><th scope="col" class="svelte-1a7w302">Column</th> <th scope="col" class="svelte-1a7w302">Type</th> <th scope="col" class="svelte-1a7w302">Nullable</th> <th scope="col" class="svelte-1a7w302">Default</th> <th scope="col" class="svelte-1a7w302">Comment</th> <th scope="col" class="svelte-1a7w302">Primary</th> <th scope="col" class="actions svelte-1a7w302">Actions</th></tr>',pe,ne,De,re,q,fe,we,O="SQL Preview",V,J,D,Te,Ee,Ae="Edit SQL manually",Pe,c,d,p,v,N,k,w,y=n[12]&&ut(),U=n[13].length>0&&ft(n);function Me(E,A){return E[2].length===0?Ut:Vt}let Se=Me(n),de=Se(n),Q=n[6]&&gt(),j=n[5].length>0&&kt(n);function Fe(E,A){return E[7]?Kt:Rt}let Ie=Fe(n),oe=Ie(n),$=n[9]&&yt(n),ee=n[10]&&Et(n);return{c(){e=_("div"),t=_("header"),l=_("div"),s=_("h2"),r=le(n[0]),a=le("."),i=_("span"),m=le(n[1]),F=P(),g=_("p"),C=_("span"),se=le("Columns: "),W=le(z),B=P(),y&&y.c(),L=P(),I=_("div"),H=_("button"),H.textContent=ie,he=P(),S=_("button"),S.textContent=be,_e=P(),Z=_("button"),K=le(Y),G=P(),U&&U.c(),ke=P(),X=_("section"),M=_("div"),ce=_("div"),x=_("table"),ue=_("thead"),ue.innerHTML=ae,pe=P(),ne=_("tbody"),de.c(),De=P(),re=_("aside"),q=_("div"),fe=_("header"),we=_("h3"),we.textContent=O,V=P(),J=_("label"),D=_("input"),Te=P(),Ee=_("span"),Ee.textContent=Ae,Pe=P(),Q&&Q.c(),c=P(),j&&j.c(),d=P(),oe.c(),p=P(),v=_("div"),$&&$.c(),N=P(),ee&&ee.c(),this.h()},l(E){e=h(E,"DIV",{class:!0});var A=b(e);t=h(A,"HEADER",{class:!0});var Ve=b(t);l=h(Ve,"DIV",{class:!0});var Ue=b(l);s=h(Ue,"H2",{class:!0});var qe=b(s);r=te(qe,n[0]),a=te(qe,"."),i=h(qe,"SPAN",{class:!0});var Xe=b(i);m=te(Xe,n[1]),Xe.forEach(f),qe.forEach(f),F=T(Ue),g=h(Ue,"P",{class:!0});var Oe=b(g);C=h(Oe,"SPAN",{class:!0});var Ye=b(C);se=te(Ye,"Columns: "),W=te(Ye,z),Ye.forEach(f),B=T(Oe),y&&y.l(Oe),Oe.forEach(f),Ue.forEach(f),L=T(Ve),I=h(Ve,"DIV",{class:!0,role:!0,"aria-label":!0});var Le=b(I);H=h(Le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ye(H)!=="svelte-7jneuu"&&(H.textContent=ie),he=T(Le),S=h(Le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ye(S)!=="svelte-606u9s"&&(S.textContent=be),_e=T(Le),Z=h(Le,"BUTTON",{type:!0,class:!0});var Je=b(Z);K=te(Je,Y),Je.forEach(f),Le.forEach(f),Ve.forEach(f),G=T(A),U&&U.l(A),ke=T(A),X=h(A,"SECTION",{class:!0});var Ze=b(X);M=h(Ze,"DIV",{class:!0});var Re=b(M);ce=h(Re,"DIV",{class:!0});var xe=b(ce);x=h(xe,"TABLE",{class:!0});var Ke=b(x);ue=h(Ke,"THEAD",{class:!0,"data-svelte-h":!0}),ye(ue)!=="svelte-oe8hb3"&&(ue.innerHTML=ae),pe=T(Ke),ne=h(Ke,"TBODY",{class:!0});var $e=b(ne);de.l($e),$e.forEach(f),Ke.forEach(f),xe.forEach(f),De=T(Re),re=h(Re,"ASIDE",{class:!0});var Be=b(re);q=h(Be,"DIV",{class:!0});var Ne=b(q);fe=h(Ne,"HEADER",{class:!0});var He=b(fe);we=h(He,"H3",{class:!0,"data-svelte-h":!0}),ye(we)!=="svelte-1bp9daq"&&(we.textContent=O),V=T(He),J=h(He,"LABEL",{class:!0});var je=b(J);D=h(je,"INPUT",{type:!0}),Te=T(je),Ee=h(je,"SPAN",{"data-svelte-h":!0}),ye(Ee)!=="svelte-1yy9gvt"&&(Ee.textContent=Ae),je.forEach(f),He.forEach(f),Pe=T(Ne),Q&&Q.l(Ne),c=T(Ne),j&&j.l(Ne),d=T(Ne),oe.l(Ne),Ne.forEach(f),p=T(Be),v=h(Be,"DIV",{class:!0});var ze=b(v);$&&$.l(ze),N=T(ze),ee&&ee.l(ze),ze.forEach(f),Be.forEach(f),Re.forEach(f),Ze.forEach(f),A.forEach(f),this.h()},h(){u(i,"class","svelte-1a7w302"),u(s,"class","svelte-1a7w302"),u(C,"class","svelte-1a7w302"),u(g,"class","designer-header__meta svelte-1a7w302"),u(l,"class","designer-header__title svelte-1a7w302"),u(H,"type","button"),u(H,"class","ps-btn"),u(S,"type","button"),u(S,"class","ps-btn ps-btn--primary"),u(Z,"type","button"),u(Z,"class","ps-btn ps-btn--accent"),Z.disabled=ge=n[11]||n[13].length>0,u(I,"class","designer-header__actions svelte-1a7w302"),u(I,"role","toolbar"),u(I,"aria-label","Schema actions"),u(t,"class","designer-header svelte-1a7w302"),u(ue,"class","svelte-1a7w302"),u(ne,"class","svelte-1a7w302"),u(x,"class","svelte-1a7w302"),u(ce,"class","designer-columns svelte-1a7w302"),u(we,"class","svelte-1a7w302"),u(D,"type","checkbox"),D.checked=n[7],u(J,"class","manual-toggle svelte-1a7w302"),u(fe,"class","svelte-1a7w302"),u(q,"class","preview-card svelte-1a7w302"),u(v,"class","execution-feedback svelte-1a7w302"),u(re,"class","designer-sidebar svelte-1a7w302"),u(M,"class","designer-grid svelte-1a7w302"),u(X,"class","designer-body svelte-1a7w302"),u(e,"class","designer-container svelte-1a7w302")},m(E,A){R(E,e,A),o(e,t),o(t,l),o(l,s),o(s,r),o(s,a),o(s,i),o(i,m),o(l,F),o(l,g),o(g,C),o(C,se),o(C,W),o(g,B),y&&y.m(g,null),o(t,L),o(t,I),o(I,H),o(I,he),o(I,S),o(I,_e),o(I,Z),o(Z,K),o(e,G),U&&U.m(e,null),o(e,ke),o(e,X),o(X,M),o(M,ce),o(ce,x),o(x,ue),o(x,pe),o(x,ne),de.m(ne,null),o(M,De),o(M,re),o(re,q),o(q,fe),o(fe,we),o(fe,V),o(fe,J),o(J,D),o(J,Te),o(J,Ee),o(q,Pe),Q&&Q.m(q,null),o(q,c),j&&j.m(q,null),o(q,d),oe.m(q,null),o(re,p),o(re,v),$&&$.m(v,null),o(v,N),ee&&ee.m(v,null),k||(w=[me(H,"click",n[25]),me(S,"click",n[14]),me(Z,"click",n[24]),me(D,"change",n[23])],k=!0)},p(E,A){A[0]&1&&ve(r,E[0]),A[0]&2&&ve(m,E[1]),A[0]&4&&z!==(z=E[2].length+"")&&ve(W,z),E[12]?y||(y=ut(),y.c(),y.m(g,null)):y&&(y.d(1),y=null),A[0]&2048&&Y!==(Y=E[11]?"Applying…":"Apply changes")&&ve(K,Y),A[0]&10240&&ge!==(ge=E[11]||E[13].length>0)&&(Z.disabled=ge),E[13].length>0?U?U.p(E,A):(U=ft(E),U.c(),U.m(e,ke)):U&&(U.d(1),U=null),Se===(Se=Me(E))&&de?de.p(E,A):(de.d(1),de=Se(E),de&&(de.c(),de.m(ne,null))),A[0]&128&&(D.checked=E[7]),E[6]?Q||(Q=gt(),Q.c(),Q.m(q,c)):Q&&(Q.d(1),Q=null),E[5].length>0?j?j.p(E,A):(j=kt(E),j.c(),j.m(q,d)):j&&(j.d(1),j=null),Ie===(Ie=Fe(E))&&oe?oe.p(E,A):(oe.d(1),oe=Ie(E),oe&&(oe.c(),oe.m(q,null))),E[9]?$?$.p(E,A):($=yt(E),$.c(),$.m(v,N)):$&&($.d(1),$=null),E[10]?ee?ee.p(E,A):(ee=Et(E),ee.c(),ee.m(v,null)):ee&&(ee.d(1),ee=null)},i:Ge,o:Ge,d(E){E&&f(e),y&&y.d(),U&&U.d(),de.d(),Q&&Q.d(),j&&j.d(),oe.d(),$&&$.d(),ee&&ee.d(),k=!1,Dt(w)}}}const Ct=n=>n.includes("name");function Ht(n,e,t){let{vscode:l}=e,{initialState:s}=e,r="",a="",i=[],m=[],F="/* No changes */",g=[],C=!1,se=null,z=!1,W="",B="",L="",I=!1,H=!1,ie=[];const he=["bigint","boolean","bytea","date","double precision","integer","jsonb","numeric","serial","text","timestamp without time zone","timestamp with time zone","uuid","varchar(255)"];function S(c){t(0,r=c.schemaName),t(1,a=c.tableName),t(3,m=Array.from(new Set([...c.typeOptions,...he])).sort((d,p)=>d.localeCompare(p))),t(2,i=c.columns.map(d=>({...d,errors:[]}))),t(4,F="/* No changes */"),t(8,W=""),t(5,g=[]),t(10,L=""),t(9,B=""),t(11,I=!1),t(12,H=!1),t(13,ie=[]),ne(),Y(!0)}s&&typeof s=="object"&&S(s);function be(){if(!l)throw new Error("VS Code API unavailable.");return l}function _e(){t(12,H=!0),ne(),Z()}function Z(){z||(se&&clearTimeout(se),se=setTimeout(()=>{Y()},250))}function Y(c=!1){se&&(clearTimeout(se),se=null),!(z&&!c)&&(t(6,C=!0),be().postMessage({command:"requestPreview",payload:K()}))}function K(){return{columns:i.map(c=>({id:c.id,name:c.name,originalName:c.originalName,type:c.type,nullable:c.nullable,defaultValue:c.defaultValue,comment:c.comment,isPrimaryKey:c.isPrimaryKey,isNew:c.isNew,markedForDrop:c.markedForDrop}))}}function ge(){const c=new Set(i.filter(k=>!k.markedForDrop).map(k=>k.name.trim().toLowerCase()).filter(k=>k.length>0));let d=1,p=`column_${d}`;for(;c.has(p);)d+=1,p=`column_${d}`;const v=m[0]??"text",N=Date.now();t(2,i=[...i,{id:`new-${N}-${Math.random().toString(16).slice(2)}`,name:p,originalName:null,type:v,nullable:!0,defaultValue:null,comment:null,isPrimaryKey:!1,isNew:!0,markedForDrop:!1,errors:[]}]),_e()}function G(c,d,p){t(2,i=i.map(v=>v.id!==c.id?v:{...v,[d]:p})),_e()}function ke(c,d){const p=d.currentTarget;G(c,"name",(p==null?void 0:p.value)??"")}function X(c,d){const p=d.currentTarget;G(c,"type",(p==null?void 0:p.value)??c.type)}function M(c,d){const p=d.currentTarget;G(c,"nullable",!!(p!=null&&p.checked))}function ce(c,d){const p=d.currentTarget,v=(p==null?void 0:p.value)??"";G(c,"defaultValue",v.length?v:null)}function x(c,d){const p=d.currentTarget,v=(p==null?void 0:p.value)??"";G(c,"comment",v.length?v:null)}function ue(c){if(c.isNew){t(2,i=i.filter(p=>p.id!==c.id)),_e();return}const d=!c.markedForDrop;t(2,i=i.map(p=>p.id!==c.id?p:{...p,markedForDrop:d,isPrimaryKey:d?p.isPrimaryKey:!1})),_e()}function ae(c){c.markedForDrop||G(c,"isPrimaryKey",!c.isPrimaryKey)}function pe(){const c=new Map;return i.forEach(d=>{if(d.markedForDrop)return;const p=(d.name??"").trim().toLowerCase();p&&c.set(p,(c.get(p)??0)+1)}),c}function ne(){t(13,ie=[]);const c=pe();t(2,i=i.map(v=>{const N=[],k=(v.name??"").trim();return v.markedForDrop||(k||N.push("Column name is required"),(v.type??"").trim().length===0&&N.push("Column type is required"),(c.get(k.toLowerCase())??0)>1&&N.push("Duplicate column name")),{...v,errors:N}}));const d=i.filter(v=>!v.markedForDrop);d.filter(v=>v.isPrimaryKey).length===0&&i.some(v=>v.isPrimaryKey)&&ie.push("Primary key selection invalid: all selected columns are dropped."),d.some(v=>v.errors.length>0)&&ie.push("Resolve column validation errors before continuing.")}function De(c){const d=c.target,p=!!(d!=null&&d.checked);t(7,z=p),p?t(8,W=F):(t(8,W=""),Y())}function re(){if(ne(),ie.length>0){t(10,L=ie.join(`
`)),t(9,B="");return}t(10,L=""),t(9,B=""),t(11,I=!0),be().postMessage({command:"executeSchemaChanges",payload:{...K(),useManualSql:z,sql:z?W:void 0}})}function q(){be().postMessage({command:"refreshStructure"})}function fe(c){const d=c.data;if(!(!d||typeof d!="object"))switch(d.command){case"loadState":S(d.payload);break;case"sqlPreview":{const p=d.payload;t(4,F=p.sql||"/* No changes */"),t(5,g=p.warnings??[]),t(6,C=!1),z||t(8,W=F);break}case"executionComplete":t(11,I=!1),d.success?(t(9,B="Schema updated successfully."),t(10,L=""),t(12,H=!1)):(t(10,L=d.error?String(d.error):"Schema update failed."),t(9,B=""));break;case"showMessage":t(9,B=d.text?String(d.text):"");break;case"executionError":t(11,I=!1),t(10,L=d.error?String(d.error):"Schema update failed.");break}}Ft(()=>(window.addEventListener("message",fe),()=>{window.removeEventListener("message",fe),se&&clearTimeout(se)}));const we=(c,d)=>ke(c,d),O=(c,d)=>X(c,d),V=(c,d)=>M(c,d),J=(c,d)=>ce(c,d),D=(c,d)=>x(c,d),Te=c=>ae(c),Ee=c=>G(c,"markedForDrop",!1),Ae=c=>ue(c);function Pe(){W=this.value,t(8,W)}return n.$$set=c=>{"vscode"in c&&t(26,l=c.vscode),"initialState"in c&&t(27,s=c.initialState)},[r,a,i,m,F,g,C,z,W,B,L,I,H,ie,ge,G,ke,X,M,ce,x,ue,ae,De,re,q,l,s,we,O,V,J,D,Te,Ee,Ae,Pe]}class jt extends Tt{constructor(e){super(),Pt(this,e,Ht,Bt,St,{vscode:26,initialState:27},null,[-1,-1])}}const Nt=document.getElementById("app");if(!Nt)throw new Error("Failed to locate schema designer root element.");const zt=window.acquireVsCodeApi?window.acquireVsCodeApi():void 0;new jt({target:Nt,hydrate:!0,props:{vscode:zt,initialState:window.initialState}});
