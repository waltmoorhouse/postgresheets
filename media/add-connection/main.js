import{S as _e,i as he,s as me,x as ye,d as p,y as ae,z as ie,A as Se,B as Le,C as ke,f as b,c as I,g as C,h as T,o as E,b as be,e as f,V as ee,k as te,j as L,t as ne,p as k,W as Ae,D as ue,r as ve,U as Ee,E as fe,l as J,K as U,m as x,F as de,G as ce,u as Ne}from"../chunks/index.js";/* empty css           */function Te(n){let e,t,o;const s=n[4].default,a=ye(s,n,n[3],null);return{c(){e=E("button"),a&&a.c(),this.h()},l(l){e=C(l,"BUTTON",{class:!0,type:!0});var i=T(e);a&&a.l(i),i.forEach(p),this.h()},h(){b(e,"class",t=`ps-btn ${n[0]==="primary"?"ps-btn--primary":""} ${n[0]==="accent"?"ps-btn--accent":""} ${n[0]==="ghost"?"ps-btn--ghost":""} ${n[0]==="link"?"ps-btn--link":""}`),e.disabled=n[1],b(e,"type",n[2])},m(l,i){I(l,e,i),a&&a.m(e,null),o=!0},p(l,[i]){a&&a.p&&(!o||i&8)&&Se(a,s,l,l[3],o?ke(s,l[3],i,null):Le(l[3]),null),(!o||i&1&&t!==(t=`ps-btn ${l[0]==="primary"?"ps-btn--primary":""} ${l[0]==="accent"?"ps-btn--accent":""} ${l[0]==="ghost"?"ps-btn--ghost":""} ${l[0]==="link"?"ps-btn--link":""}`))&&b(e,"class",t),(!o||i&2)&&(e.disabled=l[1]),(!o||i&4)&&b(e,"type",l[2])},i(l){o||(ie(a,l),o=!0)},o(l){ae(a,l),o=!1},d(l){l&&p(e),a&&a.d(l)}}}function De(n,e,t){let{$$slots:o={},$$scope:s}=e,{variant:a="default"}=e,{disabled:l=!1}=e,{type:i="button"}=e;return n.$$set=u=>{"variant"in u&&t(0,a=u.variant),"disabled"in u&&t(1,l=u.disabled),"type"in u&&t(2,i=u.type),"$$scope"in u&&t(3,s=u.$$scope)},[a,l,i,s,o]}class pe extends _e{constructor(e){super(),he(this,e,De,Te,me,{variant:0,disabled:1,type:2})}}function we(n){let e,t;return{c(){e=E("div"),t=ne(n[1]),this.h()},l(o){e=C(o,"DIV",{class:!0,style:!0});var s=T(e);t=te(s,n[1]),s.forEach(p),this.h()},h(){b(e,"class","muted"),ee(e,"font-size","0.85em")},m(o,s){I(o,e,s),f(e,t)},p(o,s){s&2&&be(t,o[1])},d(o){o&&p(e)}}}function Pe(n){let e,t,o,s,a,l;const i=n[3].default,u=ye(i,n,n[2],null);let d=n[1]&&we(n);return{c(){e=E("label"),t=E("div"),o=ne(n[0]),s=k(),u&&u.c(),a=k(),d&&d.c(),this.h()},l(v){e=C(v,"LABEL",{});var g=T(e);t=C(g,"DIV",{style:!0});var _=T(t);o=te(_,n[0]),_.forEach(p),s=L(g),u&&u.l(g),a=L(g),d&&d.l(g),g.forEach(p),this.h()},h(){ee(t,"font-weight","600")},m(v,g){I(v,e,g),f(e,t),f(t,o),f(e,s),u&&u.m(e,null),f(e,a),d&&d.m(e,null),l=!0},p(v,[g]){(!l||g&1)&&be(o,v[0]),u&&u.p&&(!l||g&4)&&Se(u,i,v,v[2],l?ke(i,v[2],g,null):Le(v[2]),null),v[1]?d?d.p(v,g):(d=we(v),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(v){l||(ie(u,v),l=!0)},o(v){ae(u,v),l=!1},d(v){v&&p(e),u&&u.d(v),d&&d.d()}}}function Ve(n,e,t){let{$$slots:o={},$$scope:s}=e,{label:a=""}=e,{hint:l=null}=e;return n.$$set=i=>{"label"in i&&t(0,a=i.label),"hint"in i&&t(1,l=i.hint),"$$scope"in i&&t(2,s=i.$$scope)},[a,l,s,o]}class Ue extends _e{constructor(e){super(),he(this,e,Ve,Pe,me,{label:0,hint:1})}}function Be(n){let e,t,o;return{c(){e=E("input"),this.h()},l(s){e=C(s,"INPUT",{id:!0,placeholder:!0}),this.h()},h(){b(e,"id","name"),b(e,"placeholder","My Database")},m(s,a){I(s,e,a),U(e,n[0]),t||(o=J(e,"input",n[21]),t=!0)},p(s,a){a[0]&1&&e.value!==s[0]&&U(e,s[0])},d(s){s&&p(e),t=!1,o()}}}function qe(n){let e,t="Host",o,s,a,l,i,u,d="Port",v,g,_,h,B,W="Database",M,y,q,A,N,P,R="Username",Q,H,Z,S,D,se="Password",K,O,j,F,z,$,le,oe;return{c(){e=E("label"),e.textContent=t,o=k(),s=E("input"),a=k(),l=E("div"),i=E("div"),u=E("label"),u.textContent=d,v=k(),g=E("input"),_=k(),h=E("div"),B=E("label"),B.textContent=W,M=k(),y=E("input"),q=k(),A=E("div"),N=E("div"),P=E("label"),P.textContent=R,Q=k(),H=E("input"),Z=k(),S=E("div"),D=E("label"),D.textContent=se,K=k(),O=E("input"),j=k(),F=E("label"),z=E("input"),$=ne(" SSL"),this.h()},l(m){e=C(m,"LABEL",{for:!0,"data-svelte-h":!0}),x(e)!=="svelte-sunxie"&&(e.textContent=t),o=L(m),s=C(m,"INPUT",{id:!0,placeholder:!0}),a=L(m),l=C(m,"DIV",{class:!0});var w=T(l);i=C(w,"DIV",{style:!0});var r=T(i);u=C(r,"LABEL",{for:!0,"data-svelte-h":!0}),x(u)!=="svelte-1qb0aiy"&&(u.textContent=d),v=L(r),g=C(r,"INPUT",{id:!0}),r.forEach(p),_=L(w),h=C(w,"DIV",{style:!0});var c=T(h);B=C(c,"LABEL",{for:!0,"data-svelte-h":!0}),x(B)!=="svelte-pcqnfi"&&(B.textContent=W),M=L(c),y=C(c,"INPUT",{id:!0,placeholder:!0}),c.forEach(p),w.forEach(p),q=L(m),A=C(m,"DIV",{class:!0});var V=T(A);N=C(V,"DIV",{style:!0});var G=T(N);P=C(G,"LABEL",{for:!0,"data-svelte-h":!0}),x(P)!=="svelte-1wr0xay"&&(P.textContent=R),Q=L(G),H=C(G,"INPUT",{id:!0}),G.forEach(p),Z=L(V),S=C(V,"DIV",{style:!0});var X=T(S);D=C(X,"LABEL",{for:!0,"data-svelte-h":!0}),x(D)!=="svelte-19vcb14"&&(D.textContent=se),K=L(X),O=C(X,"INPUT",{id:!0,type:!0}),X.forEach(p),V.forEach(p),j=L(m),F=C(m,"LABEL",{});var Y=T(F);z=C(Y,"INPUT",{type:!0}),$=te(Y," SSL"),Y.forEach(p),this.h()},h(){b(e,"for","host"),b(s,"id","host"),b(s,"placeholder","localhost"),b(u,"for","port"),b(g,"id","port"),ee(i,"flex","1"),b(B,"for","database"),b(y,"id","database"),b(y,"placeholder","postgres"),ee(h,"flex","1"),b(l,"class","row svelte-d7xtyc"),b(P,"for","username"),b(H,"id","username"),ee(N,"flex","1"),b(D,"for","passwordManual"),b(O,"id","passwordManual"),b(O,"type","password"),ee(S,"flex","1"),b(A,"class","row svelte-d7xtyc"),b(z,"type","checkbox")},m(m,w){I(m,e,w),I(m,o,w),I(m,s,w),U(s,n[3]),I(m,a,w),I(m,l,w),f(l,i),f(i,u),f(i,v),f(i,g),U(g,n[4]),f(l,_),f(l,h),f(h,B),f(h,M),f(h,y),U(y,n[5]),I(m,q,w),I(m,A,w),f(A,N),f(N,P),f(N,Q),f(N,H),U(H,n[6]),f(A,Z),f(A,S),f(S,D),f(S,K),f(S,O),U(O,n[9]),I(m,j,w),I(m,F,w),f(F,z),z.checked=n[10],f(F,$),le||(oe=[J(s,"input",n[27]),J(g,"input",n[28]),J(y,"input",n[29]),J(H,"input",n[30]),J(O,"input",n[31]),J(z,"change",n[32])],le=!0)},p(m,w){w[0]&8&&s.value!==m[3]&&U(s,m[3]),w[0]&16&&g.value!==m[4]&&U(g,m[4]),w[0]&32&&y.value!==m[5]&&U(y,m[5]),w[0]&64&&H.value!==m[6]&&U(H,m[6]),w[0]&512&&O.value!==m[9]&&U(O,m[9]),w[0]&1024&&(z.checked=m[10])},d(m){m&&(p(e),p(o),p(s),p(a),p(l),p(q),p(A),p(j),p(F)),le=!1,ve(oe)}}}function Me(n){let e,t="Connection string",o,s,a,l,i="Password (connection string mode)",u,d,v,g;return{c(){e=E("label"),e.textContent=t,o=k(),s=E("textarea"),a=k(),l=E("label"),l.textContent=i,u=k(),d=E("input"),this.h()},l(_){e=C(_,"LABEL",{for:!0,"data-svelte-h":!0}),x(e)!=="svelte-14rvt5g"&&(e.textContent=t),o=L(_),s=C(_,"TEXTAREA",{id:!0,rows:!0,placeholder:!0}),T(s).forEach(p),a=L(_),l=C(_,"LABEL",{for:!0,"data-svelte-h":!0}),x(l)!=="svelte-1cflhfn"&&(l.textContent=i),u=L(_),d=C(_,"INPUT",{id:!0,type:!0}),this.h()},h(){b(e,"for","connStr"),b(s,"id","connStr"),b(s,"rows",3),b(s,"placeholder","postgres://user:password@host:5432/db?sslmode=require"),b(l,"for","password"),b(d,"id","password"),b(d,"type","password")},m(_,h){I(_,e,h),I(_,o,h),I(_,s,h),U(s,n[2]),I(_,a,h),I(_,l,h),I(_,u,h),I(_,d,h),U(d,n[8]),v||(g=[J(s,"input",n[25]),J(d,"input",n[26])],v=!0)},p(_,h){h[0]&4&&U(s,_[2]),h[0]&256&&d.value!==_[8]&&U(d,_[8])},d(_){_&&(p(e),p(o),p(s),p(a),p(l),p(u),p(d)),v=!1,ve(g)}}}function je(n){let e;return{c(){e=ne("Test Connection")},l(t){e=te(t,"Test Connection")},m(t,o){I(t,e,o)},d(t){t&&p(e)}}}function Fe(n){let e;return{c(){e=ne("Save")},l(t){e=te(t,"Save")},m(t,o){I(t,e,o)},d(t){t&&p(e)}}}function He(n){let e;return{c(){e=ne("Cancel")},l(t){e=te(t,"Cancel")},m(t,o){I(t,e,o)},d(t){t&&p(e)}}}function Ke(n){let e,t,o="Add Connection",s,a,l,i,u,d="Entry Mode",v,g,_,h,B,W,M,y,q,A,N,P,R,Q,H,Z,S,D,se,K,O,j,F,z,$,le;a=new Ue({props:{label:"Name",hint:"A friendly name for this connection",$$slots:{default:[Be]},$$scope:{ctx:n}}});function oe(r,c){return r[1]==="connectionString"?Me:qe}let m=oe(n),w=m(n);return D=new pe({props:{variant:"ghost",disabled:!n[7],$$slots:{default:[je]},$$scope:{ctx:n}}}),D.$on("click",n[14]),K=new pe({props:{variant:"primary",disabled:!n[13],$$slots:{default:[Fe]},$$scope:{ctx:n}}}),K.$on("click",n[15]),j=new pe({props:{variant:"link",$$slots:{default:[He]},$$scope:{ctx:n}}}),j.$on("click",n[16]),z=Ae(n[23][0]),{c(){e=E("div"),t=E("h2"),t.textContent=o,s=k(),ce(a.$$.fragment),l=k(),i=E("fieldset"),u=E("legend"),u.textContent=d,v=k(),g=E("div"),_=E("label"),h=E("input"),B=ne(" Connection string"),W=k(),M=E("label"),y=E("input"),q=ne(" Manual fields"),A=k(),w.c(),N=k(),P=E("div"),R=E("span"),Q=ne(n[11]),Z=k(),S=E("div"),ce(D.$$.fragment),se=k(),ce(K.$$.fragment),O=k(),ce(j.$$.fragment),this.h()},l(r){e=C(r,"DIV",{});var c=T(e);t=C(c,"H2",{"data-svelte-h":!0}),x(t)!=="svelte-8tbe7r"&&(t.textContent=o),s=L(c),de(a.$$.fragment,c),l=L(c),i=C(c,"FIELDSET",{});var V=T(i);u=C(V,"LEGEND",{"data-svelte-h":!0}),x(u)!=="svelte-1l8tsjr"&&(u.textContent=d),v=L(V),g=C(V,"DIV",{class:!0});var G=T(g);_=C(G,"LABEL",{for:!0});var X=T(_);h=C(X,"INPUT",{id:!0,type:!0}),B=te(X," Connection string"),X.forEach(p),W=L(G),M=C(G,"LABEL",{for:!0});var Y=T(M);y=C(Y,"INPUT",{id:!0,type:!0}),q=te(Y," Manual fields"),Y.forEach(p),G.forEach(p),V.forEach(p),A=L(c),w.l(c),N=L(c),P=C(c,"DIV",{class:!0});var ge=T(P);R=C(ge,"SPAN",{class:!0});var Ce=T(R);Q=te(Ce,n[11]),Ce.forEach(p),ge.forEach(p),Z=L(c),S=C(c,"DIV",{style:!0});var re=T(S);de(D.$$.fragment,re),se=L(re),de(K.$$.fragment,re),O=L(re),de(j.$$.fragment,re),re.forEach(p),c.forEach(p),this.h()},h(){b(h,"id","mode-connection"),b(h,"type","radio"),h.__value="connectionString",U(h,h.__value),b(_,"for","mode-connection"),b(y,"id","mode-manual"),b(y,"type","radio"),y.__value="manual",U(y,y.__value),b(M,"for","mode-manual"),b(g,"class","row svelte-d7xtyc"),b(R,"class",H=Ee(n[12]==="error"?"error":n[12]==="success"?"success":"muted")+" svelte-d7xtyc"),b(P,"class","status svelte-d7xtyc"),ee(S,"margin-top","12px"),ee(S,"display","flex"),ee(S,"gap","8px"),z.p(h,y)},m(r,c){I(r,e,c),f(e,t),f(e,s),fe(a,e,null),f(e,l),f(e,i),f(i,u),f(i,v),f(i,g),f(g,_),f(_,h),h.checked=h.__value===n[1],f(_,B),f(g,W),f(g,M),f(M,y),y.checked=y.__value===n[1],f(M,q),f(e,A),w.m(e,null),f(e,N),f(e,P),f(P,R),f(R,Q),f(e,Z),f(e,S),fe(D,S,null),f(S,se),fe(K,S,null),f(S,O),fe(j,S,null),F=!0,$||(le=[J(h,"change",n[22]),J(y,"change",n[24])],$=!0)},p(r,c){const V={};c[0]&1|c[1]&64&&(V.$$scope={dirty:c,ctx:r}),a.$set(V),c[0]&2&&(h.checked=h.__value===r[1]),c[0]&2&&(y.checked=y.__value===r[1]),m===(m=oe(r))&&w?w.p(r,c):(w.d(1),w=m(r),w&&(w.c(),w.m(e,N))),(!F||c[0]&2048)&&be(Q,r[11]),(!F||c[0]&4096&&H!==(H=Ee(r[12]==="error"?"error":r[12]==="success"?"success":"muted")+" svelte-d7xtyc"))&&b(R,"class",H);const G={};c[0]&128&&(G.disabled=!r[7]),c[1]&64&&(G.$$scope={dirty:c,ctx:r}),D.$set(G);const X={};c[0]&8192&&(X.disabled=!r[13]),c[1]&64&&(X.$$scope={dirty:c,ctx:r}),K.$set(X);const Y={};c[1]&64&&(Y.$$scope={dirty:c,ctx:r}),j.$set(Y)},i(r){F||(ie(a.$$.fragment,r),ie(D.$$.fragment,r),ie(K.$$.fragment,r),ie(j.$$.fragment,r),F=!0)},o(r){ae(a.$$.fragment,r),ae(D.$$.fragment,r),ae(K.$$.fragment,r),ae(j.$$.fragment,r),F=!1},d(r){r&&p(e),ue(a),w.d(),ue(D),ue(K),ue(j),z.r(),$=!1,ve(le)}}}function Oe(n,e,t){let o,s,a,l,{vscode:i}=e,u="",d="connectionString",v="",g="",_="",h="5432",B="",W="",M="",y=!1,q="",A="",N=!1;function P(){if(!i)throw new Error("VS Code API unavailable");return i}function R(){return d==="connectionString"?{mode:"connectionString",connStr:v,password:g}:{mode:"manual",host:_,port:h,database:B,username:W,password:M,ssl:y}}async function Q(){t(11,q="Testing..."),t(12,A="info"),t(18,N=!0);try{P().postMessage({command:"testConnection",payload:R()})}catch(r){t(11,q=String(r)),t(12,A="error")}}async function H(){t(11,q="Saving..."),t(12,A="info"),t(18,N=!0);const r=R();r.name=u,P().postMessage({command:"saveConnection",payload:r})}function Z(){P().postMessage({command:"cancel"})}function S(r){const c=r.data;if(!(!c||typeof c!="object")){if(c.command==="testResult"){const V=c.payload;V.success?(t(11,q="Connection OK"),t(12,A="success")):(t(11,q="Failed: "+(V.error||"Unknown error")),t(12,A="error")),t(18,N=!1)}else if(c.command==="saveResult"){const V=c.payload;V.success?(t(11,q="Saved"),t(12,A="success")):(t(11,q="Save failed: "+(V.error||"Unknown error")),t(12,A="error")),t(18,N=!1)}}}Ne(()=>(window.addEventListener("message",S),()=>window.removeEventListener("message",S)));const D=[[]];function se(){u=this.value,t(0,u)}function K(){d=this.__value,t(1,d)}function O(){d=this.__value,t(1,d)}function j(){v=this.value,t(2,v)}function F(){g=this.value,t(8,g)}function z(){_=this.value,t(3,_)}function $(){h=this.value,t(4,h)}function le(){B=this.value,t(5,B)}function oe(){W=this.value,t(6,W)}function m(){M=this.value,t(9,M)}function w(){y=this.checked,t(10,y)}return n.$$set=r=>{"vscode"in r&&t(17,i=r.vscode)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&u.trim().length,n.$$.dirty[0]&6&&d==="connectionString"&&(!v||v.trim().length===0?t(20,o="Connection string is required"):/^(postgres|postgresql):\/\//i.test(v.trim())?t(20,o=""):t(20,o="Connection string should start with postgres:// or postgresql://")),n.$$.dirty[0]&122&&d==="manual"){t(19,s.host=_.trim()?"":"Host is required",s),t(19,s.database=B.trim()?"":"Database is required",s),t(19,s.username=W.trim()?"":"Username is required",s);const r=Number(h);t(19,s.port=!h||Number.isNaN(r)||r<=0||r>65535?"Port must be a number between 1 and 65535":"",s)}n.$$.dirty[0]&1835011&&t(7,a=!N&&u.trim().length>0&&(d==="connectionString"&&o===""||d==="manual"&&Object.values(s).every(r=>!r))),n.$$.dirty[0]&128&&t(13,l=a)},t(20,o=""),t(19,s={host:"",port:"",database:"",username:""}),[u,d,v,_,h,B,W,a,g,M,y,q,A,l,Q,H,Z,i,N,s,o,se,K,D,O,j,F,z,$,le,oe,m,w]}class Re extends _e{constructor(e){super(),he(this,e,Oe,Ke,me,{vscode:17},null,[-1,-1])}}const Ie=document.getElementById("app");if(!Ie)throw new Error("No root");const ze=window.acquireVsCodeApi?window.acquireVsCodeApi():void 0;new Re({target:Ie,props:{vscode:ze,initialState:window.initialState}});
